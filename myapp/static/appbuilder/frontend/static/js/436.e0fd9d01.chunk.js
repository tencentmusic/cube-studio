"use strict";(self.webpackChunkkubeflow_frontend=self.webpackChunkkubeflow_frontend||[]).push([[436],{54189:function(e,n,t){t.d(n,{Z:function(){return C}});var a=t(1413),r=t(29439),i=t(4519),c=t(83066),l=t(6282),o=t(24992),s=t(29434),u=t(70457),d=t(62479),f=t(32892),m=t(90730),p=t(6005),h=t(58244),Z=t(66505),x=t(68488),v=t(81745),_=t(43673),j=t(5763),g=t(2858),y=t(80818),b=t(97180),S=t(93849),k=t(2556);c.D([f.N,m.N,p.N,h.N,Z.N,x.N,v.N,_.N,j.N,o.N,s.N,u.N,g.T,d.N,y.z,b.N]);var w={height:300};function C(e){var n=(0,i.useState)(),t=(0,r.Z)(n,2),c=t[0],o=t[1],s=Math.random().toString(36).substring(2),u={};return(0,i.useEffect)((function(){var n=document.getElementById(s);if(n){var t=l.S1(n);t.setOption((0,a.Z)((0,a.Z)({},u),e.option)),c||o(t)}}),[e.option,e.data]),(0,k.jsx)(S.Z,{spinning:e.loading,children:(0,k.jsxs)("div",{className:"chart-container",children:[(0,k.jsx)("div",{id:s,style:(0,a.Z)((0,a.Z)({},w),e.style)}),e.isNoData?(0,k.jsx)("div",{className:"chart-nodata",children:(0,k.jsx)("div",{children:"\u6682\u65e0\u6570\u636e"})}):null]})})}},6857:function(e,n,t){t.d(n,{Z:function(){return o}});var a=t(29439),r=t(7517),i=t(10007),c=t(4519),l=t(2556);function o(e){var n,t=Math.random().toString(36).substring(2),o=(0,c.useState)(e.options||[]),s=(0,a.Z)(o,2),u=s[0],d=s[1],f=(0,c.useState)(e.value||""),m=(0,a.Z)(f,2),p=m[0],h=m[1];(0,c.useEffect)((function(){var n=e.isOpenSearchMatch?(e.options||[]).filter((function(e){return-1!==e.indexOf(p)})):e.options||[];d(n)}),[e.options]),(0,c.useEffect)((function(){h(e.value||"")}),[e.value]);var Z=function(n){h(n),e.onChange&&e.onChange(n)},x=function(e){var n=p,t=e.indexOf(p);if(-1===t)return(0,l.jsx)("span",{children:e});var a=e.substring(0,t),r=e.substring(t+p.length);return(0,l.jsxs)("span",{children:[a,(0,l.jsx)("span",{className:"highlight",children:n}),r]})},v=function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return function(){for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];clearTimeout(n),n=setTimeout((function(){e&&e.apply(null,[].concat(r))}),t)}}(e.onScrollButtom);return(0,l.jsxs)("div",{className:"select-down-modern",children:[e.labelName?(0,l.jsx)("label",{htmlFor:t,className:"pb4 mb0 fs12 d-b",children:e.labelName}):null,(0,l.jsxs)("div",{className:"p-r d-f ac",style:{width:e.width||"100%"},children:[(0,l.jsx)(i.Z,{style:{width:"100%"},disabled:e.disabled,id:t,placeholder:e.placeholder||"",maxLength:e.maxLength||200,onChange:function(e){return Z(e.target.value)},onKeyPress:function(t){13===t.nativeEvent.keyCode&&(n.blur&&n.blur(),e.onSearch&&e.onSearch(t.currentTarget.value))},value:p,ref:function(e){return n=e}}),(0,l.jsx)(r.Z,{className:"p-a r0 mr8"})]}),u.length?(0,l.jsxs)("ul",{className:"select-option shadow",onScroll:function(n){n.stopPropagation();var t=n.currentTarget,a=t.scrollTop,r=t.clientHeight;t.scrollHeight-r-a<20&&e.onScrollButtom&&v()},style:{maxHeight:"".concat(e.maxHeight,"px")},children:[e.loading?(0,l.jsx)("div",{className:"p-s z9 ta-r",style:{right:"".concat(0,"px"),top:"".concat(0,"px")},children:(0,l.jsx)("div",{className:"d-il p-a",style:{right:"".concat(8,"px"),top:"".concat(0,"px")}})}):null,u.map((function(n,t){return(0,l.jsx)("li",{className:"ellip1",onMouseDown:function(){return function(n){Z(n),e.onClick&&e.onClick(n)}(n)},children:x(n)},t)}))]}):null]})}},76877:function(e,n,t){t.d(n,{Z:function(){return C}});var a=t(93433),r=t(29439),i=t(1413),c=t(45987),l=t(4519),o=t(35492),s=t(20011),u=t(79551),d=t(28532),f=t(12513),m=t(80211),p=t(10089),h=t(2704),Z=t(25738),x=t(80995),v=t.p+"static/media/emptyBg.15fdf5f39309784ac66e.png",_=t(24520),j=t.n(_),g=t(74308),y=t(2556),b=["onResize","width"],S=t(17972),k=function(){return(0,y.jsxs)(o.Z,{justify:"center",align:"middle",style:{height:360,flexDirection:"column"},children:[(0,y.jsx)("img",{src:v,style:{width:266},alt:""}),(0,y.jsx)("div",{children:"\u6682\u65e0\u6570\u636e"})]})},w=function(e){var n=e.onResize,t=e.width,a=(0,c.Z)(e,b);return t?(0,y.jsx)(g.Resizable,{width:t,height:0,handle:(0,y.jsx)("span",{className:"react-resizable-handle",onClick:function(e){e.stopPropagation()}}),onResize:n,draggableOpts:{enableUserSelectHack:!1},children:(0,y.jsx)("th",(0,i.Z)((0,i.Z)({},a),{},{style:(0,i.Z)((0,i.Z)({},null===a||void 0===a?void 0:a.style),{},{userSelect:"none"})}))}):(0,y.jsx)("th",(0,i.Z)({},a))},C=function(e){var n=(0,l.useState)(!1),t=(0,r.Z)(n,2),c=t[0],v=t[1],_=(0,l.useState)({header:[],data:[]}),g=(0,r.Z)(_,2),b=g[0],C=g[1],N=(0,l.useState)([]),O=(0,r.Z)(N,2),E=O[0],P=O[1],I=(0,l.useState)(e.columns),T=(0,r.Z)(I,2),M=T[0],D=T[1],R=function(n){return function(t,r){var c=r.size;if(!(c.width<100)){var l=(0,a.Z)(M);l[n]=(0,i.Z)((0,i.Z)({},l[n]),{},{width:c.width});var o=l.reduce((function(e,n){return e+n.width||100}),0)+200;localStorage.setItem(e.tableKey||"",JSON.stringify(l)),H((0,i.Z)((0,i.Z)({},z),{},{x:o})),D(l)}}},F=M.map((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},{width:e.width||200,onHeaderCell:function(e){return{width:e.width,onResize:R(n)}}})})),L=(0,l.useState)(e.scroll),V=(0,r.Z)(L,2),z=V[0],H=V[1];(0,l.useEffect)((function(){D(e.columns)}),[e.columns]),(0,l.useEffect)((function(){H(e.scroll)}),[e.scroll]),(0,l.useEffect)((function(){if(e.dataSource){var n=e.columns.filter((function(e){return~E.indexOf(e.dataIndex)}));A(n,e.dataSource)}}),[e.dataSource,e.columns]);var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=e.map((function(e){return e.dataIndex})).filter((function(e){return"handle"!==e})),a=e.map((function(e){return e.title})).filter((function(e){return"\u64cd\u4f5c"!==e})),r=[];n.forEach((function(e){var n={};t.map((function(t){var a=e[t];n[t]=a||""})),r.push(n)})),C({header:a,data:r})},B=function(){var e=b.header,n=b.data,t="";return e.length&&n.length?(t="|"+e.join("|")+"|\n",n.forEach((function(e){var n=Object.values(e).map((function(e){return""===e?" ":e}));t=t+"|"+n.join("|")+"|\n"}))):t="",t},K=function(){var e=b.header,n=b.data,t="";return e.length&&n.length?(t=e.join("\t")+"\n",n.forEach((function(e){var n=Object.values(e).map((function(e){return""===e?" ":e}));t=t+n.join("\t")+"\n"}))):t="",t};return(0,y.jsxs)(s.Z,{className:"tablebox",direction:"vertical",size:"middle",children:[(0,y.jsxs)(u.Z,{width:1e3,maskClosable:!1,centered:!0,bodyStyle:{maxHeight:500,overflow:"auto"},visible:c,title:"\u5bfc\u51fa\u6570\u636e",onCancel:function(){v(!1)},footer:null,children:[(0,y.jsxs)("div",{style:{position:"relative"},children:[(0,y.jsxs)("div",{className:"mb16",children:[(0,y.jsx)("span",{className:"pr8",children:"\u9009\u62e9\u9700\u8981\u5bfc\u51fa\u7684\u5217\uff1a"}),(0,y.jsx)(d.Z.Group,{options:e.columns.map((function(e){return{label:e.title,value:e.dataIndex}})).filter((function(e){return"handle"!==e.value})),defaultValue:[],value:E,onChange:function(n){P(n);var t=e.columns.filter((function(e){return~n.indexOf(e.dataIndex)}));A(t,e.dataSource)}})]}),(0,y.jsxs)("div",{style:{position:"absolute",right:0,bottom:0},children:[(0,y.jsx)(f.Z,{size:"small",type:"link",onClick:function(){P(e.columns.map((function(e){return e.dataIndex})).filter((function(e){return"handle"!==e}))),A(e.columns,e.dataSource)},children:"\u5168\u9009"}),(0,y.jsx)(f.Z,{size:"small",type:"link",onClick:function(){P([]),A([],e.dataSource)},children:"\u53cd\u9009"})]})]}),(0,y.jsxs)(m.Z,{children:[(0,y.jsx)(m.Z.TabPane,{tab:"Wiki\u683c\u5f0f",children:(0,y.jsx)(S,{text:B(),onCopy:function(){return p.ZP.success("\u5df2\u590d\u5236\u5230\u7c98\u8d34\u677f")},children:(0,y.jsx)("pre",{style:{cursor:"pointer",minHeight:100},children:(0,y.jsx)("code",{children:B()})})})},"jira"),(0,y.jsx)(m.Z.TabPane,{tab:"Text\u683c\u5f0f",children:(0,y.jsx)(S,{text:K(),onCopy:function(){return p.ZP.success("\u5df2\u590d\u5236\u5230\u7c98\u8d34\u677f")},children:(0,y.jsx)("pre",{style:{cursor:"pointer",minHeight:100},children:(0,y.jsx)("code",{children:K()})})})},"test"),(0,y.jsx)(m.Z.TabPane,{tab:"Excel\u683c\u5f0f",children:(0,y.jsx)(o.Z,{justify:"center",align:"middle",style:{minHeight:100},children:(0,y.jsx)(h.Z,{children:(0,y.jsx)(f.Z,{type:"primary",onClick:function(){var e={fileName:"result"};e.datas=[{sheetData:b.data,sheetName:"sheet",sheetHeader:b.header}],new(j())(e).saveExcel()},children:"\u5bfc\u51faExcel"})})})},"excel")]})]}),e.titleNode||e.buttonNode||!e.cancelExportData?(0,y.jsxs)(o.Z,{justify:"space-between",align:"middle",children:[(0,y.jsx)(h.Z,{children:(0,y.jsx)(s.Z,{align:"center",children:e.titleNode})}),(0,y.jsx)(h.Z,{children:(0,y.jsxs)(s.Z,{align:"center",children:[e.buttonNode,e.cancelExportData?null:(0,y.jsx)(f.Z,{style:{marginLeft:6},onClick:function(){return v(!0)},children:"\u5bfc\u51fa\u6570\u636e"})]})})]}):null,(0,y.jsx)(Z.ZP,{renderEmpty:k,children:(0,y.jsx)(x.Z,{size:e.size||"middle",rowKey:e.rowKey?e.rowKey:"id",dataSource:e.dataSource,components:{header:{cell:w}},columns:F,pagination:!1!==e.pagination&&(0,i.Z)({},e.pagination),scroll:z,loading:e.loading,onChange:e.onChange,rowSelection:e.rowSelection})})]})}},49692:function(e,n,t){t.r(n),t.d(n,{default:function(){return se}});var a=t(93433),r=t(4942),i=t(1413),c=t(29439),l=t(4519),o=t(36737),s=t(20011),u=t(42496),d=t(34519),f=t(79551),m=t(10089),p=t(25211),h=t(1449),Z=t(93849),x=t(35492),v=t(2704),_=t(12513),j=t(86457),g=t(82085),y=t(37167),b=t(64252),S=t(2556),k=b.Z.Title,w=function(e){var n={position:"sticky",top:0};return(0,S.jsxs)(x.Z,{className:"title-header",justify:"space-between",align:"middle",style:e.noBorderBottom?(0,i.Z)({borderBottom:"none"},n):n,children:[(0,S.jsxs)("div",{children:[(0,S.jsx)(k,{className:"d-il mr12",level:5,style:{marginBottom:10},children:e.title}),(0,S.jsx)("div",{className:"d-il",children:e.breadcrumbs})]}),(0,S.jsx)(v.Z,{children:(0,S.jsx)(s.Z,{children:e.children?e.children:null})})]})},C=t(76877),N=t(43077),O=t.n(N),E=t(33405),P=t(17669),I=t(33531),T=t(56713),M=t(20558),D=t(8718),R=t(48633),F=t(85351),L=t(16548),V=t(8230),z=function(e){var n=V.Z.useForm(),t=(0,c.Z)(n,1)[0],a=(0,l.useState)(),r=(0,c.Z)(a,2)[1];l.useCallback((function(){return r({})}),[]);(0,l.useEffect)((function(){e.formData&&t.setFieldsValue(e.formData)}),[e]);var i=(0,l.useState)({currentChange:{},allValues:{}}),o=(0,c.Z)(i,2),s=o[0],u=o[1];return(0,S.jsx)(f.Z,{destroyOnClose:!0,maskClosable:!1,width:e.width||680,visible:e.visible,title:e.title,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onCancel:function(){t.resetFields(),e.onCancel()},onOk:function(){console.log(t.getFieldsValue()),t.validateFields().then((function(n){e.onCreate(n,t)})).catch((function(e){}))},children:(0,S.jsx)(Z.Z,{spinning:e.loading,children:(0,S.jsx)(V.Z,{onValuesChange:function(e,n){u({currentChange:e,allValues:n})},labelCol:{span:5},wrapperCol:{span:19},form:t,layout:"horizontal",name:"form_in_modal",children:e.children&&"[object Function]"===Object.prototype.toString.call(e.children)?e.children(t,s):e.children})})})},H=t(30506),A=t(74165),B=t(15861),K=t(47474),U=t(10007),q=t(28501),J=t(74030),W=K.Z.Option,G=function(e){var n=V.Z.useForm(),t=(0,c.Z)(n,1)[0],r=(0,l.useState)(!1),o=(0,c.Z)(r,2),s=o[0],u=o[1],d=(0,l.useState)([]),f=(0,c.Z)(d,2),m=(f[0],f[1],function(e){return(e||[]).map((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},{indexKey:n})}))}),p=(0,l.useState)(m(e.params)),h=(0,c.Z)(p,2),Z=h[0],j=h[1],g=(0,l.useState)(m(e.params)),y=(0,c.Z)(g,2),b=y[0],k=y[1],w=(0,l.useState)(new Map),C=(0,c.Z)(w,2),N=C[0],O=C[1];(0,l.useEffect)((function(){if(e.values){var n=e.values.length?e.values:[{key:void 0,value:void 0}];t.setFieldsValue({group:n});for(var r=(0,a.Z)(b),i=0;i<r.length;i++)for(var c=0;c<n.length;c++){void 0!==n[c]&&n[c].key===r[i].name&&(r[i].used=!0)}k(r)}}),[e.values]),(0,l.useEffect)((function(){if(e.params&&e.params.length){var n=m(e.params);j(n);for(var t=N,a=0;a<n.length;a++){var r=n[a];t.set(r.name,r)}O(t)}}),[e.params]);var E=function(){var n=(0,B.Z)((0,A.Z)().mark((function n(t){var a,r;return(0,A.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log(t),a=t.group.filter((function(e){return!!e.key})),r=a.map((function(e){return{key:e.key,value:e.value}})),e.onChange(r);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),I=function(e){var n=t.getFieldValue(["group",e,"key"]);if(!n)return(0,S.jsx)(U.Z,{style:{width:"65%"},onPressEnter:function(){return T()}});var a=N.get(n);if("input"===(null===a||void 0===a?void 0:a.type))return(0,S.jsx)(U.Z,{style:{width:"65%"},defaultValue:a.defalutValue,placeholder:a.placeHolder,onPressEnter:function(){return T()}});if("select"===(null===a||void 0===a?void 0:a.type)){var r=(null===a||void 0===a?void 0:a.option)||[];return(0,S.jsx)(K.Z,{style:{width:"65%"},dropdownMatchSelectWidth:500,showSearch:!0,mode:"label"===n?"multiple":void 0,optionFilterProp:"label",options:r.map((function(e){return{label:e.label,value:e.value}}))})}},T=function(){t.validateFields()};return(0,S.jsxs)(V.Z,{className:"cmdb-mixsearch bg-title",form:t,onFinish:E,initialValues:{group:[{key:void 0,value:void 0}]},children:[(0,S.jsxs)(x.Z,{className:"cmdb-mixsearch-content",gutter:16,style:(0,i.Z)({marginLeft:0,marginRight:0},s?{height:70}:{height:"auto"}),children:[(0,S.jsx)(V.Z.List,{name:"group",children:function(e,n){var r=n.add,i=n.remove;return(0,S.jsxs)(S.Fragment,{children:[e.map((function(e,n){return(0,S.jsx)(v.Z,{span:8,children:(0,S.jsxs)(x.Z,{align:"middle",gutter:8,children:[(0,S.jsx)(v.Z,{className:"cmdb-mixsearch-group",children:(0,S.jsxs)(U.Z.Group,{compact:!0,children:[(0,S.jsx)(V.Z.Item,{noStyle:!0,name:[e.name,"key"],rules:[{required:!1,message:"\u8bf7\u9009\u62e9key"}],children:(0,S.jsx)(K.Z,{style:{width:"35%"},placeholder:"\u8bf7\u9009\u62e9",onChange:function(e){!function(e){for(var n=(0,a.Z)(b),r=(t.getFieldValue("group")||[]).filter((function(e){return!!e})).map((function(e){return e.key})),i=0;i<n.length;i++){var c=n[i];c.name===e?n[i].used=!0:r.includes(c.name)||(n[i].used=!1)}k(n)}(e)},children:b.map((function(e,n){return(0,S.jsx)(W,{style:{display:e.used?"none":"inherit"},value:e.name,children:e.title||e.name},"mixSearch_".concat(e.name,"_").concat(n))}))})}),(0,S.jsx)(V.Z.Item,{noStyle:!0,shouldUpdate:!0,name:[e.name,"value"],rules:[{required:!1,message:"\u8bf7\u586b\u5199value"}],children:I(n)})]})}),(0,S.jsx)(v.Z,{className:"cmdb-mixsearch-delete",onClick:function(){var e=(t.getFieldValue("group")||[]).map((function(e){return e?e.key:void 0})),r=(0,a.Z)(b);if(e[n])for(var c=0;c<r.length;c++){r[c].name===e[n]&&(r[c].used=!1)}k(r),i(n)},children:(0,S.jsx)(q.Z,{})})]})},"mixSearch_".concat(e.key,"_").concat(n))})),Z.length!==e.length&&(0,S.jsx)(v.Z,{className:"cmdb-mixsearch-add d-il",onClick:function(){r()},children:(0,S.jsx)(M.Z,{})})]})}}),(0,S.jsx)(v.Z,{flex:1,children:(0,S.jsx)(x.Z,{justify:"end",children:(0,S.jsx)(_.Z,{type:"primary",htmlType:"submit",children:"\u67e5\u8be2"})})})]}),(0,S.jsx)(x.Z,{className:"cmdb-mixsearch-collapsed",children:(0,S.jsx)(x.Z,{onClick:function(){u(!s)},justify:"center",align:"middle",children:s?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(v.Z,{children:"\u5c55\u5f00"}),(0,S.jsx)(v.Z,{children:(0,S.jsx)(P.Z,{})})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(v.Z,{children:"\u6536\u8d77"}),(0,S.jsx)(v.Z,{children:(0,S.jsx)(J.Z,{})})]})})})]})},Q=t(45987),Y=t(97709),X=t(73031),$=t(68553),ee=t(75262),ne=t(65505),te=t(74860),ae=t(6857),re=(t(90746),t(32085)),ie=["key","name"];function ce(e){return e.reduce((function(e,n){return e+(n||"").split("").reduce((function(e,n){return e+n.charCodeAt(0)}),0)}),0)}function le(e){var n=(0,l.useState)(0),t=(0,c.Z)(n,2),s=t[0],u=t[1],d=(0,l.useState)(e.config),f=(0,c.Z)(d,2),m=f[0],p=f[1],h=(0,l.useRef)(e.config),Z=function(e){h.current=e,p(e)},x=(0,l.useState)(e.configGroup),v=(0,c.Z)(x,2),j=v[0],g=v[1],y=(0,l.useRef)(e.configGroup),b=function(e){y.current=e,g(e)},k=function(n,t){var c=function(n,t){return t.filter((function(e){return e.dep.includes(n)})).map((function(n){var t=ce(n.dep.map((function(n){var t;return null===(t=e.form)||void 0===t?void 0:t.getFieldValue(n)})).filter((function(e){return!(void 0===e||null===e)})));return{effect:n.effect,option:n.effectOption[t]||[]}}))}(n,t);c.forEach((function(n){var t;null===(t=e.form)||void 0===t||t.setFieldsValue((0,r.Z)({},n.effect,void 0)),function(e,n){var t=h.current?(0,a.Z)(h.current):[];if(t)for(var r=0;r<t.length;r++){var c=t[r];c.name===e&&(t[r]=(0,i.Z)((0,i.Z)({},c),n))}Z(t)}(n.effect,{options:n.option}),function(e,n){for(var t=y.current?(0,a.Z)(y.current):[],r=0;r<t.length;r++){for(var c=(0,a.Z)(t[r].config),l=0;l<c.length;l++){var o=c[l];o.name===e&&(c[l]=(0,i.Z)((0,i.Z)({},o),n))}t[r]=(0,i.Z)((0,i.Z)({},t[r]),{},{config:c})}b(t)}(n.effect,{options:n.option})}))};(0,l.useEffect)((function(){if(e.formChangeRes&&e.linkageConfig){var n=e.formChangeRes.currentChange;k(Object.keys(n)[0],e.linkageConfig)}}),[e.formChangeRes]),(0,l.useEffect)((function(){var n;Z(e.config),b(e.configGroup);var t=(null===(n=e.form)||void 0===n?void 0:n.getFieldsValue())||{};Object.entries(t).forEach((function(n){var t=(0,c.Z)(n,2),a=t[0];void 0!==t[1]&&k(a,e.linkageConfig||[])}))}),[e.configGroup,e.config]);var w=function(){u(s+1)},C=function(e,n){return(0,S.jsx)(V.Z.Item,(0,i.Z)((0,i.Z)({label:e.label,name:e.name,rules:e.rules,initialValue:e.defaultValue,extra:(0,S.jsxs)(S.Fragment,{children:[e.data.tips?(0,S.jsx)(o.Z,{className:"mr8",placement:"bottom",title:(0,S.jsx)("span",{dangerouslySetInnerHTML:{__html:e.data.tips}}),children:(0,S.jsxs)("div",{className:"cp d-il",children:[(0,S.jsx)(T.Z,{style:{color:"#1672fa"}}),(0,S.jsx)("span",{className:"pl4 c-theme",children:"\u8be6\u60c5"})]})}):null,e.description?(0,S.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}):null]})},n),{},{children:(0,S.jsx)(U.Z,{disabled:e.disable,placeholder:e.placeHolder||"\u8bf7\u9009\u62e9".concat(e.label)})}),"dynamicForm_".concat(e.name))},N=function(n,t){var a=(n.options||[]).map((function(e){return e.label}));return(0,S.jsx)(V.Z.Item,(0,i.Z)((0,i.Z)({label:n.label,name:n.name,rules:n.rules,initialValue:n.defaultValue,extra:(0,S.jsxs)(S.Fragment,{children:[n.data.tips?(0,S.jsx)(o.Z,{className:"mr8",placement:"bottom",title:(0,S.jsx)("span",{dangerouslySetInnerHTML:{__html:n.data.tips}}),children:(0,S.jsxs)("div",{className:"cp d-il",children:[(0,S.jsx)(T.Z,{style:{color:"#1672fa"}}),(0,S.jsx)("span",{className:"pl4 c-theme",children:"\u8be6\u60c5"})]})}):null,n.description?(0,S.jsx)("span",{dangerouslySetInnerHTML:{__html:n.description}}):null]})},t),{},{children:(0,S.jsx)(ae.Z,{onClick:function(t){n.data.retry_info&&e.onRetryInfoChange&&e.onRetryInfoChange(t)},isOpenSearchMatch:!0,disabled:n.disable,placeholder:"\u8bf7\u9009\u62e9".concat(n.label),options:a})}),"dynamicForm_".concat(n.name))},E=function(e,n){return(0,S.jsx)(V.Z.Item,(0,i.Z)((0,i.Z)({label:e.label,name:e.name,rules:e.rules,initialValue:e.defaultValue,extra:(0,S.jsxs)(S.Fragment,{children:[e.data.tips?(0,S.jsx)(o.Z,{className:"mr8",placement:"bottom",title:(0,S.jsx)("span",{dangerouslySetInnerHTML:{__html:e.data.tips}}),children:(0,S.jsxs)("div",{className:"cp d-il",children:[(0,S.jsx)(T.Z,{style:{color:"#1672fa"}}),(0,S.jsx)("span",{className:"pl4 c-theme",children:"\u8be6\u60c5"})]})}):null,e.description?(0,S.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}):null]})},n),{},{children:(0,S.jsx)(U.Z.TextArea,{autoSize:{minRows:4},disabled:e.disable,placeholder:e.placeHolder||"\u8bf7\u9009\u62e9".concat(e.label)})}),"dynamicForm_".concat(e.name))},P=function(n,t){var a=n.options||[];return(0,S.jsx)(V.Z.Item,(0,i.Z)((0,i.Z)({label:n.label,name:n.name,rules:n.rules,initialValue:n.defaultValue,extra:(0,S.jsxs)(S.Fragment,{children:[n.data.tips?(0,S.jsx)(o.Z,{className:"mr8",placement:"bottom",title:(0,S.jsx)("span",{dangerouslySetInnerHTML:{__html:n.data.tips}}),children:(0,S.jsxs)("div",{className:"cp d-il",children:[(0,S.jsx)(T.Z,{style:{color:"#1672fa"}}),(0,S.jsx)("span",{className:"pl4 c-theme",children:"\u8be6\u60c5"})]})}):null,n.description?(0,S.jsx)("span",{className:"pr4",dangerouslySetInnerHTML:{__html:n.description}}):null,n.data.isRefresh?(0,S.jsxs)("div",{className:"cp d-il",onClick:function(){e.onRetryInfoChange&&e.onRetryInfoChange()},children:[(0,S.jsx)(ne.Z,{style:{color:"#1672fa"}}),(0,S.jsx)("span",{className:"pl4 c-theme",children:"\u5237\u65b0\u5217\u8868"})]}):null]})},t),{},{children:(0,S.jsx)(ee.Z,{style:{width:"100%"},mode:n.multiple?"multiple":void 0,onChange:function(t){n.data.retry_info&&e.onRetryInfoChange&&e.onRetryInfoChange(t)},showSearch:!0,disabled:n.disable,optionFilterProp:"label",placeholder:n.placeHolder||"\u8bf7\u9009\u62e9".concat(n.label),options:a})}),"dynamicForm_".concat(n.name))},I=function(e,n){var t=e.options||[];return(0,S.jsx)(V.Z.Item,(0,i.Z)((0,i.Z)({label:e.label,name:e.name,rules:e.rules,initialValue:e.defaultValue},n),{},{children:(0,S.jsx)(Y.ZP.Group,{options:t})}),"dynamicForm_".concat(e.name))},D=function(e,n){return(0,S.jsx)(V.Z.Item,(0,i.Z)((0,i.Z)({label:e.label,name:e.name,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u65f6\u95f4"}]},n),{},{children:(0,S.jsx)(X.Z,{style:{width:"100%"},locale:re.Z,showTime:!!e.data.showTime,disabledDate:function(e){return e&&e>O()().endOf("day")}})}),"dynamicForm_".concat(e.name))},R=function(e,n){return(0,S.jsx)(V.Z.Item,(0,i.Z)((0,i.Z)({label:e.label,name:e.name,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u65f6\u95f4\u8303\u56f4"}]},n),{},{children:(0,S.jsx)(X.Z,{style:{width:"100%"},locale:re.Z,showTime:!!e.data.showTime,disabledDate:function(e){return e&&e>O()().endOf("day")}})}),"dynamicForm_".concat(e.name))},F=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case"input":case"match-input":return C(e,n);case"input-select":return N(e,n);case"textArea":return E(e,n);case"select":return P(e,n);case"datePicker":return D(e,n);case"rangePicker":return R(e,n);case"radio":return I(e,n);default:return null}},L=function(e){return(e||[]).map((function(e){return e.list&&e.list.length?(0,S.jsx)(V.Z.List,{name:e.name,children:function(n,t){var a=t.add,r=t.remove;return(0,S.jsxs)(S.Fragment,{children:[n.map((function(n){var t=n.key,a=n.name,c=(0,Q.Z)(n,ie);return(0,S.jsxs)("div",{className:"bor b-side pt8 plr16 mb8 d-f",style:{alignItems:"start",minWidth:1600},children:[e.list&&e.list.map((function(e){return F(e,(0,i.Z)((0,i.Z)({},c),{},{name:[a,e.name],labelAlign:"left",labelCol:24,style:{flexDirection:"column",flex:1,marginBottom:8}}))})),(0,S.jsx)(V.Z.Item,{children:(0,S.jsx)(_.Z,{danger:!0,onClick:function(){return r(a)},block:!0,icon:(0,S.jsx)(te.Z,{}),style:{width:120},children:"\u5220\u9664\u8be5\u9879"})})]},t)})),(0,S.jsx)(V.Z.Item,{noStyle:!0,className:"w100",label:"",children:(0,S.jsx)(_.Z,{type:"dashed",className:"w100",onClick:function(){return a()},block:!0,icon:(0,S.jsx)(M.Z,{}),children:"\u589e\u52a0\u4e00\u9879"})})]})}},"dynamicForm_".concat(e.name)):(0,S.jsx)("div",{style:{width:680},children:F(e)})}))};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(V.Z.Item,{name:e.primaryKey||"id",noStyle:!0,hidden:!0,children:(0,S.jsx)(U.Z,{})},"dynamicForm_id"),j&&j.length?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)($.Z,{current:s,children:(j||[]).map((function(e,n){return(0,S.jsx)($.Z.Step,{title:e.group},n)}))}),(0,S.jsx)("div",{className:"pt32",children:(j||[]).map((function(e,n){return(0,S.jsx)("div",{className:[s===n?"p-r z9":"p-a z-99 v-h l-10000"].join(" "),children:L(e.config)},n)}))}),(0,S.jsxs)("div",{className:"ta-c pt32",children:[s>0&&(0,S.jsx)(_.Z,{onClick:function(){u(s-1)},children:"\u4e0a\u4e00\u6b65"}),s<(j||[]).length-1&&(0,S.jsx)(_.Z,{type:"primary",className:"ml16",onClick:function(){if(e.form){var n=j[s].config.map((function(e){return e.name}));e.form.validateFields(n).then((function(){w()})).catch((function(e){console.log(e)}))}else w()},children:"\u4e0b\u4e00\u6b65"}),(0,S.jsx)("div",{children:s===(j||[]).length-1&&(0,S.jsx)("div",{className:"pt8 c-hint-b",children:"\u70b9\u51fb\u786e\u5b9a\u5b8c\u6210\u63d0\u4ea4"})})]})]}):(0,S.jsx)("div",{style:{width:680},children:L(m||[])})]})}var oe=t(4269);function se(e){var n=(0,F.s0)(),t=(0,F.TH)(),b=(0,l.useState)([]),k=(0,c.Z)(b,2),N=k[0],V=k[1],A=(0,l.useState)(!0),B=(0,c.Z)(A,2),K=B[0],U=B[1],q=(0,l.useState)(!1),J=(0,c.Z)(q,2),W=J[0],Q=J[1],Y=(0,l.useState)("true"===(0,L.jS)("isVisableAdd")||!1),X=(0,c.Z)(Y,2),$=X[0],ee=X[1],ne=(0,l.useState)(!1),te=(0,c.Z)(ne,2),ae=te[0],re=te[1],ie=(0,l.useState)(!1),se=(0,c.Z)(ie,2),ue=se[0],de=se[1],fe=(0,l.useState)(!1),me=(0,c.Z)(fe,2),pe=me[0],he=me[1],Ze=(0,l.useState)(!1),xe=(0,c.Z)(Ze,2),ve=xe[0],_e=xe[1],je=(0,l.useState)([]),ge=(0,c.Z)(je,2),ye=ge[0],be=ge[1],Se={current:1,pageSize:20,total:0,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:[20,50,100,500],showTotal:function(e){return"\u5171".concat(e,"\u6761")}},ke=(0,l.useState)(Se),we=(0,c.Z)(ke,2),Ce=we[0],Ne=we[1],Oe=(0,l.useState)([]),Ee=(0,c.Z)(Oe,2),Pe=Ee[0],Ie=Ee[1],Te=(0,l.useState)([]),Me=(0,c.Z)(Te,2),De=Me[0],Re=Me[1],Fe=(0,l.useState)([]),Le=(0,c.Z)(Fe,2),Ve=Le[0],ze=Le[1],He=(0,l.useRef)(Ve),Ae=function(e){He.current=e,ze(e)},Be=(0,l.useState)([]),Ke=(0,c.Z)(Be,2),Ue=Ke[0],qe=Ke[1],Je=(0,l.useState)([]),We=(0,c.Z)(Je,2),Ge=We[0],Qe=We[1],Ye=(0,l.useState)([]),Xe=(0,c.Z)(Ye,2),$e=Xe[0],en=Xe[1],nn=(0,l.useState)([]),tn=(0,c.Z)(nn,2),an=tn[0],rn=tn[1],cn={};try{cn=JSON.parse((0,L.jS)("formData")||"{}")}catch(ma){}var ln=(0,l.useState)(cn),on=(0,c.Z)(ln,2),sn=on[0],un=on[1],dn=(0,l.useState)({}),fn=(0,c.Z)(dn,2),mn=fn[0],pn=fn[1],hn=(0,l.useState)({}),Zn=(0,c.Z)(hn,2),xn=Zn[0],vn=Zn[1],_n=(0,l.useRef)(xn),jn=(0,l.useState)([]),gn=(0,c.Z)(jn,2),yn=gn[0],bn=gn[1],Sn=(0,l.useState)(1e3),kn=(0,c.Z)(Sn,2),wn=kn[0],Cn=kn[1],Nn=(0,l.useState)([]),On=(0,c.Z)(Nn,2),En=On[0],Pn=On[1],In=(0,l.useState)({}),Tn=(0,c.Z)(In,2),Mn=Tn[0],Dn=Tn[1],Rn=(0,l.useState)(),Fn=(0,c.Z)(Rn,2),Ln=Fn[0],Vn=Fn[1],zn=(0,l.useState)(),Hn=(0,c.Z)(zn,2),An=Hn[0],Bn=Hn[1],Kn=(0,l.useRef)(An),Un=(0,l.useState)(!1),qn=(0,c.Z)(Un,2),Jn=qn[0],Wn=qn[1],Gn=(0,l.useState)(!1),Qn=(0,c.Z)(Gn,2),Yn=Qn[0],Xn=Qn[1],$n=(0,l.useState)([]),et=(0,c.Z)($n,2),nt=et[0],tt=et[1],at=(0,l.useState)([]),rt=(0,c.Z)(at,2),it=rt[0],ct=rt[1],lt=(0,l.useState)(),ot=(0,c.Z)(lt,2),st=ot[0],ut=ot[1],dt=(0,l.useState)(""),ft=(0,c.Z)(dt,2),mt=ft[0],pt=ft[1],ht=(0,l.useState)(""),Zt=(0,c.Z)(ht,2),xt=Zt[0],vt=Zt[1],_t=(0,l.useState)(),jt=(0,c.Z)(_t,2),gt=jt[0],yt=jt[1],bt=(0,l.useState)(),St=(0,c.Z)(bt,2),kt=St[0],wt=St[1],Ct=(0,l.useState)([]),Nt=(0,c.Z)(Ct,2),Ot=Nt[0],Et=Nt[1],Pt=(0,l.useState)([]),It=(0,c.Z)(Pt,2),Tt=It[0],Mt=It[1],Dt=(0,l.useState)(!0),Rt=(0,c.Z)(Dt,2),Ft=Rt[0],Lt=Rt[1],Vt=(0,l.useRef)(Ft),zt=(0,l.useState)(!1),Ht=(0,c.Z)(zt,2),At=Ht[0],Bt=Ht[1],Kt=(0,l.useRef)(At),Ut=(0,l.useState)(!1),qt=(0,c.Z)(Ut,2),Jt=qt[0],Wt=qt[1],Gt=(0,l.useState)(20),Qt=(0,c.Z)(Gt,2),Yt=Qt[0],Xt=Qt[1],$t=(0,l.useState)(),ea=(0,c.Z)($t,2),na=ea[0],ta=ea[1],aa=(0,l.useState)(""),ra=(0,c.Z)(aa,2),ia=ra[0],ca=ra[1],la={pageConf:Se,params:[],paramsMap:Mn,sorter:void 0};(0,l.useEffect)((function(){}),[Yt]),(0,l.useEffect)((function(){ca((0,L.W9)())}),[]),(0,l.useEffect)((function(){e&&e.disable&&n("/404")}),[]);var oa=function e(n,t,a){return n.map((function(n,r){var c=n["ui-type"]||"input";"select2"===c&&(c="select");var l=n.label||t[n.name],o=(n.validators||[]).map((function(e){if("select"===c)return"DataRequired"===e.type?{required:!0,message:"\u8bf7\u9009\u62e9".concat(l)}:void 0;switch(e.type){case"DataRequired":return{required:!0,message:"\u8bf7\u8f93\u5165".concat(l)};case"Regexp":return{pattern:new RegExp("".concat(e.regex)),message:"\u8bf7\u6309\u6b63\u786e\u7684\u89c4\u5219\u8f93\u5165"};case"Length":return{min:e.min||0,max:e.max,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u957f\u5ea6"};default:return}})).filter((function(e){return!!e})),s=e(n.info||[],t,a);return{label:l,type:c,rules:o,list:s,name:n.name,disable:n.disable,description:n.description||a[n.name]||void 0,required:n.required,defaultValue:""===n.default?void 0:n.default,multiple:n["ui-type"]&&"select2"===n["ui-type"],options:(n.values||[]).map((function(e){return{label:e.value,value:e.id}})),data:(0,i.Z)({},n)}}))};(0,l.useEffect)((function(){var l=(0,L.jS)("targetId"),p=l?"/dimension_remote_table_modelview/".concat(l,"/api/"):null===e||void 0===e?void 0:e.url;Q(!0),(0,H.BQ)(p).then((function(l){var p=l.data,h=p.list_columns,Z=p.label_columns,x=p.filters,v=p.add_columns,_=p.edit_columns,j=p.permissions,g=p.description_columns,y=p.add_fieldsets,b=p.edit_fieldsets,k=p.help_url,w=p.order_columns,C=p.action,N=p.route_base,O=p.column_related,I=p.primary_key,T=p.label_title,M=p.cols_width,D=p.import_data,R=p.download_data,F=p.list_ui_type,V=p.list_ui_args,z=p.ops_link,A=p.enable_favorite,B=p.echart,K=p.page_size,U=p.list_title,q=(null===e||void 0===e?void 0:e.related)||j.includes("can_show")||j.includes("can_edit")||j.includes("can_delete"),J=localStorage.getItem("tablebox_".concat(t.pathname)),W=JSON.parse(J||"[]").reduce((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.dataIndex,n.width))}),{}),G=Object.entries(O||{}).reduce((function(e,n){var t=(0,c.Z)(n,2),l=(t[0],t[1]);return[].concat((0,a.Z)(e),[{dep:l.src_columns,effect:l.des_columns.join(""),effectOption:l.related.reduce((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},ce(n.src_value),n.des_value.map((function(e){return{label:e,value:e}}))))}),{})}])}),[]),Y=h.map((function(e){return{title:Z[e]||e,dataIndex:e,key:e,sorter:w.includes(e)?function(n,t){return n[e]-t[e]}:void 0,render:function(n,t){var r;if(void 0===n||""===n)return"-";if(M[e]&&-1!==(null===(r=M[e].type)||void 0===r?void 0:r.indexOf("ellip")))return(0,S.jsx)(o.Z,{title:(0,S.jsx)("span",{className:"tips-content",dangerouslySetInnerHTML:{__html:n}}),placement:"topLeft",children:(0,S.jsx)("div",{className:M[e].type,dangerouslySetInnerHTML:{__html:n}})});if("[object Object]"===Object.prototype.toString.call(n)){var i=Object.entries(n).reduce((function(e,n){var t=(0,c.Z)(n,2),r=t[0],i=t[1];return[].concat((0,a.Z)(e),[{label:r,value:i}])}),[]);return i.length?(0,S.jsx)("div",{style:{overflow:"auto",maxHeight:100},children:i.map((function(e,n){return(0,S.jsxs)("div",{children:[Z[e.label]||e.label,":",e.value]},"table_itemvalue_".concat(n))}))}):"-"}return(0,S.jsx)("div",{style:{overflow:"auto",maxHeight:100},dangerouslySetInnerHTML:{__html:n}})},width:W[e]||M[e]&&M[e].width||100}})),X=Object.entries(C||{}).reduce((function(e,n){var t=(0,c.Z)(n,2),r=(t[0],t[1]);return[].concat((0,a.Z)(e),[(0,i.Z)({},r)])}),[]),$=X.filter((function(e){return!!e.multiple})),ee=X.filter((function(e){return!!e.single})),ne={title:"\u64cd\u4f5c",width:80,dataIndex:"handle",key:"handle",align:"right",fixed:"right",render:function(a,r){var c;return(0,S.jsx)(s.Z,{size:"middle",children:q?(0,S.jsx)(u.Z,{overlay:(0,S.jsxs)(d.Z,{children:[Kt.current&&Vt.current?(0,S.jsx)(d.Z.Item,{children:(0,S.jsx)("div",{className:"link",onClick:function(){f.Z.confirm({title:"\u6536\u85cf",icon:(0,S.jsx)(E.Z,{}),content:"\u786e\u5b9a\u6536\u85cf?",okText:"\u786e\u8ba4\u6536\u85cf",cancelText:"\u53d6\u6d88",onOk:function(){return new Promise((function(e,n){(0,H.gA)("".concat(N,"favorite/").concat(r[I])).then((function(n){e("")})).catch((function(e){n()}))})).then((function(e){m.ZP.success("\u6536\u85cf\u6210\u529f"),ua((0,i.Z)((0,i.Z)({},la),{},{pageConf:Ce,params:He.current,paramsMap:x}))})).catch((function(){m.ZP.error("\u6536\u85cf\u5931\u8d25")}))},onCancel:function(){}})},children:"\u6536\u85cf"})}):null,Kt.current&&!Vt.current?(0,S.jsx)(d.Z.Item,{children:(0,S.jsx)("div",{className:"link",onClick:function(){f.Z.confirm({title:"\u53d6\u6d88\u6536\u85cf",icon:(0,S.jsx)(E.Z,{}),content:"\u786e\u5b9a\u53d6\u6d88\u6536\u85cf?",okText:"\u786e\u8ba4\u53d6\u6d88\u6536\u85cf",cancelText:"\u53d6\u6d88",onOk:function(){return new Promise((function(e,n){(0,H.aJ)("".concat(N,"favorite/").concat(r[I])).then((function(n){e("")})).catch((function(e){n()}))})).then((function(e){m.ZP.success("\u64cd\u4f5c\u6210\u529f"),ua((0,i.Z)((0,i.Z)({},la),{},{pageConf:Ce,params:He.current,paramsMap:x}))})).catch((function(){m.ZP.error("\u64cd\u4f5c\u5931\u8d25")}))},onCancel:function(){}})},children:"\u53d6\u6d88\u6536\u85cf"})}):null,j.includes("can_show")?(0,S.jsx)(d.Z.Item,{children:(0,S.jsx)("div",{className:"link",onClick:function(){_e(!0),da(r[I])},children:"\u8be6\u60c5"})}):null,j.includes("can_edit")?(0,S.jsx)(d.Z.Item,{children:(0,S.jsx)("div",{className:"link",onClick:function(){de(!0),(0,H.BQ)(N,r[I]).then((function(e){var n=e.data,t=n.edit_columns,a=n.label_columns,i=n.description_columns,c=oa(t,a,i),l=b.map((function(e){var n=e.fields.map((function(e){return se[e]})).filter((function(e){return!!e}));return{group:e.group,expanded:e.expanded,config:oa(n,a,i)}}));Qe(c),rn(l),da(r[I])})).catch((function(){m.ZP.warn("\u7528\u6237\u6ca1\u6709\u4fee\u6539\u6743\u9650")}))},children:"\u4fee\u6539"})}):null,j.includes("can_delete")?(0,S.jsx)(d.Z.Item,{children:(0,S.jsx)("div",{className:"c-fail cp",onClick:function(){f.Z.confirm({title:"\u5220\u9664",icon:(0,S.jsx)(E.Z,{}),content:"\u786e\u5b9a\u5220\u9664?",okText:"\u786e\u8ba4\u5220\u9664",cancelText:"\u53d6\u6d88",okButtonProps:{danger:!0},onOk:function(){return new Promise((function(e,n){(0,H.aM)("".concat(N).concat(r[I])).then((function(n){e("")})).catch((function(e){n()}))})).then((function(e){m.ZP.success("\u5220\u9664\u6210\u529f"),ua((0,i.Z)((0,i.Z)({},la),{},{pageConf:Ce,params:He.current,paramsMap:x}))})).catch((function(){m.ZP.error("\u5220\u9664\u5931\u8d25")}))},onCancel:function(){}})},children:"\u5220\u9664"})}):null,null===e||void 0===e||null===(c=e.related)||void 0===c?void 0:c.map((function(e,a){return(0,S.jsx)(d.Z.Item,{children:(0,S.jsx)("div",{className:"link",onClick:function(){n("".concat(t.pathname,"/").concat(e.name,"?id=").concat(r[I]))},children:e.title})},"moreAction_".concat(a))})),!!ee.length&&ee.map((function(e,n){return(0,S.jsx)(d.Z.Item,{children:(0,S.jsx)("div",{className:"link",onClick:function(){f.Z.confirm({title:e.confirmation,icon:(0,S.jsx)(E.Z,{}),content:"",okText:"\u786e\u8ba4".concat(e.confirmation),cancelText:"\u53d6\u6d88",onOk:function(){return new Promise((function(n,t){(0,H.y5)("".concat(N,"action/").concat(e.name,"/").concat(r[I])).then((function(e){n(e)})).catch((function(e){t(e)}))})).then((function(e){m.ZP.success("\u64cd\u4f5c\u6210\u529f"),e.data.result.link&&window.open(e.data.result.link,"bank"),ua((0,i.Z)((0,i.Z)({},la),{},{pageConf:Ce,params:He.current,paramsMap:x}))})).catch((function(){m.ZP.error("\u64cd\u4f5c\u5931\u8d25")}))},onCancel:function(){}})},children:e.text})},"table_action_".concat(n))}))]}),children:(0,S.jsxs)("div",{className:"link",children:["\u66f4\u591a",(0,S.jsx)(P.Z,{})]})}):null})}},te=(0,a.Z)(Y);q&&te.push(ne);var ae=v.reduce((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.name,n))}),{});if(cn&&Object.keys(cn).length){var re=(Object.keys(cn)||[]).filter((function(e){return cn[e]&&ae[e]&&ae[e].retry_info})),ie=re.length;if(re.length){var le=cn;for(var oe in le){if(Object.prototype.hasOwnProperty.call(le,oe))void 0===le[oe]&&delete le[oe]}!function e(n){ie-=1,(0,H.y1)("".concat(N,"_info"),{exist_add_args:n}).then((function(n){var t=n.data,a=t.add_columns,c=t.label_columns,l=t.description_columns,o=t.add_fieldsets,s=a.reduce((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.name,n))}),{}),u=oa(a,c,l),d=o.map((function(e){var n=e.fields.map((function(e){return s[e]})).filter((function(e){return!!e}));return{group:e.group,expanded:e.expanded,config:oa(n,c,l)}})),f=a.filter((function(e){return""!==e.default})).map((function(e){return(0,r.Z)({},e.name,e.default)})).reduce((function(e,n){return(0,i.Z)((0,i.Z)({},e),n)}),{});if(un(f),qe(u),en(d),ie){var m=JSON.stringify(f);e(m)}})).catch((function(e){m.ZP.error("\u5b57\u6bb5\u5207\u6362\u9519\u8bef")})).finally((function(){Q(!1)}))}(JSON.stringify(le))}}var se=_.reduce((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.name,n))}),{});_.forEach((function(e){"list"===e["ui-type"]&&e.info.forEach((function(e){se[e.name]=e}))}));var ue=oa(v,Z,g),fe=y.map((function(e){var n=e.fields.map((function(e){return ae[e]})).filter((function(e){return!!e}));return{group:e.group,expanded:e.expanded,config:oa(n,Z,g)}})),me=Object.entries(x).reduce((function(e,n){var t=(0,c.Z)(n,2),r=t[0],i=t[1];return[].concat((0,a.Z)(e),[{name:r,type:i["ui-type"]||"input",title:Z[r],oprList:i.filter.map((function(e){return e.operator})),defalutValue:""===i.default?void 0:i.default,option:i.values?i.values.map((function(e){return{label:e.value,value:e.id}})):void 0}])}),[]),pe=Object.entries(x).reduce((function(e,n){var t=(0,c.Z)(n,2),r=t[0],i=t[1];return[].concat((0,a.Z)(e),[{key:r,value:i.default}])}),[]).filter((function(e){return e.value})),he=JSON.parse(localStorage.getItem("filter_".concat(t.pathname).concat(t.search))||"[]"),Ze=void 0;if((0,L.jS)("filter"))try{Ze=JSON.parse((0,L.jS)("filter")||"[]")}catch(ge){m.ZP.error("filter\u89e3\u6790\u5f02\u5e38")}var xe,ve=Ze||he;ve&&ve.length&&(pe=ve),ta(U),Xt(K),Wt(B),xe=A,Kt.current=xe,Bt(xe),Et(z),Mt(h),yt(F),wt(V),Xn(R),Wn(D),vt(T),pt(I),tt(G),ct($),function(e){Kn.current=e,Bn(e)}(N),pn(se),Dn(x),Ie(te),Re(me),qe(ue),en(fe),function(e){_n.current=e,vn(e)}(Z),Pn(j);var je=J?te.reduce((function(e,n){return e+n.width||100}),0)+80:100*te.length+80+80;Cn(je),Vn(k),Ae(pe),ua({pageConf:(0,i.Z)((0,i.Z)({},Se),{},{pageSize:K}),params:pe,paramsMap:x,sorter:void 0})})).catch((function(e){console.log(e)})).finally((function(){U(!1),Q(!1)}))}),[]);var sa=function(n,t){var r=(0,L.jS)("id");return{filters:[r?{col:null===e||void 0===e?void 0:e.model_name,opr:"rel_o_m",value:+r}:void 0].concat((0,a.Z)(n.filter((function(e){return void 0!==e.value})).map((function(e){for(var n="",a=["rel_o_m","ct","eq"],r=t[e.key].filter.map((function(e){return e.operator}))||[],i=0;i<a.length;i++){var c=a[i];if(r.includes(c)){n=c;break}}return{col:e.key,opr:n,value:e.value}})))).filter((function(e){return!!e}))}},ua=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pageConf:Se,params:Ve,paramsMap:Mn,sorter:void 0,only_favorite:!1},n=e.pageConf,t=e.params,a=e.paramsMap,r=e.sorter,c=e.only_favorite;U(!0);var l=JSON.stringify((0,i.Z)((0,i.Z)({},sa(t,a)),{},{only_favorite:c,str_related:1,page:(n.current||1)-1,page_size:n.pageSize||10},r));(0,H.jm)(Kn.current,{form_data:l}).then((function(e){var t=e.data.result,a=t.count,c=t.data;V(c),be([]),Ne((0,i.Z)((0,i.Z)((0,i.Z)({},Se),n),{},{total:a})),ut(r)})).catch((function(e){console.log(e)})).finally((function(){return U(!1)}))},da=function(e){he(!0),bn([]),(0,H.kI)("".concat(Kn.current).concat(e)).then((function(e){var n=e.data.result,t=[],a=function(e){return"[object Object]"===Object.prototype.toString.call(e)?e.last_name:e};Object.keys(n).forEach((function(e){t.push({label:_n.current[e]||e,value:a(n[e]),key:e})})),bn(t)})).catch((function(e){})).finally((function(){he(!1)}))},fa={name:"csv_file",maxCount:1,action:"".concat(An,"upload/"),headers:{authorization:"authorization-text"},beforeUpload:function(e){var n=-1!==e.name.indexOf(".csv");return n||m.ZP.error("".concat(e.name," \u5e76\u4e0d\u662fcsv\u6587\u4ef6")),n||p.Z.LIST_IGNORE},onChange:function(e){"done"===e.file.status?h.Z.success({message:"\u5bfc\u5165\u6210\u529f",description:JSON.stringify(e.file.response)}):"error"===e.file.status&&h.Z.error({message:"\u5bfc\u5165\u5931\u8d25",description:JSON.stringify(e.file.response)})}};return(0,S.jsxs)("div",{className:"fade-in h100 d-f fd-c",children:[(0,S.jsx)(z,{title:"\u6dfb\u52a0".concat(xt),formData:sn,loading:W,visible:$,onCancel:function(){ee(!1)},onCreate:function(e,n){for(var t in Q(!0),e)if(Object.prototype.hasOwnProperty.call(e,t)){var a=e[t];if(Array.isArray(a)){if(a[0]&&"[object Object]"===Object.prototype.toString.call(a[0]))continue;e[t]=e[t].join(",")}}(0,H.P9)(Kn.current,e).then((function(e){m.ZP.success("\u6dfb\u52a0".concat(xt,"\u6210\u529f")),n.resetFields(),ee(!1),ua((0,i.Z)((0,i.Z)({},la),{},{pageConf:Ce,params:Ve,sorter:st,paramsMap:Mn}))})).catch((function(e){m.ZP.error("\u6dfb\u52a0".concat(xt,"\u5931\u8d25"))})).finally((function(){Q(!1)}))},children:function(e,n){return(0,S.jsx)(le,{form:e,onRetryInfoChange:function(n){Q(!0);var t=e.getFieldsValue();for(var a in t){if(Object.prototype.hasOwnProperty.call(t,a))void 0===t[a]&&delete t[a]}var c=JSON.stringify(t);e.resetFields(),(0,H.y1)("".concat(Kn.current,"_info"),{exist_add_args:c}).then((function(n){var t=n.data,a=t.add_columns,c=t.label_columns,l=t.description_columns,o=t.add_fieldsets,s=a.reduce((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.name,n))}),{}),u=oa(a,c,l),d=o.map((function(e){var n=e.fields.map((function(e){return s[e]})).filter((function(e){return!!e}));return{group:e.group,expanded:e.expanded,config:oa(n,c,l)}})),f=a.filter((function(e){return""!==e.default})).map((function(e){return(0,r.Z)({},e.name,e.default)})).reduce((function(e,n){return(0,i.Z)((0,i.Z)({},e),n)}),{});e.setFieldsValue(f),qe(u),en(d)})).catch((function(e){m.ZP.error("\u5b57\u6bb5\u5207\u6362\u9519\u8bef")})).finally((function(){Q(!1)}))},formChangeRes:n,linkageConfig:nt,config:Ue,configGroup:$e})}}),(0,S.jsx)(z,{title:"\u4fee\u6539".concat(xt),formData:yn.reduce((function(e,n){if("select"===(mn[n.key]||{})["ui-type"]){var t=n.value,a=(mn[n.key]||{}).values||[],c=a.map((function(e){return e.value})).indexOf(n.value);return~c&&(t=a[c].id),(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.key,t))}if("select2"===(mn[n.key]||{})["ui-type"])return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.key,(n.value||"").split(",")));if("datePicker"===(mn[n.key]||{})["ui-type"]){var l=n.value;return l=O()(l),(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.key,l))}if("list"===(mn[n.key]||{})["ui-type"]){var o=(n.value||[]).map((function(e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var t=e[n];"datePicker"===(mn[n]||{})["ui-type"]&&(e[n]=O()(t))}return e}));return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.key,o))}return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.key,n.value))}),{}),loading:ae||pe,visible:ue,onCancel:function(){de(!1)},onCreate:function(e){for(var n in re(!0),bn([]),e)if(Object.prototype.hasOwnProperty.call(e,n)){var t=e[n];if(Array.isArray(t)){if(t[0]&&"[object Object]"===Object.prototype.toString.call(t[0]))continue;e[n]=e[n].join(",")}}(0,H.a1)("".concat(Kn.current).concat(e[mt]),e).then((function(e){m.ZP.success("\u66f4\u65b0".concat(xt,"\u6210\u529f")),de(!1),ua((0,i.Z)((0,i.Z)({},la),{},{pageConf:Ce,params:Ve,sorter:st,paramsMap:Mn}))})).catch((function(e){m.ZP.error("\u66f4\u65b0".concat(xt,"\u5931\u8d25"))})).finally((function(){re(!1)}))},children:function(e){return(0,S.jsx)(le,{form:e,primaryKey:mt,config:Ge,linkageConfig:nt,configGroup:an})}}),(0,S.jsx)(f.Z,{title:"".concat(xt,"\u8be6\u60c5"),visible:ve,footer:null,width:800,destroyOnClose:!0,onCancel:function(){_e(!1)},children:(0,S.jsx)(Z.Z,{spinning:pe,children:(0,S.jsx)("div",{className:"pb32",style:{minHeight:300},children:yn.map((function(e,n){return(0,S.jsxs)(x.Z,{className:"mb16",children:[(0,S.jsx)(v.Z,{span:6,children:(0,S.jsx)("div",{className:"ta-r",children:(0,S.jsxs)("strong",{children:[e.label,"\uff1a"]})})}),(0,S.jsx)(v.Z,{span:18,children:(0,S.jsx)("pre",{style:{whiteSpace:"break-spaces"},dangerouslySetInnerHTML:{__html:function(){var n=e.value;if("[object Object]"===Object.prototype.toString.call(e.value)||"[object Array]"===Object.prototype.toString.call(e.value))try{n=JSON.stringify(e.value)}catch(t){}return n}()}})})]},"dataDetail_".concat(n))}))})})}),(0,S.jsx)(w,{title:(0,S.jsxs)(S.Fragment,{children:[null!==e&&void 0!==e&&e.isSubRoute||(0,L.jS)("targetId")?(0,S.jsxs)(_.Z,{className:"mr16",onClick:function(){n("/data/metadata/metadata_dimension"),window.location.reload()},children:[(0,S.jsx)(I.Z,{}),"\u8fd4\u56de"]}):null,(0,S.jsx)("span",{children:xt})]}),breadcrumbs:((null===e||void 0===e?void 0:e.breadcrumbs)||[]).map((function(n,t){return(0,S.jsxs)("span",{className:"c-icon-b fs12",children:["/",(0,S.jsx)("span",{className:"plr2",children:n})]},"templateTitle_".concat(null===e||void 0===e?void 0:e.name,"_").concat(t))})),children:Ln?(0,S.jsxs)("div",{className:"link",children:[(0,S.jsx)("span",{className:"pr4",onClick:function(){window.open(Ln,"blank")},children:"\u5e2e\u52a9\u94fe\u63a5"}),(0,S.jsx)(T.Z,{})]}):null}),(0,S.jsx)(y.VY,{className:"appmgmt-content bg-title h100 d-f fd-c",children:(0,S.jsxs)("div",{className:"mlr16 mb16 flex1 bg-w",children:[!!De.length&&(0,S.jsx)(G,{values:Ve,params:De,onChange:function(e){localStorage.setItem("filter_".concat(t.pathname).concat(t.search),JSON.stringify(e)),Ae(e),ua((0,i.Z)((0,i.Z)({},la),{},{pageConf:Se,params:e,sorter:st,paramsMap:Mn}))}}),Jt?(0,S.jsx)(oe.Z,{url:An}):null,"card"!==gt?(0,S.jsx)(C.Z,{cancelExportData:!0,tableKey:"tablebox_".concat(t.pathname),titleNode:(0,S.jsx)(v.Z,{className:"tablebox-title",children:(0,S.jsxs)("div",{className:"d-f ac",children:[(0,S.jsx)("div",{className:"mr8",children:na||""}),At?(0,S.jsx)("div",{className:"pb2",children:(0,S.jsx)(j.Z,{checked:Ft,checkedChildren:"\u5168\u90e8",unCheckedChildren:"\u6211\u7684\u6536\u85cf",defaultChecked:!0,onChange:function(e){var n;n=e,Vt.current=n,Lt(n),ua((0,i.Z)((0,i.Z)({},la),{},{pageConf:Se,params:Ve,sorter:st,paramsMap:Mn,only_favorite:!e}))}})}):null]})}),buttonNode:(0,S.jsxs)("div",{className:"d-f ac",children:[Ot&&Ot.length?Ot.map((function(e){return(0,S.jsx)(_.Z,{type:"primary",className:"mr16",onClick:function(){window.open(e.url,"bank")},children:e.text})})):null,En.includes("can_add")?(0,S.jsxs)(_.Z,{className:"mr16",type:"primary",onClick:function(){return ee(!0)},children:["\u6dfb\u52a0",xt,(0,S.jsx)(M.Z,{})]}):null,(0,S.jsx)("div",{children:(0,S.jsx)(u.Z,{overlay:(0,S.jsx)(d.Z,{children:it.map((function(e,n){return(0,S.jsx)(d.Z.Item,{children:(0,S.jsx)("span",{className:"link",onClick:function(){return function(e){ye.length?f.Z.confirm({title:e.confirmation,icon:(0,S.jsx)(E.Z,{}),content:"",okText:"\u786e\u8ba4".concat(e.confirmation),cancelText:"\u53d6\u6d88",onOk:function(){return new Promise((function(n,t){(0,H.Eb)("".concat(Kn.current,"multi_action/").concat(e.name),{ids:ye.map((function(e){return JSON.parse(e||"{}")[mt]}))}).then((function(e){n("")})).catch((function(e){t()}))})).then((function(e){m.ZP.success("\u64cd\u4f5c\u6210\u529f"),ua((0,i.Z)((0,i.Z)({},la),{},{pageConf:Ce,params:Ve,sorter:st,paramsMap:Mn}))})).catch((function(){m.ZP.error("\u64cd\u4f5c\u5931\u8d25")}))},onCancel:function(){}}):m.ZP.warn("\u8bf7\u5148\u9009\u62e9")}(e)},children:"\u6279\u91cf".concat(e.text)})},"table_muliple_".concat(n))}))}),children:(0,S.jsxs)(_.Z,{children:["\u6279\u91cf\u64cd\u4f5c ",(0,S.jsx)(P.Z,{})]})})}),Jn?(0,S.jsx)("div",{className:"d-f ml16",children:(0,S.jsx)(o.Z,{color:"#fff",title:(0,S.jsxs)("span",{className:"tips-content-b",children:[(0,S.jsx)("div",{children:"\u6ce8\u610f\uff1acsv\u9017\u53f7\u5206\u9694\uff0c"}),(0,S.jsx)("div",{children:"\u7b2c\u4e00\u884c\u4e3a\u5217\u7684\u82f1\u6587\u540d"})," ",(0,S.jsx)("div",{className:"link",onClick:function(){window.open("".concat(window.location.origin).concat(Kn.current,"download_template"))},children:"\u4e0b\u8f7d\u5bfc\u5165\u6a21\u677f"})]}),placement:"topLeft",children:(0,S.jsx)(p.Z,(0,i.Z)((0,i.Z)({},fa),{},{children:(0,S.jsx)(_.Z,{className:"",icon:(0,S.jsx)(D.Z,{}),children:"\u6279\u91cf\u5bfc\u5165\u6570\u636e"})}))})}):null,Yn?(0,S.jsxs)(_.Z,{className:"ml16",onClick:function(){f.Z.confirm({title:"\u5bfc\u51fa\u6570\u636e",icon:(0,S.jsx)(E.Z,{}),content:"",okText:"\u786e\u8ba4\u5bfc\u51fa\u6570\u636e",cancelText:"\u53d6\u6d88",onOk:function(){var e=sa(Ve,Mn),n=JSON.stringify(e);window.open("".concat(window.location.origin).concat(Kn.current,"download?form_data=").concat(n)),m.ZP.success("\u5bfc\u51fa\u6210\u529f")},onCancel:function(){}})},children:["\u6279\u91cf\u5bfc\u51fa  ",(0,S.jsx)(R.Z,{})]}):null]}),rowKey:function(e){return JSON.stringify(e)},columns:Pe,loading:K,pagination:Ce,dataSource:N,onChange:function(e,n,t){var a=t.order?{order_column:t.columnKey,order_direction:"ascend"===t.order?"asc":"desc"}:void 0;ua((0,i.Z)((0,i.Z)({},la),{},{pageConf:e,params:Ve,paramsMap:Mn,sorter:a}))},rowSelection:{type:"checkbox",fixed:"left",columnWidth:32,selectedRowKeys:ye,onChange:function(e){be(e)}},scroll:{x:wn,y:ia}}):(0,S.jsxs)("div",{className:"bg-w p16",children:[(0,S.jsx)("div",{className:"d-f fw",children:N.map((function(e,n){return(0,S.jsx)("div",{style:{overflowY:"auto",width:null===kt||void 0===kt?void 0:kt.card_width,height:null===kt||void 0===kt?void 0:kt.card_height},className:"card-row mr16 mb16",children:Object.keys(e).map((function(t,a){return Tt.includes(t)?(0,S.jsx)("div",{style:{wordBreak:"break-all"},dangerouslySetInnerHTML:{__html:e[t]}},"row".concat(n).concat(a)):null}))},"card".concat(n))}))}),(0,S.jsx)("div",{className:"ta-r",children:(0,S.jsx)(g.Z,(0,i.Z)((0,i.Z)({},Ce),{},{onChange:function(e,n){ua((0,i.Z)((0,i.Z)({},la),{},{pageConf:(0,i.Z)((0,i.Z)({},Ce),{},{current:e,pageSize:n}),params:Ve,paramsMap:Mn}))}}))})]})]})})]})}},4269:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return ChartOptionTempalte}});var _Users_flytengzeng_Desktop_workspace_office_cube_studio_myapp_frontend_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(29439),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4519),_api_kubeflowApi__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(30506),_components_EchartCore_EchartCore__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(54189),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2556);function ChartOptionTempalte(props){var _useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({}),_useState2=(0,_Users_flytengzeng_Desktop_workspace_office_cube_studio_myapp_frontend_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(_useState,2),option=_useState2[0],setOption=_useState2[1],_useState3=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!0),_useState4=(0,_Users_flytengzeng_Desktop_workspace_office_cube_studio_myapp_frontend_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){props.url&&(0,_api_kubeflowApi__WEBPACK_IMPORTED_MODULE_1__.VL)("".concat(props.url,"echart"),{}).then((function(res){var option=res.data.result,currentOps={};eval("currentOps=".concat(option)),setOption(currentOps)})).catch((function(e){})).finally((function(){setLoading(!1)}))}),[props.url]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components_EchartCore_EchartCore__WEBPACK_IMPORTED_MODULE_2__.Z,{option:option,loading:loading})}}}]);
//# sourceMappingURL=436.e0fd9d01.chunk.js.map