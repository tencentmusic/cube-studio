{"version":3,"file":"static/js/413.4b21b509.chunk.js","mappings":"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","sources":["components/InputSearch/InputSearch.tsx","components/TableBox/TableBox.tsx","components/CodeEdit.tsx","components/Spreadsheet/Spreadsheet.tsx","pages/DataSearch/TaskList.tsx","api/dataSearchApi.ts","pages/DataSearch/ConfigFormData.tsx","pages/DataSearch/DataSearch.tsx"],"sourcesContent":["import { SearchOutlined } from '@ant-design/icons';\nimport { Input } from 'antd';\nimport React, { useState, ChangeEvent, useEffect } from 'react';\nimport './InputSearch.less';\n\ninterface IProps {\n    labelName?: string,\n    width?: string,\n    placeholder?: string,\n    maxLength?: number,\n    maxHeight?: number,\n    // 是否开启前端搜索匹配\n    isOpenSearchMatch?: boolean,\n    loading?: boolean | JSX.Element,\n    // 配置提示列表\n    options?: string[],\n    // 当配置value时，即为可控组件\n    value?: string,\n    disabled?: boolean\n    // 按回车时回调\n    onSearch?: (value: string) => void,\n    // 输入字符、按下回车时回调\n    onChange?: (value: string) => void,\n    // 点击option中的item\n    onClick?: (value: string) => void,\n    // 滚动条到底时触发\n    onScrollButtom?: () => void\n}\n\nexport default function InputSearch(props: IProps): JSX.Element {\n    const id = Math.random().toString(36).substring(2);\n    let inputRef: any;\n\n    const [dataCache, setDataCache] = useState<string[]>(props.options || []);\n    const [value, setValue] = useState(props.value || '');\n\n    useEffect(() => {\n        const dataFilter = props.isOpenSearchMatch ? (props.options || []).filter(item => {\n            return item.indexOf(value) !== -1;\n        }) : (props.options || []);\n        setDataCache(dataFilter);\n    }, [props.options]);\n\n    useEffect(() => {\n        setValue(props.value || '');\n        // props.onChange && props.onChange(props.value);\n    }, [props.value]);\n\n    const handleChange = (value: string): void => {\n        setValue(value);\n        props.onChange && props.onChange(value);\n    };\n\n    const handleClick = (value: string): void => {\n        handleChange(value);\n        props.onClick && props.onClick(value);\n    };\n\n    const handleEnterKey = (e: React.KeyboardEvent<HTMLInputElement>): void => {\n        // 回车\n        if (e.nativeEvent.keyCode === 13) {\n            inputRef.blur && inputRef.blur();\n            props.onSearch && props.onSearch(e.currentTarget.value);\n        }\n    };\n\n    const highlightKeyWord = (item: string): JSX.Element => {\n        const keyWord = value;\n        const index = item.indexOf(value);\n        if (index === -1) {\n            return <span>{item}</span>;\n        }\n        const preStr = item.substring(0, index);\n        const nextStr = item.substring(index + value.length);\n        return <span>{preStr}<span className=\"highlight\">{keyWord}</span>{nextStr}</span>;\n    };\n\n    const debounce = (fun: any, time = 500): any => {\n        let timer: ReturnType<typeof setTimeout>;\n        return function (...args: any): void {\n            clearTimeout(timer);\n            timer = setTimeout(() => {\n                fun && fun.apply(null, [...args]);\n            }, time);\n        };\n    };\n\n    const debounceScroll = debounce(props.onScrollButtom);\n\n    const handleScroll = (e: React.UIEvent<HTMLElement>): void => {\n        e.stopPropagation();\n        // console.log({\n        //     event: e,\n        //     target: e.target, // Note 1* scrollTop is undefined on e.target\n        //     currentTarget: e.currentTarget,\n        //     scrollTop: e.currentTarget.scrollTop,\n        //     scrollHeight: e.currentTarget.scrollHeight,\n        //     clientHeight: e.currentTarget.clientHeight\n        // });\n        const { currentTarget } = e;\n        const { scrollTop, clientHeight, scrollHeight } = currentTarget;\n        const difference = scrollHeight - clientHeight - scrollTop;\n        if (difference < 20) {\n            props.onScrollButtom && debounceScroll();\n        }\n    };\n\n    return (\n        <div className=\"select-down-modern\">\n            {\n                props.labelName ? <label htmlFor={id} className=\"pb4 mb0 fs12 d-b\">{props.labelName}</label> : null\n            }\n            <div className=\"p-r d-f ac\" style={{ width: props.width || 100 + '%' }}>\n                <Input\n                    style={{ width: '100%' }}\n                    disabled={props.disabled}\n                    id={id}\n                    placeholder={props.placeholder || ''}\n                    maxLength={props.maxLength || 200}\n                    onChange={(e: ChangeEvent<HTMLInputElement>): void => handleChange(e.target.value)}\n                    onKeyPress={handleEnterKey}\n                    value={value}\n                    ref={element => inputRef = element}\n                />\n                <SearchOutlined className=\"p-a r0 mr8\" />\n            </div>\n\n            {\n                // 输入提示\n                dataCache.length ? <ul className=\"select-option shadow\" onScroll={handleScroll} style={{ 'maxHeight': `${props.maxHeight}px` }}>\n                    {\n                        props.loading ? <div className=\"p-s z9 ta-r\" style={{ right: `${0}px`, top: `${0}px` }}>\n                            <div className=\"d-il p-a\" style={{ right: `${8}px`, top: `${0}px` }}></div>\n                        </div> : null\n                    }\n                    {\n                        dataCache.map((item, index) => {\n                            return <li className=\"ellip1\" onMouseDown={(): void => handleClick(item)} key={index}>{highlightKeyWord(item)}</li>;\n                        })\n                    }\n                </ul> : null\n            }\n        </div>\n    );\n}","import React, { ReactNode, useEffect, useState } from 'react';\nimport { Row, Col, Space, Table, ConfigProvider, Button, Modal, Tabs, message, Checkbox } from 'antd';\nimport './TableBox.less';\nimport { TablePaginationConfig } from 'antd/lib/table/Table';\nimport emptyImg from '../../images/emptyBg.png';\nimport { GetRowKey, SorterResult, TableRowSelection } from 'antd/lib/table/interface';\nimport ExportJsonExcel from 'js-export-excel';\nimport { Resizable } from 'react-resizable';\n\nconst CopyToClipboard = require('react-copy-to-clipboard');\n\ninterface IProps {\n\tsize?: 'large' | 'middle' | 'small'\n\ttableKey?: string\n\trowKey?: string | GetRowKey<any>;\n\ttitleNode?: string | ReactNode;\n\tbuttonNode?: ReactNode;\n\tdataSource: any;\n\tcolumns: any;\n\tpagination?: false | TablePaginationConfig;\n\tscroll?:\n\t| ({\n\t\tx?: string | number | true | undefined;\n\t\ty?: string | number | undefined;\n\t} & {\n\t\tscrollToFirstRowOnChange?: boolean | undefined;\n\t})\n\t| undefined;\n\tloading?: boolean;\n\trowSelection?: TableRowSelection<any>;\n\tcancelExportData?: boolean;\n\tonChange?: (\n\t\tpagination: TablePaginationConfig,\n\t\tfilters: Record<string, (string | number | boolean)[] | null>,\n\t\tsorter: SorterResult<any> | SorterResult<any>[],\n\t) => void;\n}\n\nconst customizeRenderEmpty = () => (\n\t<Row justify=\"center\" align=\"middle\" style={{ height: 360, flexDirection: 'column' }}>\n\t\t<img src={emptyImg} style={{ width: 266 }} alt=\"\" />\n\t\t<div>暂无数据</div>\n\t</Row>\n);\n\nconst ResizableTitle = ({ onResize, width, ...restProps }: any) => {\n\tif (!width) {\n\t\treturn <th {...restProps} />;\n\t}\n\n\treturn (\n\t\t<Resizable\n\t\t\twidth={width}\n\t\t\theight={0}\n\t\t\thandle={\n\t\t\t\t<span\n\t\t\t\t\tclassName=\"react-resizable-handle\"\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t}\n\t\t\tonResize={onResize}\n\t\t\tdraggableOpts={{ enableUserSelectHack: false }}\n\t\t>\n\t\t\t<th {...restProps} style={{ ...restProps?.style, userSelect: 'none' }} />\n\t\t</Resizable>\n\t);\n};\n\nconst TableBox = (props: IProps) => {\n\tconst [exportDataVisible, setExportDataVisible] = useState(false);\n\tconst [dataFormat, setDataFormat] = useState<{ header: any[]; data: any[] }>({\n\t\theader: [],\n\t\tdata: [],\n\t});\n\tconst [filterValue, setFilterValue] = useState<any[]>([]);\n\n\t// 可伸缩列设置\n\tconst [cols, setCols] = useState(props.columns);\n\tconst handleResize = (index: any) => {\n\t\treturn (_: any, { size }: any) => {\n\t\t\tif (size.width < 100) return\n\t\t\tconst temp = [...cols];\n\t\t\ttemp[index] = { ...temp[index], width: size.width };\n\t\t\tconst tableWidth = temp.reduce((pre: any, next: any) => pre + next.width || 100, 0) + 200\n\t\t\tlocalStorage.setItem(props.tableKey || '', JSON.stringify(temp))\n\t\t\t// console.log(currentTableScroll, temp);\n\t\t\tsetCurrentTableScroll({ ...currentTableScroll, x: tableWidth })\n\t\t\tsetCols(temp);\n\t\t};\n\t};\n\tconst customColumns = cols.map((col: any, index: any) => {\n\t\treturn {\n\t\t\t...col,\n\t\t\twidth: col.width || 200,\n\t\t\tonHeaderCell: (column: any) => {\n\t\t\t\treturn {\n\t\t\t\t\twidth: column.width,\n\t\t\t\t\tonResize: handleResize(index),\n\t\t\t\t};\n\t\t\t},\n\t\t};\n\t});\n\tconst [currentTableScroll, setCurrentTableScroll] = useState(props.scroll)\n\n\tuseEffect(() => {\n\t\tsetCols(props.columns);\n\t}, [props.columns]);\n\n\tuseEffect(() => {\n\t\tsetCurrentTableScroll(props.scroll);\n\t}, [props.scroll]);\n\n\tuseEffect(() => {\n\t\tif (props.dataSource) {\n\t\t\tconst columns = props.columns.filter((item: any) => ~filterValue.indexOf(item.dataIndex));\n\t\t\thanddleFilterHeader(columns, props.dataSource);\n\t\t}\n\t}, [props.dataSource, props.columns]);\n\n\tconst handdleFilterHeader = (dataColumns = [], data: any[]) => {\n\t\tconst columns = dataColumns.map((item: any) => item.dataIndex).filter((item: string) => item !== 'handle');\n\t\tconst sheetHeader = dataColumns.map((item: any) => item.title).filter((item: string) => item !== '操作');\n\t\tconst tarData: any = [];\n\n\t\tdata.forEach((dataRow: any) => {\n\t\t\tconst row: any = {};\n\t\t\tcolumns.map((colName: string) => {\n\t\t\t\tconst res = dataRow[colName];\n\t\t\t\trow[colName] = res || '';\n\t\t\t});\n\t\t\ttarData.push(row);\n\t\t});\n\n\t\tsetDataFormat({\n\t\t\theader: sheetHeader,\n\t\t\tdata: tarData,\n\t\t});\n\t};\n\n\tconst handleClickOutputExcel = () => {\n\t\tconst option: any = {};\n\t\toption.fileName = 'result';\n\t\toption.datas = [\n\t\t\t{\n\t\t\t\tsheetData: dataFormat.data,\n\t\t\t\tsheetName: 'sheet',\n\t\t\t\tsheetHeader: dataFormat.header,\n\t\t\t},\n\t\t];\n\t\tconst toExcel = new ExportJsonExcel(option);\n\t\ttoExcel.saveExcel();\n\t};\n\n\tconst handleExportJira = () => {\n\t\tconst header = dataFormat.header;\n\t\tconst data = dataFormat.data;\n\t\tlet str = '';\n\t\tif (header.length && data.length) {\n\t\t\tstr =\n\t\t\t\t'|' +\n\t\t\t\theader.join('|') +\n\t\t\t\t'|' +\n\t\t\t\t`\n`;\n\t\t\tdata.forEach((row: any) => {\n\t\t\t\tconst rowKey = Object.values(row).map((item) => {\n\t\t\t\t\tif (item === '') {\n\t\t\t\t\t\treturn ' ';\n\t\t\t\t\t}\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t\tstr =\n\t\t\t\t\tstr +\n\t\t\t\t\t'|' +\n\t\t\t\t\trowKey.join('|') +\n\t\t\t\t\t'|' +\n\t\t\t\t\t`\n`;\n\t\t\t});\n\t\t} else {\n\t\t\tstr = '';\n\t\t}\n\n\t\treturn str;\n\t};\n\n\tconst handleExportText = () => {\n\t\tconst header = dataFormat.header;\n\t\tconst data = dataFormat.data;\n\t\tlet str = '';\n\t\tif (header.length && data.length) {\n\t\t\tstr =\n\t\t\t\theader.join('\t') +\n\t\t\t\t`\n`;\n\t\t\tdata.forEach((row: any) => {\n\t\t\t\tconst rowKey = Object.values(row).map((item) => {\n\t\t\t\t\tif (item === '') {\n\t\t\t\t\t\treturn ' ';\n\t\t\t\t\t}\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t\tstr =\n\t\t\t\t\tstr +\n\t\t\t\t\trowKey.join('\t') +\n\t\t\t\t\t`\n`;\n\t\t\t});\n\t\t} else {\n\t\t\tstr = '';\n\t\t}\n\t\treturn str;\n\t};\n\n\treturn (\n\t\t<Space className=\"tablebox\" direction=\"vertical\" size=\"middle\">\n\t\t\t<Modal\n\t\t\t\twidth={1000}\n\t\t\t\tmaskClosable={false}\n\t\t\t\tcentered={true}\n\t\t\t\tbodyStyle={{ maxHeight: 500, overflow: 'auto' }}\n\t\t\t\tvisible={exportDataVisible}\n\t\t\t\ttitle={'导出数据'}\n\t\t\t\tonCancel={() => {\n\t\t\t\t\tsetExportDataVisible(false);\n\t\t\t\t}}\n\t\t\t\tfooter={null}\n\t\t\t>\n\t\t\t\t<div style={{ position: 'relative' }}>\n\t\t\t\t\t<div className=\"mb16\"><span className=\"pr8\">选择需要导出的列：</span><Checkbox.Group\n\t\t\t\t\t\toptions={props.columns\n\t\t\t\t\t\t\t.map((item: any) => ({ label: item.title, value: item.dataIndex }))\n\t\t\t\t\t\t\t.filter((item: any) => item.value !== 'handle')}\n\t\t\t\t\t\tdefaultValue={[]}\n\t\t\t\t\t\tvalue={filterValue}\n\t\t\t\t\t\tonChange={(values: any) => {\n\t\t\t\t\t\t\tsetFilterValue(values);\n\t\t\t\t\t\t\tconst columns = props.columns.filter((item: any) => ~values.indexOf(item.dataIndex));\n\t\t\t\t\t\t\thanddleFilterHeader(columns, props.dataSource);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/></div>\n\t\t\t\t\t<div style={{ position: 'absolute', right: 0, bottom: 0 }}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\ttype=\"link\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetFilterValue(\n\t\t\t\t\t\t\t\t\tprops.columns\n\t\t\t\t\t\t\t\t\t\t.map((item: any) => item.dataIndex)\n\t\t\t\t\t\t\t\t\t\t.filter((item: any) => item !== 'handle'),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\thanddleFilterHeader(props.columns, props.dataSource);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t全选\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\ttype=\"link\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetFilterValue([]);\n\t\t\t\t\t\t\t\thanddleFilterHeader([], props.dataSource);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t反选\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<Tabs>\n\t\t\t\t\t<Tabs.TabPane tab=\"Wiki格式\" key=\"jira\">\n\t\t\t\t\t\t<CopyToClipboard text={handleExportJira()} onCopy={() => message.success('已复制到粘贴板')}>\n\t\t\t\t\t\t\t<pre style={{ cursor: 'pointer', minHeight: 100 }}>\n\t\t\t\t\t\t\t\t<code>{handleExportJira()}</code>\n\t\t\t\t\t\t\t</pre>\n\t\t\t\t\t\t</CopyToClipboard>\n\t\t\t\t\t</Tabs.TabPane>\n\t\t\t\t\t<Tabs.TabPane tab=\"Text格式\" key=\"test\">\n\t\t\t\t\t\t<CopyToClipboard text={handleExportText()} onCopy={() => message.success('已复制到粘贴板')}>\n\t\t\t\t\t\t\t<pre style={{ cursor: 'pointer', minHeight: 100 }}>\n\t\t\t\t\t\t\t\t<code>{handleExportText()}</code>\n\t\t\t\t\t\t\t</pre>\n\t\t\t\t\t\t</CopyToClipboard>\n\t\t\t\t\t</Tabs.TabPane>\n\t\t\t\t\t<Tabs.TabPane tab=\"Excel格式\" key=\"excel\">\n\t\t\t\t\t\t<Row justify=\"center\" align=\"middle\" style={{ minHeight: 100 }}>\n\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t<Button type=\"primary\" onClick={handleClickOutputExcel}>\n\t\t\t\t\t\t\t\t\t导出Excel\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Tabs.TabPane>\n\t\t\t\t</Tabs>\n\t\t\t</Modal>\n\t\t\t{\n\t\t\t\tprops.titleNode || props.buttonNode || !props.cancelExportData ? <Row justify=\"space-between\" align=\"middle\">\n\t\t\t\t\t<Col>\n\t\t\t\t\t\t<Space align=\"center\">{props.titleNode}</Space>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col>\n\t\t\t\t\t\t<Space align=\"center\">\n\t\t\t\t\t\t\t{props.buttonNode}\n\t\t\t\t\t\t\t{props.cancelExportData ? null : (\n\t\t\t\t\t\t\t\t<Button style={{ marginLeft: 6 }} onClick={() => setExportDataVisible(true)}>\n\t\t\t\t\t\t\t\t\t导出数据\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Space>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row> : null\n\t\t\t}\n\t\t\t<ConfigProvider renderEmpty={customizeRenderEmpty}>\n\t\t\t\t<Table\n\t\t\t\t\tsize={props.size || 'middle'}\n\t\t\t\t\trowKey={props.rowKey ? props.rowKey : 'id'}\n\t\t\t\t\tdataSource={props.dataSource}\n\t\t\t\t\t// columns={props.columns}\n\t\t\t\t\tcomponents={{ header: { cell: ResizableTitle } }}\n\t\t\t\t\tcolumns={customColumns}\n\t\t\t\t\tpagination={props.pagination !== false ? { ...props.pagination } : false}\n\t\t\t\t\tscroll={currentTableScroll}\n\t\t\t\t\tloading={props.loading}\n\t\t\t\t\tonChange={props.onChange}\n\t\t\t\t\trowSelection={props.rowSelection}\n\t\t\t\t/>\n\t\t\t</ConfigProvider>\n\t\t</Space>\n\t);\n};\n\nexport default TableBox;\n","import React from 'react';\nimport CodeMirror, { ReactCodeMirrorProps } from '@uiw/react-codemirror';\nimport { bbedit } from '@uiw/codemirror-theme-bbedit';\nimport { zebraStripes } from '@uiw/codemirror-extensions-zebra-stripes';\nimport { sql } from '@codemirror/lang-sql';\n\ninterface IProps extends ReactCodeMirrorProps {\n\n}\n\nconst sqlLang = `CREATE TABLE dbo.EmployeePhoto\n(\n    EmployeeId INT NOT NULL PRIMARY KEY,\n    Photo VARBINARY(MAX) FILESTREAM NULL,\n    MyRowGuidColumn UNIQUEIDENTIFIER NOT NULL ROWGUIDCOL\n                    UNIQUE DEFAULT NEWID()\n);\n\nGO\n\n/*\ntext_of_comment\n/* nested comment */\n*/\n\n-- line comment\n\nCREATE NONCLUSTERED INDEX IX_WorkOrder_ProductID\n    ON Production.WorkOrder(ProductID)\n    WITH (FILLFACTOR = 80,\n        PAD_INDEX = ON,\n        DROP_EXISTING = ON);\nGO\n\nWHILE (SELECT AVG(ListPrice) FROM Production.Product) < $300\nBEGIN\n   UPDATE Production.Product\n      SET ListPrice = ListPrice * 2\n   SELECT MAX(ListPrice) FROM Production.Product\n   IF (SELECT MAX(ListPrice) FROM Production.Product) > $500\n      BREAK\n   ELSE\n      CONTINUE\nEND\nPRINT 'Too much for the market to bear';\n\nMERGE INTO Sales.SalesReason AS [Target]\nUSING (VALUES ('Recommendation','Other'), ('Review', 'Marketing'), ('Internet', 'Promotion'))\n       AS [Source] ([NewName], NewReasonType)\nON [Target].[Name] = [Source].[NewName]\nWHEN MATCHED\nTHEN UPDATE SET ReasonType = [Source].NewReasonType\nWHEN NOT MATCHED BY TARGET\nTHEN INSERT ([Name], ReasonType) VALUES ([NewName], NewReasonType)\nOUTPUT $action INTO @SummaryOfChanges;\n\nSELECT ProductID, OrderQty, SUM(LineTotal) AS Total\nFROM Sales.SalesOrderDetail\nWHERE UnitPrice < $5.00\nGROUP BY ProductID, OrderQty\nORDER BY ProductID, OrderQty\nOPTION (HASH GROUP, FAST 10);\n`;\n\n// https://uiwjs.github.io/react-codemirror/\n// https://www.npmjs.com/package/@uiw/react-codemirror\n// https://github.com/uiwjs/react-codemirror\nexport default function CodeEdit(props: IProps) {\n  return (\n    <>\n      <CodeMirror\n        theme={bbedit}\n        value={props.value}\n        onChange={props.onChange}\n        extensions={[\n          sql(),\n          zebraStripes({\n            step: 2,\n            lightColor: '#fafafa',\n            darkColor: '#fafafa',\n          })]} />\n    </>\n  )\n}\n\n// import React, { useEffect, useState } from 'react';\n// import { Controlled as CodeMirror } from 'react-codemirror2';\n// // 主题\n// import 'codemirror/lib/codemirror.css';\n// import 'codemirror/theme/solarized.css';\n// // 代码模式\n// import 'codemirror/mode/sql/sql';\n// // 代码补全\n// import 'codemirror/addon/hint/show-hint.css'\n// import 'codemirror/addon/hint/sql-hint';\n// import 'codemirror/addon/hint/show-hint';\n// import 'codemirror/addon/edit/closebrackets';\n// import 'codemirror/addon/hint/anyword-hint.js';\n// //折叠代码\n// import 'codemirror/addon/fold/foldgutter.css';\n// import 'codemirror/addon/fold/foldcode.js';\n// import 'codemirror/addon/fold/foldgutter.js';\n// import 'codemirror/addon/fold/brace-fold.js';\n// import 'codemirror/addon/fold/comment-fold.js';\n// // 代码高亮\n// import 'codemirror/addon/selection/active-line';\n\n// interface IProps {\n//   value?: string;\n//   onChange?: (value: string) => void;\n//   onSelect?: (value: string) => void\n//   readonly?: boolean\n// }\n\n// // https://github.com/scniro/react-codemirror2\n// // https://xudany.github.io/codemirror/2020/07/21/CodeMirror%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8F%90%E7%A4%BA%E5%8A%9F%E8%83%BD/\n// export default function CodeEdit(props: IProps) {\n//   const [instance, setInstance] = useState<any>(null);\n\n//   return (\n//     <>\n//       <CodeMirror\n//         editorDidMount={(editor) => {\n//           setInstance(editor);\n//         }}\n//         value={props.value || ''}\n//         options={{\n//           placeholder: '输入SQL进行查询',\n//           mode: 'sql',\n//           theme: 'solarized',\n//           lineNumbers: true,\n//           smartIndent: true,\n//           lineWrapping: true,\n//           styleActiveLine: true,\n//           foldGutter: true,\n//           matchBrackets: true, //括号匹配，光标旁边的括号都高亮显示\n//           autoCloseBrackets: true, //键入时将自动关闭()[]{}''\"\"\n//           gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter'],\n//           extraKeys: { Ctrl: 'autocomplete' },\n//           hintOptions: {\n//             completeSingle: false,\n//             alignWithWord: true\n//           },\n//         }}\n//         onCursorActivity={(editor) => {\n//           // console.log(editor.getSelection())\n//           const value = editor.getSelection()\n//           props.onSelect && props.onSelect(value)\n//         }}\n//         onBeforeChange={(editor, data, value) => {\n//           if (!props.readonly) {\n//             if (data.origin !== 'complete') {\n//               editor.execCommand('autocomplete');\n//             }\n//             props.onChange && props.onChange(value);\n//           }\n//         }}\n//       // onChange={(editor, data, value) => {\n//       //   console.log(editor, data, value)\n//       //   props.onChange && props.onChange(value);\n//       // }}\n//       />\n//     </>\n//   );\n// }","import React, { useEffect, useState } from 'react'\nimport XDataSpreadsheet from \"x-data-spreadsheet\";\nimport 'x-data-spreadsheet/dist/locale/zh-cn'\nimport './xDataSpreadsheet.less'\n\nexport interface ISpreadsheetProps {\n    width?: string | number\n    height?: string | number\n    dataSource: Record<any, any>[]\n    onChange?: (data: Record<string, any>) => void\n}\n\nexport default function Spreadsheet(props: ISpreadsheetProps) {\n    const [spreadsheetInstance, setSpreadsheetInstance] = useState<XDataSpreadsheet>()\n\n    const options: any = {\n        mode: 'edit', // edit | read\n        showToolbar: true,\n        showGrid: true,\n        showContextmenu: true,\n        view: {\n            height: () => props.height || 500,\n            width: () => props.width || 1000,\n        },\n        row: {\n            len: 100,\n            height: 25,\n        },\n        col: {\n            len: 50,\n            width: 100,\n            indexWidth: 60,\n            minWidth: 60,\n        },\n        style: {\n            bgcolor: '#ffffff',\n            align: 'left',\n            valign: 'middle',\n            textwrap: false,\n            strike: false,\n            underline: false,\n            color: '#0a0a0a',\n            font: {\n                name: 'Helvetica',\n                size: 10,\n                bold: false,\n                italic: false,\n            },\n        },\n    }\n\n    useEffect(() => {\n        if (props.dataSource && props.dataSource.length) {\n            XDataSpreadsheet.locale('zh-cn', (window.x_spreadsheet as any).$messages['zh-cn'])\n\n            const formatData = createDataRows(props.dataSource)\n\n            const currentOptions = {\n                ...options,\n                name: 'sheet1',\n                rows: formatData,\n                row: {\n                    len: props.dataSource.length,\n                    height: 25,\n                },\n                col: {\n                    len: props.dataSource[0].length,\n                    width: 100,\n                    indexWidth: 60,\n                    minWidth: 60,\n                },\n            }\n\n            const instance = new XDataSpreadsheet(\"#xdataspreadsheet\", currentOptions)\n                .loadData({\n                    rows: formatData,\n                })\n                .change(data => {\n                    props.onChange && props.onChange(data)\n                });\n\n            console.log('currentOptions', currentOptions);\n\n            setSpreadsheetInstance(instance)\n        }\n    }, [props.dataSource])\n\n    const createDataRows = (data: Record<any, any>[]) => {\n        const len = data.length < 50 ? 50 : data.length\n        const formatRows: any = {}\n        data.forEach((row, rowIndex) => {\n            const colFormat: any = {}\n            Object.keys(row).forEach((col, colIndex) => {\n                colFormat[colIndex] = {\n                    text: row[col]\n                }\n            })\n\n            formatRows[rowIndex.toString()] = {\n                cells: colFormat\n            }\n\n        })\n\n        return {\n            len,\n            ...formatRows\n        }\n    }\n\n    return (\n        <div>\n            <div style={{ width: props.width || 1000 }} id=\"xdataspreadsheet\"></div>\n            {\n                !(props.dataSource && props.dataSource.length) ? <div className=\"d-f jc ac c-hint-b h320 fs16\">暂无数据</div> : null\n            }\n        </div>\n    )\n}\n","import { CaretRightOutlined, CloseCircleOutlined, CloseOutlined, DeleteOutlined, DownloadOutlined, LoadingOutlined, QuestionCircleOutlined, RedoOutlined, StopOutlined } from '@ant-design/icons';\nimport { Button, Col, Collapse, message, Modal, Row, Select, Spin, Steps, Tooltip } from 'antd'\nimport React, { useRef, useState } from 'react'\nimport TableBox from '../../components/TableBox/TableBox';\nimport { TTaskStep, IEditorTaskItem, TTaskStatus } from './interface'\nimport './DataSearch.less';\nimport { getIdexTaskDownloadUrl, getIdexTaskResult, stopIndxTask } from '../../api/dataSearchApi';\nimport Spreadsheet from '../../components/Spreadsheet/Spreadsheet';\n\nexport interface ITaskListItem { }\n\ninterface IProps {\n    onDelete: (id: string) => void,\n    onRetry: (id: string) => void,\n    option: Record<string, IEditorTaskItem>\n}\n\nconst stepMap: Record<TTaskStep, number> = {\n    'start': 0,\n    'parse': 1,\n    'execute': 2,\n    'end': 3\n}\n\nconst statusIconMap = (status: TTaskStatus) => {\n    switch (status) {\n        case 'init':\n        case 'running':\n            return <LoadingOutlined />\n        case 'failure':\n            return <CloseCircleOutlined style={{ color: '#ff4444' }} />\n        case 'stop':\n            return <QuestionCircleOutlined />\n        default:\n            return null\n    }\n}\n\nconst handleResultData = (result: (string | number)[][]) => {\n    const header = result[0] || []\n    const data = result.slice(1)\n    const targetData = data.map((row) => {\n        const rowItem = row.reduce((pre, next, index) => ({ ...pre, [header[index]]: next }), {})\n        return rowItem\n    })\n    // const headerConfig = header.map(item => ({\n    //     title: item,\n    //     dataIndex: item,\n    //     key: item,\n    //     width: 100,\n    // }))\n    targetData.unshift(header)\n\n    return targetData\n}\n\nexport default function TaskList(props: IProps) {\n    const [visibleDownload, setVisibleDownload] = useState(false)\n    const [visibleResult, setVisibleResult] = useState(false)\n    const [dataResult, setDataResult] = useState<Record<string, any>[]>([])\n    const [loadingResult, setLoadingResult] = useState(true)\n\n    const [separator, _setSeparator] = useState<string>('|')\n    const separatorRef = useRef(separator);\n    const setSeparator = (data: string): void => {\n        separatorRef.current = data;\n        _setSeparator(data);\n    };\n\n    const [currentReqId, _setCurrentReqId] = useState<string>('|')\n    const currentReqIdRef = useRef(currentReqId);\n    const setCurrentReqId = (data: string): void => {\n        currentReqIdRef.current = data;\n        _setCurrentReqId(data);\n    };\n\n    const onChange = (key: string | string[]) => {\n        console.log(key);\n    };\n\n    // const handleClickDownload = (id: any) => {\n    //     Modal.confirm({\n    //         title: '下载结果',\n    //         icon: <DownloadOutlined />,\n    //         content: <div>\n    //             <div className=\"d-f ac pt16\">\n    //                 <div className=\"w72\">分隔符：</div>\n    //                 {console.log('separatorRef.current', separatorRef.current, separator)}\n    //                 <Select style={{ width: 256 }} value={separatorRef.current} options={[{\n    //                     label: '|',\n    //                     value: '|'\n    //                 }, {\n    //                     label: ',',\n    //                     value: ','\n    //                 }, {\n    //                     label: 'tab',\n    //                     value: 'tab'\n    //                 }]} onChange={(value) => {\n\n    //                     // separatorRef.current = value\n    //                     setSeparator(value)\n    //                     _setSeparator(value)\n    //                     console.log(value, separatorRef.current);\n    //                 }} />\n    //             </div>\n    //         </div>,\n    //         okText: `确认`,\n    //         cancelText: '取消',\n    //         onOk() {\n    //             return new Promise((resolve, reject) => {\n    //                 getIdexTaskDownloadUrl(id).then(res => {\n    //                     window.open(res.data.download_url, 'bank')\n    //                     resolve('')\n    //                 }).catch(err => {\n    //                     reject()\n    //                 })\n    //             })\n    //                 .then((res) => {\n    //                     message.success('下载成功');\n    //                 })\n    //                 .catch(() => {\n    //                     message.error('下载失败');\n    //                 });\n    //         },\n    //         onCancel() { },\n    //     });\n    // }\n\n    return (\n        <div>\n            <Modal\n                title={`下载结果`}\n                visible={visibleResult}\n                footer={null}\n                width={1248}\n                destroyOnClose\n                onCancel={() => {\n                    setVisibleResult(false)\n                }}>\n                <Spin spinning={loadingResult}>\n                    <Spreadsheet height={700} width={1200} dataSource={dataResult} />\n                </Spin>\n            </Modal>\n\n            <Modal\n                title={`结果`}\n                visible={visibleDownload}\n                footer={null}\n                destroyOnClose\n                onCancel={() => {\n                    setSeparator('|')\n                    setVisibleDownload(false)\n                }}>\n                <div>\n                    <div className=\"d-f ac pt8\">\n                        <div className=\"w96\">选择分隔符：</div>\n                        <Select style={{ width: 256 }} value={separatorRef.current} options={[{\n                            label: '|',\n                            value: '|'\n                        }, {\n                            label: ',',\n                            value: ','\n                        }, {\n                            label: 'TAB',\n                            value: 'TAB'\n                        }]} onChange={(value) => {\n                            setSeparator(value)\n                        }} />\n                    </div>\n                    <div className=\"ta-r pt16\">\n                        <Button type=\"primary\" onClick={() => {\n                            getIdexTaskDownloadUrl(currentReqIdRef.current, separatorRef.current).then(res => {\n                                window.open(res.data.download_url, 'bank')\n                            }).catch(err => {\n                                console.log(err)\n                            })\n                        }}>下载</Button>\n                    </div>\n                </div>\n            </Modal>\n            <Collapse className=\"site-collapse-custom-collapse\" defaultActiveKey={['task_0']} onChange={onChange}>\n                {\n                    (Object.entries(props.option).reduce((pre: IEditorTaskItem[], [key, value]) => ([...pre, value]), []) || []).reverse().filter(item => !!item.reqId).map((item, index) => {\n                        return (\n                            <Collapse.Panel className={['site-collapse-custom-panel', `status-${item.status}`].join(' ')} header={`子任务${item.reqId}`} key={`task_${index}`} extra={\n                                <>\n                                    <Button className=\"mr16\" type=\"default\" size='small' onClick={(e) => {\n                                        e.stopPropagation();\n                                        props.onDelete(item.reqId)\n                                    }}>删除<DeleteOutlined /></Button>\n                                    <Button type=\"primary\" size='small' onClick={(e) => {\n                                        e.stopPropagation();\n                                        props.onRetry(item.reqId)\n                                    }}\n                                    >重试<RedoOutlined /></Button>\n                                </>\n                            }>\n                                <Steps size=\"small\" current={stepMap[item.step]}>\n                                    <Steps.Step title=\"准备开始\" icon={stepMap[item.step] === 0 ? statusIconMap(item.status) : null} />\n                                    <Steps.Step title=\"解析\" icon={stepMap[item.step] === 1 ? statusIconMap(item.status) : null} />\n                                    <Steps.Step title=\"执行\" icon={stepMap[item.step] === 2 ? statusIconMap(item.status) : null} />\n                                    <Steps.Step title=\"输出结果\" icon={stepMap[item.step] === 3 ? statusIconMap(item.status) : null} />\n                                </Steps>\n                                <TableBox\n                                    size={\"small\"}\n                                    loading={false}\n                                    cancelExportData={true}\n                                    rowKey={(record: any) => {\n                                        return JSON.stringify(record)\n                                    }}\n                                    columns={[{\n                                        title: '子任务',\n                                        dataIndex: 'content',\n                                        key: 'content',\n                                        render: (text: any) => {\n                                            return <Tooltip\n                                                placement=\"top\"\n                                                title={text}\n                                            >\n                                                <div className=\"ellip1 w256\">{text}</div>\n                                            </Tooltip>\n                                        }\n                                    },\n                                    // {\n                                    //     title: '数据库',\n                                    //     dataIndex: 'database',\n                                    //     key: 'database',\n                                    // }, {\n                                    //     title: '表',\n                                    //     dataIndex: 'table',\n                                    //     key: 'table',\n                                    // },\n                                    {\n                                        title: '开始时间',\n                                        dataIndex: 'startime',\n                                        key: 'startime',\n                                    }, {\n                                        title: '运行时长',\n                                        dataIndex: 'duration',\n                                        key: 'duration',\n                                    }, {\n                                        title: '状态',\n                                        dataIndex: 'status',\n                                        key: 'status',\n                                        render: (text: any) => {\n                                            return <span className={[`c-${item.status}`].join(' ')}>{text}</span>\n                                        }\n                                    }, {\n                                        title: '操作',\n                                        dataIndex: 'action',\n                                        key: 'action',\n                                        render: () => {\n                                            return <>\n                                                <span className=\"link mr16\" onClick={() => {\n                                                    // setVisibleDetail(true)\n                                                    Modal.info({\n                                                        title: '任务详情',\n                                                        width: 600,\n                                                        okText: '关闭',\n                                                        content: (\n                                                            <div>\n                                                                <Row className=\"mb16\">\n                                                                    <Col span={6}><div className=\"ta-r\"><strong>开始时间：</strong></div></Col>\n                                                                    <Col span={18}>{item.startTime}</Col>\n                                                                </Row>\n                                                                <Row className=\"mb16\">\n                                                                    <Col span={6}><div className=\"ta-r\"><strong>运行时长：</strong></div></Col>\n                                                                    <Col span={18}>{item.duration}</Col>\n                                                                </Row>\n                                                                <Row className=\"mb16\">\n                                                                    <Col span={6}><div className=\"ta-r\"><strong>状态：</strong></div></Col>\n                                                                    <Col span={18}>{item.status}</Col>\n                                                                </Row>\n                                                                <Row className=\"mb16\">\n                                                                    <Col span={6}><div className=\"ta-r\"><strong>子任务内容：</strong></div></Col>\n                                                                    <Col span={18}>{item.content}</Col>\n                                                                </Row>\n                                                                <Row className=\"mb16\">\n                                                                    <Col span={6}><div className=\"ta-r\"><strong>任务信息：</strong></div></Col>\n                                                                    <Col span={18}>{item.message}</Col>\n                                                                </Row>\n                                                            </div>\n                                                        ),\n                                                        onOk() { },\n                                                    });\n                                                }}>详情</span>\n                                                {\n                                                    !(item.step === 'end' && item.status === 'success') ? <span className=\"link mr16\" onClick={() => {\n                                                        Modal.confirm({\n                                                            title: '终止任务',\n                                                            icon: <StopOutlined />,\n                                                            content: '',\n                                                            okText: `确认`,\n                                                            cancelText: '取消',\n                                                            onOk() {\n                                                                return new Promise((resolve, reject) => {\n                                                                    stopIndxTask(item.reqId).then(res => {\n                                                                        resolve('')\n                                                                    }).catch(err => {\n                                                                        reject()\n                                                                    })\n                                                                })\n                                                                    .then((res) => {\n                                                                        message.success('终止成功');\n                                                                    })\n                                                                    .catch(() => {\n                                                                        message.error('终止失败');\n                                                                    });\n                                                            },\n                                                            onCancel() { },\n                                                        });\n                                                    }}>终止</span> : null\n                                                }\n                                                {\n                                                    !!item.log ? <span className=\"link mr16\" onClick={() => {\n                                                        window.open(item.log, 'bank')\n                                                    }}>日志</span> : null\n                                                }\n                                                {\n                                                    item.step === 'end' && item.status === 'success' ? <span className=\"link mr16\" onClick={() => {\n                                                        // Modal.info({\n                                                        //     title: '结果查看',\n                                                        //     content: (\n                                                        //         <div>\n                                                        //             {item.result?.map(item => {\n                                                        //                 return <div>{item}</div>\n                                                        //             })}\n                                                        //         </div>\n                                                        //     ),\n                                                        //     onOk() { },\n                                                        // });\n                                                        setLoadingResult(true)\n                                                        getIdexTaskResult(item.reqId).then(res => {\n                                                            setVisibleResult(true)\n                                                            const result = res.data.result\n                                                            const handleData = handleResultData(result)\n                                                            setDataResult(handleData)\n                                                        }).catch(err => { }).finally(() => {\n                                                            setLoadingResult(false)\n                                                        })\n                                                    }}>结果</span> : null\n                                                }\n                                                {\n                                                    item.step === 'end' && item.status === 'success' ? <span className=\"link\" onClick={() => {\n                                                        // handleClickDownload(item.reqId)\n                                                        setCurrentReqId(item.reqId)\n                                                        setVisibleDownload(true)\n                                                    }}>下载</span> : null\n                                                }\n                                            </>\n                                        }\n                                    }]}\n                                    pagination={false}\n                                    dataSource={[{\n                                        content: item.content,\n                                        database: item.database || '-',\n                                        table: item.table || '-',\n                                        startime: item.startTime,\n                                        duration: item.duration || '-',\n                                        status: item.status\n                                    }]}\n                                />\n                            </Collapse.Panel>\n                        )\n                    })\n                }\n\n                {/* <Collapse.Panel className=\"site-collapse-custom-panel status-error\" header=\"子任务2\" key=\"2\" >\n                    <Steps size=\"small\" current={1}>\n                        <Steps.Step title=\"准备开始\" />\n                        <Steps.Step title=\"解析中\" icon={<LoadingOutlined />} />\n                        <Steps.Step title=\"执行中\" />\n                        <Steps.Step title=\"输出结果\" />\n                    </Steps>\n                    <TableBox\n                        size={\"small\"}\n                        loading={false}\n                        cancelExportData={true}\n                        rowKey={(record: any) => {\n                            return JSON.stringify(record)\n                        }}\n                        columns={[{\n                            title: '子任务',\n                            dataIndex: 'task',\n                            key: 'task',\n                        }, {\n                            title: '开始时间',\n                            dataIndex: 'startime',\n                            key: 'startime',\n                        }, {\n                            title: '运行时长',\n                            dataIndex: 'time',\n                            key: 'time',\n                        }, {\n                            title: '状态',\n                            dataIndex: 'status',\n                            key: 'status',\n                        }, {\n                            title: '操作',\n                            dataIndex: 'action',\n                            key: 'action',\n                            render: () => {\n                                return <>\n                                    <span className=\"link mr16\">详情</span>\n                                    <span className=\"link mr16\">日志</span>\n                                    <span className=\"link\">结果</span>\n                                </>\n                            }\n                        }]}\n                        pagination={false}\n                        dataSource={[{\n                            task: 'test',\n                            startime: '2022-08-09 17:45:46',\n                            time: '3分钟43秒',\n                            status: 'error'\n                        }]}\n                    />\n                </Collapse.Panel>\n                <Collapse.Panel className=\"site-collapse-custom-panel status-running\" header=\"子任务3\" key=\"3\">\n                    <p>{345}</p>\n                </Collapse.Panel> */}\n            </Collapse>\n        </div>\n    )\n}\n","import { AxiosResponse } from 'axios'\nimport axios, { AxiosResFormat } from '.'\nimport { TTaskStatus } from '../pages/DataSearch/interface'\n\nexport const actionRun = (params: {\n    sql: string,\n    [key: string]: any\n}): Promise<AxiosResponse<{\n    err_msg: string\n    log_url: string\n    task_id: string\n    task_url: string\n}>> => {\n    return axios.post('/idex/submit_task', params)\n}\n\nexport const actionGetDataSearchRes = (task_id: string): Promise<AxiosResponse<{\n    err_msg: string\n    result: Array<Array<string | number>>\n    state: TTaskStatus\n    task_url: string\n    result_url: string\n    stage: any\n    spark_log_url: string\n    spark_ui_url: string\n}>> => {\n    return axios.get(`/idex/look/${task_id}`,)\n}\n\nexport const getIdexDBList = (): Promise<AxiosResponse<{\n    dbs: string[]\n}>> => {\n    return axios.get(`/idex/get_user_db`)\n}\n\nexport const getIdexTableList = (table: string): Promise<AxiosResponse<{\n    tables: string[]\n}>> => {\n    return axios.get(`/idex/get_user_db_tables/${table}`)\n}\n\nexport const getIdexTaskDownloadUrl = (id: string, separator: string): Promise<AxiosResponse<{\n    download_url: string\n}>> => {\n    return axios.get(`/idex/download_url/${id}`, {\n        params: {\n            separator\n        }\n    })\n}\n\nexport const getIdexTaskResult = (id: string): Promise<AxiosResponse<{\n    err_msg: string\n    result: Array<Array<string | number>>\n}>> => {\n    return axios.get(`/idex/result/${id}`)\n}\n\nexport const stopIndxTask = (id: string): Promise<AxiosResponse<{\n    err_msg: string\n    result: Array<Array<string | number>>\n}>> => {\n    return axios.get(`/idex/stop/${id}`)\n}\n\n\nexport const getIndexResourceOverview = (group_id: string): Promise<AxiosResponse<{\n    err_msg: string\n    result: Array<Array<string | number>>\n}>> => {\n    return axios.get(`/idex/get_resource/${group_id}`)\n}\n\nexport interface IIdexFormConfigItem {\n    id: string,\n    label: string,\n    type: 'input' | 'select' | 'input-select',\n    value: IIdexFormConfigOption[]\n    defaultValue: string\n    multiple: boolean\n    disable: boolean\n    placeHolder: string\n}\n\nexport interface IIdexFormConfigOption {\n    label: string\n    value: string\n    relate: {\n        relateId: string\n        value: IIdexFormConfigOption[]\n    }\n}\n\nexport const getIdexFormConfig = (): Promise<AxiosResponse<{\n    result: IIdexFormConfigItem[]\n}>> => {\n    return axios.get(`/idex/config`)\n}","import { Form } from 'antd'\nimport Select, { LabeledValue } from 'antd/lib/select';\nimport React, { useEffect, useImperativeHandle, useState } from 'react'\nimport { IIdexFormConfigItem } from '../../api/dataSearchApi'\nimport InputSearch from '../../components/InputSearch/InputSearch';\nimport './ConfigFormData.less';\n\nexport type TDataValue = Record<any, any>\n\nexport interface IConfigFormDataOptionItem extends IIdexFormConfigItem { }\n\nexport interface IProps {\n    dataValue?: TDataValue\n    option: IConfigFormDataOptionItem[]\n    onChange: (dataValue: TDataValue) => void\n    onConfigChange?: (config: IConfigFormDataOptionItem[]) => void\n}\n\nconst ConfigFormData = React.forwardRef((props: IProps, ref) => {\n    const [form] = Form.useForm();\n    const [, updateState] = useState<any>();\n\n    useImperativeHandle(ref, () => ({\n        onSubmit: () => {\n            return new Promise((resolve, reject) => {\n                form.validateFields().then(res => {\n                    resolve(res)\n                }).catch(err => {\n                    reject(err)\n                })\n            })\n        },\n        setData: (data: Record<any, any>) => {\n            form.setFieldsValue(data)\n        }\n    }));\n\n    useEffect(() => {\n        if (props.dataValue) {\n            form.setFieldsValue(props.dataValue)\n        }\n    }, [props.option])\n\n    const renderInput = (config: IConfigFormDataOptionItem, itemProps: Record<string, any>) => {\n        return <div></div>\n    }\n\n    const renderSelect = (config: IConfigFormDataOptionItem, itemProps: Record<string, any>) => {\n        const options: LabeledValue[] = config.value || []\n        return <Form.Item\n            key={`configFormData_${config.id}`}\n            label={config.label}\n            name={config.id}\n            rules={[\n                {\n                    required: true,\n                    message: `请选择${config.label}`,\n                },\n            ]}\n            initialValue={config.defaultValue}\n            style={{ marginBottom: 0, marginRight: 16 }}\n            {...itemProps}\n        >\n            <Select\n                style={{ width: 200 }}\n                mode={config.multiple ? 'multiple' : undefined}\n                showSearch\n                disabled={config.disable}\n                optionFilterProp=\"label\"\n                placeholder={config.placeHolder || `请选择${config.label}`}\n                options={options}\n                onChange={(value, rowOption: any) => {\n                    if (rowOption.relate) {\n                        const relateId = rowOption.relate.relateId\n                        const relateOption = rowOption.relate.value\n                        const currentOption = props.option\n                        for (let i = 0; i < currentOption.length; i++) {\n                            const item = currentOption[i];\n                            if (item.id === relateId) {\n                                item.value = relateOption\n                            }\n                        }\n                        props.onConfigChange && props.onConfigChange(currentOption)\n                    }\n                    props.onChange && props.onChange(form.getFieldsValue())\n                }} />\n        </Form.Item>\n    }\n\n    const renderInputSelect = (config: IConfigFormDataOptionItem, itemProps: Record<string, any>) => {\n        const options: LabeledValue[] = config.value || []\n        const inputSelectOption = options.map(item => (item.value)) as string[]\n        return <Form.Item\n            key={`configFormData_${config.id}`}\n            label={config.label}\n            name={config.id}\n            rules={[\n                {\n                    required: true,\n                    message: `请选择${config.label}`,\n                },\n            ]}\n            initialValue={config.defaultValue}\n            style={{ marginBottom: 0 }}\n            {...itemProps}\n        >\n            <InputSearch\n                isOpenSearchMatch\n                onChange={() => {\n                    props.onChange && props.onChange(form.getFieldsValue())\n                }}\n                options={inputSelectOption} width={'500px'} />\n        </Form.Item>\n    }\n\n\n    const dispatchRenderFormItem = (item: IConfigFormDataOptionItem, itemProps: Record<string, any> = {}): JSX.Element | null => {\n        switch (item.type) {\n            case 'input':\n                return renderInput(item, itemProps)\n            case 'select':\n                return renderSelect(item, itemProps)\n            case 'input-select':\n                return renderInputSelect(item, itemProps)\n            default:\n                return null\n        }\n    }\n\n    return (\n        <div className=\"configformdata-container d-f ac\">\n            <Form form={form} component={false}>\n                {\n                    console.log('props.option', props.option)\n                }\n                {\n                    props.option.map((component) => {\n                        return dispatchRenderFormItem(component)\n                    })\n                }\n            </Form>\n        </div>\n    )\n})\n\nexport default ConfigFormData\n","import Icon, { ExclamationCircleOutlined, MenuOutlined, ReloadOutlined, RightCircleOutlined, SaveOutlined, SlidersOutlined, StarOutlined, StopOutlined } from '@ant-design/icons';\nimport { Button, Drawer, message, Modal, Select, Switch, Tabs, Tooltip } from 'antd'\nimport React, { useEffect, useRef, useState } from 'react'\nimport { actionGetDataSearchRes, actionRun, getIdexFormConfig } from '../../api/dataSearchApi';\nimport CodeEdit from '../../components/CodeEdit'\nimport InputSearch from '../../components/InputSearch/InputSearch';\nimport Draggable from 'react-draggable';\nimport './DataSearch.less';\nimport TaskList from './TaskList';\nimport { IEditorTaskItem, IEditorStore, IEditorItem, IEditorItemParams } from './interface';\nimport moment from 'moment'\nimport { data2Time } from '../../util';\n// import LineChartTemplate from '../../components/LineChartTemplate/LineChartTemplate';\nimport LoadingStar from '../../components/LoadingStar/LoadingStar';\nimport cookies from 'js-cookie';\nimport ConfigFormData, { IConfigFormDataOptionItem } from './ConfigFormData';\nconst userName = cookies.get('myapp_username')\n\nconst createId = () => {\n    return Math.random().toString(36).substring(2)\n}\n\nconst sqlMap: Record<string, string> = {\n    'test': `CREATE TABLE dbo.EmployeePhoto\n    (\n        EmployeeId INT NOT NULL PRIMARY KEY,\n        Photo VARBINARY(MAX) FILESTREAM NULL,\n        MyRowGuidColumn UNIQUEIDENTIFIER NOT NULL ROWGUIDCOL\n                        UNIQUE DEFAULT NEWID()\n    );\n    \n    GO\n    \n    /*\n    text_of_comment\n    /* nested comment */\n    */\n    \n    -- line comment\n    \n    CREATE NONCLUSTERED INDEX IX_WorkOrder_ProductID\n        ON Production.WorkOrder(ProductID)\n        WITH (FILLFACTOR = 80,\n            PAD_INDEX = ON,\n            DROP_EXISTING = ON);\n    GO\n    \n    WHILE (SELECT AVG(ListPrice) FROM Production.Product) < $300\n    BEGIN\n       UPDATE Production.Product\n          SET ListPrice = ListPrice * 2\n       SELECT MAX(ListPrice) FROM Production.Product\n       IF (SELECT MAX(ListPrice) FROM Production.Product) > $500\n          BREAK\n       ELSE\n          CONTINUE\n    END\n    PRINT 'Too much for the market to bear';\n    \n    MERGE INTO Sales.SalesReason AS [Target]\n    USING (VALUES ('Recommendation','Other'), ('Review', 'Marketing'), ('Internet', 'Promotion'))\n           AS [Source] ([NewName], NewReasonType)\n    ON [Target].[Name] = [Source].[NewName]\n    WHEN MATCHED\n    THEN UPDATE SET ReasonType = [Source].NewReasonType\n    WHEN NOT MATCHED BY TARGET\n    THEN INSERT ([Name], ReasonType) VALUES ([NewName], NewReasonType)\n    OUTPUT $action INTO @SummaryOfChanges;\n    \n    SELECT ProductID, OrderQty, SUM(LineTotal) AS Total\n    FROM Sales.SalesOrderDetail\n    WHERE UnitPrice < $5.00\n    GROUP BY ProductID, OrderQty\n    ORDER BY ProductID, OrderQty\n    OPTION (HASH GROUP, FAST 10);    \n`,\n}\n\nexport default function DataSearch() {\n    const initId = createId()\n    const initCurrentEditorData: IEditorItem = {\n        tabId: initId,\n        title: '新查询 1',\n        status: 'init',\n        smartShow: false,\n        smartContent: '',\n        smartCache: '',\n        smartTimer: undefined,\n        loading: false,\n        taskMap: {}\n    }\n    const initEditorData: Record<string, IEditorItem> = JSON.parse(localStorage.getItem('dataSearch2') || JSON.stringify({\n        [initCurrentEditorData.tabId]: initCurrentEditorData\n    }))\n    const initEditorDataList = Object.entries(initEditorData).reduce((pre: IEditorItem[], [key, value]) => ([...pre, { ...value }]), [])\n\n    const [activeKey, _setActiveKey] = useState<string>(initEditorDataList[0].tabId)\n    const activeKeyRef = useRef(activeKey);\n    const setActiveKey = (data: string): void => {\n        activeKeyRef.current = data;\n        _setActiveKey(data);\n    };\n\n    const [editorStore, _seteditorStore] = useState<IEditorStore>(initEditorData)\n    const editorStoreRef = useRef(editorStore);\n    const seteditorStore = (data: IEditorStore): void => {\n        editorStoreRef.current = data;\n        _seteditorStore(data);\n    };\n\n    const [configOption, _setConfigOption] = useState<IConfigFormDataOptionItem[]>([])\n    const configOptionRef = useRef(configOption);\n    const setConfigOption = (data: IConfigFormDataOptionItem[]): void => {\n        configOptionRef.current = data;\n        _setConfigOption(data);\n    };\n\n    const initialPanes = Object.entries(editorStore).reduce((pre: IEditorItem[], [key, value]) => ([...pre, { ...value }]), [])\n    const [panes, setPanes] = useState(initialPanes);\n    const newTabIndex = useRef(initEditorDataList.length);\n\n    const [columnConfig, setColumnConfig] = useState<any[]>([])\n    const [dataList, setDataList] = useState<any[]>([])\n\n    const configDataComponentRefs: any = useRef(null);\n\n    const setEditorState = (currentState: IEditorItemParams, key?: string) => {\n\n        const targetRes: IEditorStore = {\n            ...editorStoreRef.current\n        }\n        let currentTaskMap = {}\n\n        if (currentState.taskMap) {\n            currentTaskMap = {\n                taskMap: {\n                    ...editorStoreRef.current[activeKey].taskMap,\n                    ...currentState.taskMap\n                }\n            }\n        }\n\n        targetRes[key || activeKey] = {\n            ...targetRes[key || activeKey],\n            ...currentState,\n            ...currentTaskMap\n        }\n\n        localStorage.setItem('dataSearch2', JSON.stringify(targetRes))\n        editorStoreRef.current = targetRes\n        seteditorStore(targetRes)\n    }\n\n    useEffect(() => {\n        getIdexFormConfig().then(res => {\n            const option = res.data.result\n            setConfigOption(option)\n        })\n    }, [])\n\n    useEffect(() => {\n        const targetDom = document.getElementById(\"buttonDrag\")\n        if (targetDom) {\n            drag(targetDom);\n        }\n\n        function drag(obj: any) {\n            obj.onmousedown = function (e: any) {\n                var dir = \"\";  //设置好方向\n                var firstX = e.clientX;  //获取第一次点击的横坐标\n                var firstY = e.clientY;   //获取第一次点击的纵坐标\n                var width = obj.offsetWidth;  //获取到元素的宽度\n                var height = obj.offsetHeight;  //获取到元素的高度\n                var Left = obj.offsetLeft;   //获取到距离左边的距离\n                var Top = obj.offsetTop;   //获取到距离上边的距离\n                //下一步判断方向距离左边的距离+元素的宽度减去自己设定的宽度，只要点击的时候大于在这个区间，他就算右边\n                if (firstX > Left + width - 30) {\n                    dir = \"right\";\n                } else if (firstX < Left + 30) {\n                    dir = \"left\";\n                }\n                if (firstY > Top + height - 30) {\n                    dir = \"down\";\n                } else if (firstY < Top + 30) {\n                    dir = \"top\";\n                }\n                //判断方向结束\n                document.onmousemove = function (e) {\n                    switch (dir) {\n                        case \"right\":\n                            obj.style[\"width\"] = width + (e.clientX - firstX) + \"px\";\n                            break;\n                        case \"left\":\n                            obj.style[\"width\"] = width - (e.clientX - firstX) + \"px\";\n                            obj.style[\"left\"] = Left + (e.clientX - firstX) + \"px\";\n                            break;\n                        case \"top\":\n                            obj.style[\"height\"] = height - (e.clientY - firstY) + \"px\";\n                            obj.style[\"top\"] = Top + (e.clientY - firstY) + \"px\";\n                            break;\n                        case \"down\":\n                            obj.style[\"height\"] = height + (e.clientY - firstY) + \"px\";\n                            break;\n                    }\n                }\n                obj.onmouseup = function () {\n                    document.onmousemove = null;\n                }\n                return false;\n            }\n        }\n    }, [])\n\n    const clearEditorTaskTimerByKey = (activeKey: string) => {\n        const tagList = Object.entries(editorStoreRef.current[activeKey]).reduce((pre: IEditorItem[], [key, value]) => ([...pre, { ...value }]), [])\n        tagList.forEach(tag => {\n            clearInterval(tag.smartTimer)\n        })\n        const currentTaskList = Object.entries(editorStoreRef.current[activeKey].taskMap).reduce((pre: IEditorTaskItem[], [key, value]) => ([...pre, { ...value }]), [])\n        currentTaskList.forEach(task => {\n            clearInterval(task.timer)\n        })\n    }\n\n    const clearTaskTimer = (activeKey: string, taskId: string) => {\n        const taskMap = editorStoreRef.current[activeKey].taskMap\n        const task = taskMap[taskId]\n        if (task) {\n            clearInterval(task.timer)\n        }\n    }\n\n    // 清空定时器\n    useEffect(() => {\n        setEditorState({\n            loading: false\n        })\n\n        return () => {\n            Object.entries(editorStore).forEach((item) => {\n                const [key] = item\n                clearEditorTaskTimerByKey(key)\n            })\n        }\n    }, [])\n\n    useEffect(() => {\n        // 当前tab状态是runing，触发轮询\n        const currentEditorStore = editorStore[activeKey]\n        const currentTaskList = Object.entries(currentEditorStore.taskMap).reduce((pre: IEditorTaskItem[], [key, value]) => ([...pre, { ...value }]), [])\n        currentTaskList.forEach(task => {\n            if (task.status === 'running') {\n                pollGetRes(task.reqId)\n            }\n        })\n    }, [activeKey])\n\n\n    const onChange = (newActiveKey: string) => {\n        Object.entries(editorStore).forEach((item) => {\n            const [key] = item\n            if (key !== newActiveKey) {\n                clearEditorTaskTimerByKey(key)\n            }\n        })\n        setColumnConfig([])\n        setDataList([])\n        setActiveKey(newActiveKey);\n    };\n\n    const add = () => {\n        clearEditorTaskTimerByKey(activeKey)\n\n        const currentIndex = ++newTabIndex.current\n        if (currentIndex > 10) {\n            message.warn('标签数目达到限制')\n        } else {\n            const newActiveKey = createId();\n            const title = `新查询 ${currentIndex}`\n            const newPanes = [...panes];\n            const initState: IEditorItem = {\n                title,\n                tabId: newActiveKey,\n                status: 'init',\n                smartShow: false,\n                smartContent: '',\n                smartTimer: undefined,\n                smartCache: '',\n                loading: false,\n                taskMap: {}\n            }\n            newPanes.push(initState);\n            setPanes(newPanes);\n            setActiveKey(newActiveKey);\n\n            let res: IEditorStore = {\n                ...editorStore, [newActiveKey]: initState\n            }\n\n            seteditorStore(res)\n            localStorage.setItem('dataSearch2', JSON.stringify(res))\n        }\n    };\n\n    const remove = (targetKey: string) => {\n        let newActiveKey = activeKey;\n        let lastIndex = -1;\n        panes.forEach((pane, i) => {\n            if (pane.tabId === targetKey) {\n                lastIndex = i - 1;\n            }\n        });\n        const newPanes = panes.filter(pane => pane.tabId !== targetKey);\n        if (newPanes.length && newActiveKey === targetKey) {\n            if (lastIndex >= 0) {\n                newActiveKey = newPanes[lastIndex].tabId;\n            } else {\n                newActiveKey = newPanes[0].tabId;\n            }\n        }\n        setPanes(newPanes);\n        setActiveKey(newActiveKey);\n\n        let res = { ...editorStore }\n        delete res[targetKey]\n        seteditorStore(res)\n        localStorage.setItem('dataSearch2', JSON.stringify(res))\n    };\n\n    const onEdit = (targetKey: any, action: 'add' | 'remove') => {\n        if (action === 'add') {\n            add();\n        } else {\n            remove(targetKey);\n        }\n    };\n\n    const fetchData = (task_id: string) => {\n        actionGetDataSearchRes(task_id).then(res => {\n            const { state, result, err_msg, result_url, spark_log_url, stage } = res.data\n            const task: IEditorTaskItem = {\n                ...editorStoreRef.current[activeKey].taskMap[task_id],\n                status: state,\n                step: stage,\n                log: spark_log_url,\n                downloadUrl: result_url,\n                result,\n                message: err_msg\n            }\n            if (state === 'success' || state === 'failure') {\n                const starTime = new Date(task.startTime || '').valueOf()\n                const nowTime = new Date().valueOf()\n                const duration = data2Time((nowTime - starTime) / 1000)\n                task.duration = duration\n\n                setEditorState({\n                    status: 'success',\n                    taskMap: {\n                        [task_id]: task\n                    }\n                })\n                clearTaskTimer(activeKey, task_id)\n            } else {\n                setEditorState({\n                    status: 'success',\n                    taskMap: {\n                        [task_id]: task\n                    }\n                })\n            }\n        }).catch(() => {\n            clearTaskTimer(activeKey, task_id)\n            message.error('查询结果失败，尝试重新运行')\n            setEditorState({\n                status: 'failure',\n                taskMap: {\n                    [task_id]: {\n                        ...editorStoreRef.current[activeKey].taskMap[task_id],\n                        status: 'failure',\n                        step: 'end',\n                    }\n                }\n            })\n        })\n    }\n\n    const pollGetRes = (task_id: string) => {\n        clearTaskTimer(activeKey, task_id)\n\n        let timer = setInterval(() => {\n            fetchData(task_id)\n        }, 5000)\n\n        setEditorState({\n            taskMap: {\n                [task_id]: {\n                    reqId: task_id,\n                    status: 'init',\n                    content: editorStore[activeKey].content,\n                    name: `任务${task_id}`,\n                    step: 'start',\n                    startTime: moment().format('YYYY-MM-DD HH:mm:ss'),\n                    database: editorStore[activeKey].database,\n                    table: editorStore[activeKey].table,\n                    timer,\n                    message: ''\n                }\n            }\n        })\n        fetchData(task_id)\n    }\n\n    const runTask = () => {\n        setEditorState({ status: 'running' })\n        const customParams = configOption.map(item => item.id).reduce((pre: any, next: any) => ({ ...pre, [next]: editorStore[activeKey][next] }), {})\n        // 运行子任务\n        actionRun({\n            sql: editorStore[activeKey]?.content || '',\n            ...customParams\n        }).then(res => {\n            const { err_msg, task_id } = res.data\n            if (err_msg) {\n                setEditorState({\n                    status: 'failure',\n                })\n                Modal.error({\n                    title: '运行失败',\n                    icon: <ExclamationCircleOutlined />,\n                    width: 1000,\n                    content: err_msg,\n                    okText: '关闭',\n                    // maskClosable: true\n                });\n            } else if (task_id) {\n                pollGetRes(task_id)\n            }\n        }).catch(err => {\n            setEditorState({ status: 'failure' })\n        })\n    }\n\n    return (\n        <div className=\"datasearch-container fade-in d-f\">\n            <div className=\"flex1 ptb16 pl16\">\n                <Tabs type=\"editable-card\" onChange={onChange} activeKey={activeKey} onEdit={onEdit}>\n                    {panes.map((pane, index) => (\n                        <Tabs.TabPane tab={`新查询 ${index + 1}`} key={pane.tabId} closable={index !== 0}>\n                            <div className=\"d-f fd-c h100\">\n                                <div className=\"flex2 s0 ov-a\">\n                                    {\n                                        editorStore[activeKey]?.loading ? <div className=\"codeedit-mark\">\n                                            <div className=\"d-f jc ac fd-c\">\n                                                <LoadingStar />\n                                                <div>\n                                                    结果生成中\n                                                </div>\n                                            </div>\n                                        </div> : null\n                                    }\n\n                                    <CodeEdit\n                                        value={editorStore[activeKey]?.content}\n                                        onChange={(value: any) => {\n                                            setEditorState({\n                                                content: value === '' ? undefined : value,\n                                                title: pane.title,\n                                            })\n                                        }} />\n                                </div>\n\n                                <div className=\"ov-h\" id=\"showBox\" style={{ height: 500 }}>\n                                    <Draggable\n                                        axis=\"y\"\n                                        onStart={() => { }}\n                                        onDrag={(e: any) => {\n                                            const showBoxDom = document.getElementById('showBox')\n                                            if (showBoxDom) {\n                                                const res = document.body.clientHeight - e.y\n                                                showBoxDom.style.height = `${res}px`\n                                            }\n                                        }}\n                                        onStop={() => { }}>\n                                        <div className=\"ta-c\" style={{ cursor: 'ns-resize' }}><MenuOutlined /></div>\n                                    </Draggable>\n                                    <div className=\"ptb8 plr16 bor-l bor-r b-side d-f ac jc-b bg-w\">\n                                        <div className=\"d-f ac\">\n                                            <Switch className=\"mr8\"\n                                                checked={editorStore[activeKey].smartShow}\n                                                unCheckedChildren=\"正常模式\"\n                                                checkedChildren=\"智能模式\" onChange={(checked) => {\n                                                    setEditorState({ smartShow: checked })\n                                                }} />\n                                            {\n                                                editorStore[activeKey].smartShow ? <InputSearch\n                                                    value={editorStore[activeKey].smartContent}\n                                                    isOpenSearchMatch\n                                                    onChange={(value: any) => {\n                                                        setEditorState({\n                                                            smartContent: value,\n                                                        })\n                                                    }}\n                                                    onSearch={(value) => {\n                                                        setEditorState({\n                                                            smartCache: sqlMap[value],\n                                                            loading: true,\n                                                        })\n\n                                                        const timer = setInterval(() => {\n                                                            const currentContent = editorStoreRef.current[activeKey].content || ''\n                                                            if (editorStoreRef.current[activeKey].smartCache) {\n                                                                let smartCache = editorStoreRef.current[activeKey].smartCache || ''\n                                                                const tarStr = smartCache.substr(0, 20)\n                                                                smartCache = smartCache.replace(tarStr, '')\n\n                                                                setEditorState({\n                                                                    smartCache,\n                                                                    content: currentContent + tarStr\n                                                                })\n                                                            } else {\n                                                                clearInterval(editorStoreRef.current[activeKey].smartTimer)\n                                                                setEditorState({\n                                                                    smartCache: '',\n                                                                    smartTimer: undefined,\n                                                                    loading: false,\n                                                                })\n                                                            }\n                                                        }, 800)\n\n                                                        setEditorState({\n                                                            smartTimer: timer,\n                                                        })\n                                                    }}\n                                                    options={[\n                                                        'test',\n                                                    ]} placeholder=\"智能查询\" width={'240px'} /> : null\n                                            }\n                                        </div>\n                                        <div className=\"d-f ac\">\n                                            <ConfigFormData\n                                                ref={configDataComponentRefs}\n                                                dataValue={editorStore[activeKey]}\n                                                onChange={(dataValue) => {\n                                                    setEditorState(dataValue)\n                                                }}\n                                                onConfigChange={(option) => {\n                                                    setConfigOption(option)\n                                                    setEditorState({\n                                                        database: 'db'\n                                                    })\n                                                }}\n                                                option={configOptionRef.current} />\n                                            <Button className=\"ml16\" type=\"primary\" loading={editorStore[activeKey].status === 'running'} onClick={() => {\n                                                configDataComponentRefs.current.onSubmit().then((res: any) => {\n                                                    runTask()\n                                                })\n                                            }}>运行<RightCircleOutlined /></Button>\n                                        </div>\n                                    </div>\n                                    <div className=\"flex1 bor b-side s0 bg-w p-r ov-a\" style={{ height: 'calc(100% - 80px)' }}>\n                                        <div className=\"pt8\">\n                                            <div className=\"tag-result bg-theme c-text-w mr16\">\n                                                结果\n                                            </div>\n                                        </div>\n                                        <div className=\"plr16 pt8\">\n                                            <TaskList\n                                                option={editorStore[activeKey].taskMap}\n                                                onDelete={(id) => {\n                                                    Modal.confirm({\n                                                        title: '删除',\n                                                        icon: <ExclamationCircleOutlined />,\n                                                        content: '确定删除?',\n                                                        okText: '确认删除',\n                                                        cancelText: '取消',\n                                                        okButtonProps: { danger: true },\n                                                        onOk() {\n                                                            let taskMap = editorStore[activeKey].taskMap\n                                                            clearTaskTimer(activeKey, id)\n                                                            delete taskMap[id]\n                                                            setEditorState({\n                                                                taskMap\n                                                            })\n                                                        },\n                                                        onCancel() { },\n                                                    });\n                                                }}\n                                                onRetry={(id) => {\n                                                    pollGetRes(id)\n                                                }}\n                                            />\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </Tabs.TabPane>\n                    ))}\n                </Tabs>\n            </div>\n        </div>\n    )\n}\n"],"names":["InputSearch","props","inputRef","id","Math","random","toString","substring","useState","options","dataCache","setDataCache","value","setValue","useEffect","dataFilter","isOpenSearchMatch","filter","item","indexOf","handleChange","onChange","highlightKeyWord","keyWord","index","preStr","nextStr","length","className","debounceScroll","fun","timer","time","args","clearTimeout","setTimeout","apply","debounce","onScrollButtom","labelName","htmlFor","style","width","disabled","placeholder","maxLength","e","target","onKeyPress","nativeEvent","keyCode","blur","onSearch","currentTarget","ref","element","SearchOutlined","onScroll","stopPropagation","scrollTop","clientHeight","scrollHeight","maxHeight","loading","right","top","map","onMouseDown","onClick","handleClick","CopyToClipboard","require","customizeRenderEmpty","justify","align","height","flexDirection","src","emptyImg","alt","ResizableTitle","onResize","restProps","Resizable","handle","draggableOpts","enableUserSelectHack","userSelect","exportDataVisible","setExportDataVisible","header","data","dataFormat","setDataFormat","filterValue","setFilterValue","columns","cols","setCols","handleResize","_","size","temp","tableWidth","reduce","pre","next","localStorage","setItem","tableKey","JSON","stringify","setCurrentTableScroll","currentTableScroll","x","customColumns","col","onHeaderCell","column","scroll","dataSource","dataIndex","handdleFilterHeader","dataColumns","sheetHeader","title","tarData","forEach","dataRow","row","colName","res","push","handleExportJira","str","join","rowKey","Object","values","handleExportText","direction","maskClosable","centered","bodyStyle","overflow","visible","onCancel","footer","position","label","defaultValue","bottom","type","tab","text","onCopy","message","cursor","minHeight","option","datas","sheetData","sheetName","ExportJsonExcel","saveExcel","titleNode","buttonNode","cancelExportData","marginLeft","renderEmpty","components","cell","pagination","rowSelection","CodeEdit","theme","bbedit","extensions","sql","zebraStripes","step","lightColor","darkColor","Spreadsheet","setSpreadsheetInstance","mode","showToolbar","showGrid","showContextmenu","view","len","indexWidth","minWidth","bgcolor","valign","textwrap","strike","underline","color","font","name","bold","italic","XDataSpreadsheet","window","x_spreadsheet","$messages","formatData","createDataRows","currentOptions","rows","instance","loadData","change","console","log","formatRows","rowIndex","colFormat","keys","colIndex","cells","stepMap","statusIconMap","status","LoadingOutlined","CloseCircleOutlined","QuestionCircleOutlined","TaskList","visibleDownload","setVisibleDownload","visibleResult","setVisibleResult","dataResult","setDataResult","loadingResult","setLoadingResult","separator","_setSeparator","separatorRef","useRef","setSeparator","current","currentReqId","_setCurrentReqId","currentReqIdRef","destroyOnClose","spinning","axios","params","getIdexTaskDownloadUrl","then","open","download_url","catch","err","defaultActiveKey","key","entries","reverse","reqId","extra","onDelete","DeleteOutlined","onRetry","RedoOutlined","Step","icon","TableBox","record","render","placement","Modal","okText","content","span","startTime","duration","onOk","StopOutlined","cancelText","Promise","resolve","reject","handleData","result","targetData","slice","unshift","handleResultData","finally","database","table","startime","ConfigFormData","React","Form","form","useImperativeHandle","onSubmit","validateFields","setData","setFieldsValue","dataValue","renderInput","config","itemProps","renderSelect","rules","required","initialValue","marginBottom","marginRight","multiple","undefined","showSearch","disable","optionFilterProp","placeHolder","rowOption","relate","relateId","relateOption","currentOption","i","onConfigChange","getFieldsValue","renderInputSelect","inputSelectOption","component","dispatchRenderFormItem","createId","cookies","sqlMap","DataSearch","initCurrentEditorData","tabId","smartShow","smartContent","smartCache","smartTimer","taskMap","initEditorData","parse","getItem","initEditorDataList","activeKey","_setActiveKey","activeKeyRef","setActiveKey","editorStore","_seteditorStore","editorStoreRef","seteditorStore","configOption","_setConfigOption","configOptionRef","setConfigOption","initialPanes","panes","setPanes","newTabIndex","setColumnConfig","setDataList","configDataComponentRefs","setEditorState","currentState","targetRes","currentTaskMap","obj","targetDom","document","getElementById","onmousedown","dir","firstX","clientX","firstY","clientY","offsetWidth","offsetHeight","Left","offsetLeft","Top","offsetTop","onmousemove","onmouseup","clearEditorTaskTimerByKey","tag","clearInterval","task","clearTaskTimer","taskId","currentEditorStore","pollGetRes","fetchData","task_id","actionGetDataSearchRes","state","err_msg","result_url","spark_log_url","stage","downloadUrl","starTime","Date","valueOf","nowTime","data2Time","setInterval","moment","format","runTask","customParams","ExclamationCircleOutlined","newActiveKey","onEdit","targetKey","action","currentIndex","newPanes","initState","add","lastIndex","pane","remove","closable","LoadingStar","axis","onStart","onDrag","showBoxDom","body","y","onStop","MenuOutlined","checked","unCheckedChildren","checkedChildren","currentContent","tarStr","substr","replace","RightCircleOutlined","okButtonProps","danger"],"sourceRoot":""}