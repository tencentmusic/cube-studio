(self.webpackChunkkubeflow_frontend=self.webpackChunkkubeflow_frontend||[]).push([[46],{89839:function(e,t,a){"use strict";a.d(t,{B6:function(){return c},dD:function(){return r},ny:function(){return i}});var n=a(31202),r=function(e){return n.Z.get(e)},i=function(e){return n.Z.get(e)},c=function(e){return n.Z.get(e)}},54189:function(e,t,a){"use strict";a.d(t,{Z:function(){return b}});var n=a(1413),r=a(29439),i=a(4519),c=a(83066),s=a(6282),d=a(24992),o=a(29434),l=a(70457),_=a(62479),h=a(32892),u=a(90730),p=a(6005),m=a(58244),v=a(66505),f=a(68488),x=a(81745),g=a(43673),E=a(5763),j=a(2858),N=a(80818),y=a(97180),M=a(93849),D=a(2556);c.D([h.N,u.N,p.N,m.N,v.N,f.N,x.N,g.N,E.N,d.N,o.N,l.N,j.T,_.N,N.z,y.N]);var k={height:300};function b(e){var t=(0,i.useState)(),a=(0,r.Z)(t,2),c=a[0],d=a[1],o=Math.random().toString(36).substring(2),l={};return(0,i.useEffect)((function(){var t=document.getElementById(o);if(t){var a=s.S1(t);a.setOption((0,n.Z)((0,n.Z)({},l),e.option)),c||d(a)}}),[e.option,e.data]),(0,D.jsx)(M.Z,{spinning:e.loading,children:(0,D.jsxs)("div",{className:"chart-container",children:[(0,D.jsx)("div",{id:o,style:(0,n.Z)((0,n.Z)({},k),e.style)}),e.isNoData?(0,D.jsx)("div",{className:"chart-nodata",children:(0,D.jsx)("div",{children:"\u6682\u65e0\u6570\u636e"})}):null]})})}},76877:function(e,t,a){"use strict";a.d(t,{Z:function(){return b}});var n=a(93433),r=a(29439),i=a(1413),c=a(45987),s=a(4519),d=a(35492),o=a(20011),l=a(79551),_=a(28532),h=a(12513),u=a(80211),p=a(10089),m=a(2704),v=a(25738),f=a(80995),x=a.p+"static/media/emptyBg.15fdf5f39309784ac66e.png",g=a(24520),E=a.n(g),j=a(74308),N=a(2556),y=["onResize","width"],M=a(17972),D=function(){return(0,N.jsxs)(d.Z,{justify:"center",align:"middle",style:{height:360,flexDirection:"column"},children:[(0,N.jsx)("img",{src:x,style:{width:266},alt:""}),(0,N.jsx)("div",{children:"\u6682\u65e0\u6570\u636e"})]})},k=function(e){var t=e.onResize,a=e.width,n=(0,c.Z)(e,y);return a?(0,N.jsx)(j.Resizable,{width:a,height:0,handle:(0,N.jsx)("span",{className:"react-resizable-handle",onClick:function(e){e.stopPropagation()}}),onResize:t,draggableOpts:{enableUserSelectHack:!1},children:(0,N.jsx)("th",(0,i.Z)((0,i.Z)({},n),{},{style:(0,i.Z)((0,i.Z)({},null===n||void 0===n?void 0:n.style),{},{userSelect:"none"})}))}):(0,N.jsx)("th",(0,i.Z)({},n))},b=function(e){var t=(0,s.useState)(!1),a=(0,r.Z)(t,2),c=a[0],x=a[1],g=(0,s.useState)({header:[],data:[]}),j=(0,r.Z)(g,2),y=j[0],b=j[1],C=(0,s.useState)([]),P=(0,r.Z)(C,2),O=P[0],w=P[1],I=(0,s.useState)(e.columns),T=(0,r.Z)(I,2),B=T[0],R=T[1],Z=function(t){return function(a,r){var c=r.size;if(!(c.width<100)){var s=(0,n.Z)(B);s[t]=(0,i.Z)((0,i.Z)({},s[t]),{},{width:c.width});var d=s.reduce((function(e,t){return e+t.width||100}),0)+200;localStorage.setItem(e.tableKey||"",JSON.stringify(s)),K((0,i.Z)((0,i.Z)({},W),{},{x:d})),R(s)}}},A=B.map((function(e,t){return(0,i.Z)((0,i.Z)({},e),{},{width:e.width||200,onHeaderCell:function(e){return{width:e.width,onResize:Z(t)}}})})),L=(0,s.useState)(e.scroll),U=(0,r.Z)(L,2),W=U[0],K=U[1];(0,s.useEffect)((function(){R(e.columns)}),[e.columns]),(0,s.useEffect)((function(){K(e.scroll)}),[e.scroll]),(0,s.useEffect)((function(){if(e.dataSource){var t=e.columns.filter((function(e){return~O.indexOf(e.dataIndex)}));S(t,e.dataSource)}}),[e.dataSource,e.columns]);var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=e.map((function(e){return e.dataIndex})).filter((function(e){return"handle"!==e})),n=e.map((function(e){return e.title})).filter((function(e){return"\u64cd\u4f5c"!==e})),r=[];t.forEach((function(e){var t={};a.map((function(a){var n=e[a];t[a]=n||""})),r.push(t)})),b({header:n,data:r})},z=function(){var e=y.header,t=y.data,a="";return e.length&&t.length?(a="|"+e.join("|")+"|\n",t.forEach((function(e){var t=Object.values(e).map((function(e){return""===e?" ":e}));a=a+"|"+t.join("|")+"|\n"}))):a="",a},V=function(){var e=y.header,t=y.data,a="";return e.length&&t.length?(a=e.join("\t")+"\n",t.forEach((function(e){var t=Object.values(e).map((function(e){return""===e?" ":e}));a=a+t.join("\t")+"\n"}))):a="",a};return(0,N.jsxs)(o.Z,{className:"tablebox",direction:"vertical",size:"middle",children:[(0,N.jsxs)(l.Z,{width:1e3,maskClosable:!1,centered:!0,bodyStyle:{maxHeight:500,overflow:"auto"},visible:c,title:"\u5bfc\u51fa\u6570\u636e",onCancel:function(){x(!1)},footer:null,children:[(0,N.jsxs)("div",{style:{position:"relative"},children:[(0,N.jsxs)("div",{className:"mb16",children:[(0,N.jsx)("span",{className:"pr8",children:"\u9009\u62e9\u9700\u8981\u5bfc\u51fa\u7684\u5217\uff1a"}),(0,N.jsx)(_.Z.Group,{options:e.columns.map((function(e){return{label:e.title,value:e.dataIndex}})).filter((function(e){return"handle"!==e.value})),defaultValue:[],value:O,onChange:function(t){w(t);var a=e.columns.filter((function(e){return~t.indexOf(e.dataIndex)}));S(a,e.dataSource)}})]}),(0,N.jsxs)("div",{style:{position:"absolute",right:0,bottom:0},children:[(0,N.jsx)(h.Z,{size:"small",type:"link",onClick:function(){w(e.columns.map((function(e){return e.dataIndex})).filter((function(e){return"handle"!==e}))),S(e.columns,e.dataSource)},children:"\u5168\u9009"}),(0,N.jsx)(h.Z,{size:"small",type:"link",onClick:function(){w([]),S([],e.dataSource)},children:"\u53cd\u9009"})]})]}),(0,N.jsxs)(u.Z,{children:[(0,N.jsx)(u.Z.TabPane,{tab:"Wiki\u683c\u5f0f",children:(0,N.jsx)(M,{text:z(),onCopy:function(){return p.ZP.success("\u5df2\u590d\u5236\u5230\u7c98\u8d34\u677f")},children:(0,N.jsx)("pre",{style:{cursor:"pointer",minHeight:100},children:(0,N.jsx)("code",{children:z()})})})},"jira"),(0,N.jsx)(u.Z.TabPane,{tab:"Text\u683c\u5f0f",children:(0,N.jsx)(M,{text:V(),onCopy:function(){return p.ZP.success("\u5df2\u590d\u5236\u5230\u7c98\u8d34\u677f")},children:(0,N.jsx)("pre",{style:{cursor:"pointer",minHeight:100},children:(0,N.jsx)("code",{children:V()})})})},"test"),(0,N.jsx)(u.Z.TabPane,{tab:"Excel\u683c\u5f0f",children:(0,N.jsx)(d.Z,{justify:"center",align:"middle",style:{minHeight:100},children:(0,N.jsx)(m.Z,{children:(0,N.jsx)(h.Z,{type:"primary",onClick:function(){var e={fileName:"result"};e.datas=[{sheetData:y.data,sheetName:"sheet",sheetHeader:y.header}],new(E())(e).saveExcel()},children:"\u5bfc\u51faExcel"})})})},"excel")]})]}),e.titleNode||e.buttonNode||!e.cancelExportData?(0,N.jsxs)(d.Z,{justify:"space-between",align:"middle",children:[(0,N.jsx)(m.Z,{children:(0,N.jsx)(o.Z,{align:"center",children:e.titleNode})}),(0,N.jsx)(m.Z,{children:(0,N.jsxs)(o.Z,{align:"center",children:[e.buttonNode,e.cancelExportData?null:(0,N.jsx)(h.Z,{style:{marginLeft:6},onClick:function(){return x(!0)},children:"\u5bfc\u51fa\u6570\u636e"})]})})]}):null,(0,N.jsx)(v.ZP,{renderEmpty:D,children:(0,N.jsx)(f.Z,{size:e.size||"middle",rowKey:e.rowKey?e.rowKey:"id",dataSource:e.dataSource,components:{header:{cell:k}},columns:A,pagination:!1!==e.pagination&&(0,i.Z)({},e.pagination),scroll:W,loading:e.loading,onChange:e.onChange,rowSelection:e.rowSelection})})]})}},75743:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var n=a(4519),r=a(29439),i=a(93849),c=a(47239),s=a(89839),d=a(2556);function o(){return(0,d.jsxs)("div",{className:"dna p-a",style:{left:-180},children:[(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})}),(0,d.jsx)("div",{className:"ele",children:(0,d.jsx)("div",{className:"dot"})})]})}var l=a(16548),_=a(94119),h=a(93433),u=a(15671),p=a(43144),m=a(60136),v=a(27277),f=a(4942),x=a(1413),g=a(97448),E=a(68383).Z,j=function(){function e(t){var a=this,n=t.containerId,i=t.mainViewId,c=t.margin,s=void 0===c?0:c;(0,u.Z)(this,e),this.container=void 0,this.scaleView=void 0,this.mainView=void 0,this.gNode=void 0,this.gLink=void 0,this.gText=void 0,this.gBorder=void 0,this.gTextCache=void 0,this.innerWidth=void 0,this.innerHeight=void 0,this.tip=void 0,this.fontSize=14,this.zoom=void 0,this.currentNode=void 0,this.margin=void 0,this.list2Tree=function(e){for(var t,n=[],r=e.map((function(e){return e.children&&delete e.children,e})),i=a.list2Map(r,"ci_id"),c=0;c<r.length;c++){var s=r[c];if(void 0!==s.parentId){var d=i.get(s.parentId);d.children?d.children.push(s):d.children=[s]}else t=i.get(s.ci_id)}return n.push(t),n},this.tree2List=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"children",a=(0,h.Z)(e),n=[];a.length;){var r=a.shift();n.push(r),r&&r[t]&&a.push.apply(a,(0,h.Z)(r[t]))}return n},this.list2Map=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=new Map,r=0;r<e.length;r++){var i=e[r];i&&i[t]&&(a||!n.get(i[t]))&&n.set(i[t],i)}return n},this.treeCutNode=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"children",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",n=arguments.length>3?arguments[3]:void 0;if(void 0===n)return e;var r=function e(r){for(var i=[],c=0;c<r.length;c++){var s=r[c],d=(0,x.Z)({},s);s[t]&&s[t].length?s[a]===n?(d[t]=[],i.push(d)):(d[t]=e(s[t]),i.push(d)):i.push(d)}return i},i=r(e);return i},this.parse2Rectangle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0,0 2,0 2,2 0,2",t=e.split(" ").map((function(e){var t=e.split(","),a=(0,r.Z)(t,2);return{x:+a[0],y:+a[1]}})),a=t.reduce((function(e,t,a){var n=(0,x.Z)({},e);return n["x".concat(a)]=t.x,n["y".concat(a)]=t.y,n}),{}),n=a.x1-a.x0,i=a.y3-a.y0,c=(0,x.Z)((0,x.Z)({coordList:t},a),{},{width:Math.abs(n),height:Math.abs(i),center:[n/2,i/2]});return c};var d=this;this.margin=s,this.container=document.getElementById(n),this.mainView=g.Ys("#".concat(i)),this.scaleView=this.mainView.append("g").attr("id","scaleView"),this.scaleView.attr("style","transition:all .3s");var o={top:s,right:s,bottom:s,left:s},l=this.container.scrollWidth-o.top-o.bottom,_=this.container.scrollHeight-o.left-o.right;this.mainView.attr("width",l).attr("height",_).attr("viewBox","0 0 ".concat(l," ").concat(_)).attr("transform","translate(".concat(o.left,", ").concat(o.top,")")),this.gTextCache=this.mainView.append("g").attr("id","gTextCache"),this.gBorder=this.scaleView.append("g").attr("id","gBorder"),this.gText=this.scaleView.append("g").attr("id","gText"),this.gLink=this.scaleView.append("g").attr("id","gLink"),this.gNode=this.scaleView.append("g").attr("id","gNode").attr("cursor","pointer").attr("pointer-events","all").attr("transform","translate(0 ".concat(.2*_,") scale(.5,.5)")),this.scaleView.append("defs").attr("id","gDefs").append("marker").attr("id","arrowRight").attr("viewBox","-10 -10 20 20").attr("refX",10).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M -10,-10 L 10,0 L -10,10").attr("fill","#cdcdcd").attr("stroke-width",2).attr("stroke","#cdcdcd");var p=E();p.attr("class","d3-tip").html((function(e){return e})),this.tip=p,this.mainView.call(p);var m=g.sPX().scaleExtent([.1,2]).on("zoom",(function(e){var t=g.Ba6.transform;d.scaleView.attr("style","transition:all 0s").attr("transform",t),d.tip.hide()})).on("end",(function(){d.scaleView.attr("style","transition:all 0.3s")}));this.zoom=m,this.mainView.call(m).call(m.transform,g.CRH.translate(0,0).scale(1)).on("dblclick.zoom",null),this.innerHeight=_,this.innerWidth=l}return(0,p.Z)(e,[{key:"reSize",value:function(){this.mainView.attr("width",0).attr("height",0).attr("viewBox","0 0 ".concat(0," ",0));var e=this.margin,t=this.margin,a=this.margin,n=this.margin,r=this.container.scrollWidth-e-a,i=this.container.scrollHeight-n-t;console.log(this.container.scrollWidth,this.container.scrollHeight),this.mainView.attr("width",r).attr("height",i).attr("viewBox","0 0 ".concat(r," ").concat(i)),this.innerHeight=i,this.innerWidth=r}},{key:"getTextRect",value:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14,n=this.gTextCache.append("text").text(e).attr("font-size","".concat(a,"px")),r=null===(t=n.node())||void 0===t?void 0:t.getBBox(),i={width:(null===r||void 0===r?void 0:r.width)||0,height:(null===r||void 0===r?void 0:r.height)||0};return n.remove(),i}}]),e}(),N=(a(36012).graphviz.name,[{background:"#00d4001a",color:"#00d400",border:"#00d400",activeColor:"#0078d4",disabled:"#cdcdcd1a",disabledColor:"#cdcdcd"},{background:"#00d4c81a",color:"#00d4c8",border:"#00d4c8",activeColor:"#0078d4",disabled:"#cdcdcd1a",disabledColor:"#cdcdcd"},{background:"#0000d41a",color:"#0000d4",border:"#0000d4",activeColor:"#0078d4",disabled:"#cdcdcd1a",disabledColor:"#cdcdcd"},{background:"#c800d41a",color:"#c800d4",border:"#c800d4",activeColor:"#0078d4",disabled:"#cdcdcd1a",disabledColor:"#cdcdcd"},{background:"#d464001a",color:"#d46400",border:"#d46400",activeColor:"#0078d4",disabled:"#cdcdcd1a",disabledColor:"#cdcdcd"},{background:"#96d4001a",color:"#96d400",border:"#96d400",activeColor:"#0078d4",disabled:"#cdcdcd1a",disabledColor:"#cdcdcd"},{background:"#00d4961a",color:"#00d496",border:"#00d496",activeColor:"#0078d4",disabled:"#cdcdcd1a",disabledColor:"#cdcdcd"},{background:"#0096d41a",color:"#0096d4",border:"#0096d4",activeColor:"#0078d4",disabled:"#cdcdcd1a",disabledColor:"#cdcdcd"},{background:"#6400d41a",color:"#6400d4",border:"#6400d4",activeColor:"#0078d4",disabled:"#cdcdcd1a",disabledColor:"#cdcdcd"},{background:"#d400001a",color:"#d40000",border:"#d40000",activeColor:"#0078d4",disabled:"#cdcdcd1a",disabledColor:"#cdcdcd"},{background:"#d4c8001a",color:"#d4c800",border:"#d4c800",activeColor:"#0078d4",disabled:"#cdcdcd1a",disabledColor:"#cdcdcd"}]),y=["ROOT","BUSINESS","THEME","COLLECT"].reduce((function(e,t,a){return(0,x.Z)((0,x.Z)({},e),{},(0,f.Z)({},t,N[a%N.length]))}),{}),M=function(e){(0,m.Z)(a,e);var t=(0,v.Z)(a);function a(e){var n,r=e.containerId,i=e.mainViewId,c=e.margin,s=void 0===c?0:c,d=e.isCollection;return(0,u.Z)(this,a),(n=t.call(this,{containerId:r,mainViewId:i,margin:s})).dataMap=new Map,n.dataMapByName=new Map,n.renderNodesMap=new Map,n.nodesInGraphMap=new Map,n.nodesInCollectionMap=new Map,n.dataNodes=[],n.activeNodeId=void 0,n.rootNode=void 0,n.handleNodeClick=void 0,n.loadingStart=void 0,n.loadingEnd=void 0,n.isCollection=void 0,n.htmlStrEnCode=function(e){return e.replace(/[\u00A0-\u9999<>\-\&\:]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))},n.isCollection=!!d,n}return(0,p.Z)(a,[{key:"enCodeNodeId",value:function(e){return"node_".concat(e.split("").map((function(e){return e.charCodeAt(0)})).join(""))}},{key:"deCodeNodeId",value:function(e){var t=e.replace(/^node_/,"").replaceAll("_rep_",":").replaceAll("_mid_","-");return this.htmlStrEnCode(t)}},{key:"preHandleNodes",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"children",n=new Map,r=new Map,i=e.map((function(e,t){return"node_".concat(a,"_").concat(t)})),c=a,s="children"===a?"parent":"children",d=function e(i){for(var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],_=[],u=0;u<i.length;u++){var p,m,v=i[u];l.push("".concat(u));t.htmlStrEnCode(v.nid);var g="node_".concat(a,"_").concat(l.join("_")),E=r.get(v.nid);E&&(g=E.key);var j=n.get(g),N=(0,x.Z)((0,x.Z)({},v),{},(p={key:g,level:d,relativeKey:a},(0,f.Z)(p,s,o?[o]:[]),(0,f.Z)(p,c,[]),p));if(j){var y=j[s].map((function(e){return e.key})).includes((null===o||void 0===o?void 0:o.key)||"");N=y?j:(0,x.Z)((0,x.Z)({},j),{},(0,f.Z)({},s,[o].concat((0,h.Z)(j[s]))))}v[c]&&null!==(m=v[c])&&void 0!==m&&m.length&&e(v[c]||[],d+1,N,l),n.set(N.key,N),r.set(N.nid,N),_.push(N),l.pop()}return _};d(e),n.forEach((function(e){for(var t=e[s],a=0;a<t.length;a++){var r=t[a].key,i=n.get(r);i&&(i[c].push(e),n.set(r,i))}e[s]=e[s].map((function(e){return n.get(e.key)})),n.set(e.key,e)}));var o=i.map((function(e){return n.get(e)})),l=o?(0,h.Z)(o):[];return l}},{key:"initData",value:function(e){var t=this;this.nodesInCollectionMap=new Map,this.dataNodes=[],console.log("data",e);var a=this.preHandleNodes(e,"parent"),n=this.preHandleNodes(e,"children");console.log("preHandleNextData",n);for(var r=0;r<n.length;r++)n[r].key="node_".concat(r),n[r].parent=a[r].parent;var i=n[0],c=n;this.rootNode=i;var s=this.preRenderDataReady(c);console.log("preRenderData",s),this.renderNode(s).then((function(){t.centerApp()}))}},{key:"preRenderDataReady",value:function(e){if(null!==e&&void 0!==e&&e.length){var t=this.tree2List(e,"parent"),a=this.tree2List(e,"children"),n=[].concat((0,h.Z)(t),(0,h.Z)(a)),r=this.list2Map(n,"key"),i=this.list2Map(n,"node_name"),c=[];r.forEach((function(e){c.push(e)})),this.dataMap=r,this.dataMapByName=i,this.dataNodes=c}else this.dataNodes=[];return this.dataNodes}},{key:"createRenderNodes",value:function(e,t){var a=this;return e.map((function(e){return a.nodesInCollectionMap.get(e.key)?"":"COLLECT"===e.data_fields?"".concat(e.key,'\n\t\t\t\t\t[label="\u805a\u5408\u8282\u70b9\uff0c\u5269\u4f59').concat(e.collectNum,'\u4e2a\u8282\u70b9(\u53cc\u51fb\u5c55\u5f00) + ",\n\t\t\t\t\t\tshape=box,\n\t\t\t\t\t\tstyle=dashed,\n\t\t\t\t\t\tmargin=0,\n\t\t\t\t\t\tid=').concat(e.key,"\n\t\t\t\t\t];"):"".concat(e.key,'\n\t\t\t\t\t[label="\u5360\u4f4d\u7b26\u5360\u4f4d\u7b26\u5360\u4f4d').concat(e.key,'",\n\t\t\t\t\t\tshape=box,\n\t\t\t\t\t\twidth=8,\n\t\t\t\t\t\theight=0.8,\n\t\t\t\t\t\tmargin=0,\n\t\t\t\t\t\tid=').concat(e.key,"\n\t\t\t\t\t];")})).filter((function(e){return!!e}))}},{key:"cerateRenderNodesRelation",value:function(e){var t=this,a=[];return e.forEach((function(e){var n=e.parent,r=e.children;(n||[]).forEach((function(n){if(!(t.nodesInCollectionMap.get(e.key)||t.nodesInCollectionMap.get(n.key))){var r="\n\t\t\t\t\t".concat(n.key,"->").concat(e.key,' [id="edgePre_').concat(n.key,"_edge_").concat(e.key,'"];');-1===a.indexOf(r)&&a.push(r)}})),(r||[]).forEach((function(n){if(!(t.nodesInCollectionMap.get(e.key)||t.nodesInCollectionMap.get(n.key))){var r="\n\t\t\t\t\t".concat(e.key,"->").concat(n.key,' [id="edgePre_').concat(e.key,"_edge_").concat(n.key,'"];');-1===a.indexOf(r)&&a.push(r)}}))})),a}},{key:"backRenderHandle",value:function(){var e=this,t=this,a=new Map;g.td_("title").remove(),g.td_(".node").each((function(t){try{var n,r=t.key,i=null===(n=e.dataMap)||void 0===n?void 0:n.get(r),c=y[(null===i||void 0===i?void 0:i.data_fields)||""]||N[0],s=g.td_("#".concat(r," polygon")).datum(),d={renderInfo:t,renderId:r,data:i,theme:c,id:r,x:s.center.x,y:s.center.y};a.set(r,d),g.td_("#".concat(r,' text[fill="#000000"]')).attr("type","mainText")}catch(o){console.log(o)}})),this.renderNodesMap=a,this.beautifulNode();var n=null;g.td_('.node[type="collect"]').on("click",(function(e,a){clearTimeout(n),n=setTimeout((function(){t.handleNodeClick&&t.handleNodeClick(e)}),200)}));var r=document.getElementById("d3MainView");r&&(r.onclick=function(e){for(var a=!1,n=0;n<e.path.length;n++){var r=e.path[n];if(r.id&&~r.id.indexOf("node_")){a=!0;break}}a||t.refresh()})}},{key:"beautifulNode",value:function(){var e=this,t=this,a=g.td_(".node polygon").data();console.log("boxs",a),a.forEach((function(a){var n,r=a.bbox,i=a.parent.key,c=null===(n=e.dataMap)||void 0===n?void 0:n.get(i);c&&(g.Ys("#".concat(i)).remove(),g.Ys("#mainGroup").append("g").attr("id",i).attr("class","node").attr("type","normal").on("click",(function(e,a){var n,r=null===(n=t.renderNodesMap)||void 0===n?void 0:n.get(this.id);r&&t.highlightRelation(r),t.handleNodeClick&&t.handleNodeClick(null===r||void 0===r?void 0:r.data)})).append("rect").attr("id","rect_".concat(i)).attr("x",r.x).attr("y",r.y).attr("rx",r.height/2).attr("ry",r.height/2).attr("width",r.width).attr("height",r.height).attr("fill","#fff").attr("stroke","#cdcdcd").attr("stroke-width",1).attr("style","transition:all 0.3s;"),g.Ys("#".concat(i)).append("path").attr("d","M".concat(r.x," ").concat(r.cy," L").concat(r.x+2*r.width/3," ").concat(r.cy)).attr("stroke","#cdcdcd").attr("stroke-dasharray","5,5"),g.Ys("#".concat(i)).append("rect").attr("class","rectBg").attr("x",r.x).attr("y",r.y).attr("rx",r.height/2).attr("ry",r.height/2).attr("width",r.height).attr("height",r.height).attr("fill",c.color),g.Ys("#".concat(i)).append("rect").attr("class","rectBg").attr("id","iconRect_".concat(i)).attr("x",r.x+r.height/4).attr("y",r.y).attr("rx",r.height/2).attr("ry",r.height/2).attr("width",r.height/2).attr("height",r.height).attr("fill",c.color).attr("style","transition:all 0.3s;"),g.Ys("#".concat(i)).append("g").attr("id","icon_".concat(i)).html(c.icon),g.Ys("#icon_".concat(i," svg")).attr("fill","#fff").attr("width",r.height/2).attr("height",r.height/2).attr("x",r.x+r.height/4).attr("y",r.y+.23*r.height),g.Ys("#".concat(i)).append("text").text(c.title).attr("class","nodeType").attr("x",r.x+1.2*r.height).attr("y",r.y+.75*r.height/2).attr("width",r.height).attr("height",r.height).attr("font-weight","bold").attr("fill",c.color),g.Ys("#".concat(i)).on("mouseover",(function(e){g.Ys("#rect_".concat(i)).attr("stroke",c.color),g.Ys("#iconRect_".concat(i)).attr("rx",0).attr("ry",0).attr("x",r.x+r.height/2)})).on("mouseout",(function(e){g.Ys("#rect_".concat(i)).attr("stroke","#cdcdcd"),g.Ys("#iconRect_".concat(i)).attr("rx",r.height/2).attr("ry",r.height/2).attr("x",r.x+r.height/4)})),g.Ys("#".concat(i)).append("text").text(c.name).attr("class","nodeContent").attr("x",r.x+1.2*r.height).attr("y",r.y+.8*r.height).attr("width",r.height).attr("height",r.height),g.Ys("#".concat(i)).append("g").attr("id","icon_status_text_".concat(i)).append("text").text(c.status.label).attr("x",r.x+r.width-2.8*r.height/3).attr("y",r.y+.6*r.height/2))}))}},{key:"handleCollectExpand",value:function(e){var t,a,n=this.dataMap.get(e),i=null===n||void 0===n?void 0:n.relativeKey,c=(null===n||void 0===n?void 0:n.parent)||[],s=(0,r.Z)(c,1)[0],d=(null===n||void 0===n?void 0:n.children)||[],o=(0,r.Z)(d,1)[0],l=s&&(null===(t=this.dataMap)||void 0===t?void 0:t.get(s.key)),_=o&&(null===(a=this.dataMap)||void 0===a?void 0:a.get(o.key));if(l&&n&&"children"===i){var u=l.collectionChildren||[],p=l.children||[],m=l.children.pop(),v=u.shift();if(v){this.nodesInCollectionMap.delete(v.key);for(var f=(0,h.Z)(v.children);f.length;){var x=f.shift();x&&(this.nodesInCollectionMap.delete(x.key),f.push.apply(f,(0,h.Z)(x.children||[])))}n.collectNum=(n.collectNum||0)-1,n.collectionNodes=u,l.collectionChildren=u,u.length?l.children=[].concat((0,h.Z)(p),[v,m]):l.children=[].concat((0,h.Z)(p),[v])}}if(_&&n&&"parent"===i){var g=_.collectionParent||[],E=_.parent||[],j=_.parent.pop(),N=g.shift();if(N){this.nodesInCollectionMap.delete(N.key);for(var y=(0,h.Z)(N.parent);y.length;){var M=y.shift();M&&(this.nodesInCollectionMap.delete(M.key),y.push.apply(y,(0,h.Z)(M.parent||[])))}n.collectNum=(n.collectNum||0)-1,n.collectionNodes=g,_.collectionParent=g,g.length?_.parent=[].concat((0,h.Z)(E),[N,j]):_.parent=[].concat((0,h.Z)(E),[N])}}}},{key:"renderNode",value:function(e,t){var a=this;this.loadingStart&&this.loadingStart();var n=this.createRenderNodes(e,t),r=this.cerateRenderNodesRelation(e),i='digraph  {\n\t\t\tid=mainGroup;\n\t\t\trankdir = LR;\n\t\t\tranksep = 1;\n\t\t\tnodesep = 1;\n\t\t\tedge [color="#cdcdcd"];\n\t\t\t'.concat(n.join(" ")," ").concat(r.join(" "),"\n        }");g.Ys("#gNode").graphviz({zoom:!1,zoomTranslateExtent:[0,0]}).dot(i);return new Promise((function(e,t){setTimeout((function(){try{g.Ys("#gNode").graphviz({zoom:!1,zoomTranslateExtent:[0,0]}).renderDot(i)}catch(t){console.log(t)}a.backRenderHandle(),a.loadingEnd&&a.loadingEnd(),e("")}),0)}))}},{key:"highlightRelation",value:function(e){var t,a;g.td_(".node polygon").attr("stroke","#cdcdcd").attr("fill","#ffffff"),g.td_(".node text").attr("fill","#cdcdcd"),g.td_(".node .rectBg").attr("fill","#cdcdcd"),g.td_(".edge path").attr("stroke","#cdcdcd"),g.td_(".edge polygon").attr("stroke","#cdcdcd").attr("fill","#cdcdcd");var n=this.treeCutNode([e.data],"parent","key",null===(t=this.rootNode)||void 0===t?void 0:t.key),r=this.treeCutNode([e.data],"children","key",null===(a=this.rootNode)||void 0===a?void 0:a.key),i=this.tree2List(n,"parent"),c=this.tree2List(r,"children");console.log("nodeParentList",i);for(var s=0;s<i.length;s++){var d=i[s];if(d){var o=d.color;g.td_("#".concat(d.key," .rectBg")).attr("fill",o),g.td_("#".concat(d.key," .nodeType")).attr("fill",o),g.td_("#".concat(d.key," .nodeContent")).attr("fill","#000")}if(d&&d.parent&&d.parent.length)for(var l=0;l<d.parent.length;l++){var _=d.parent[l],h="edgePre_".concat(_.key,"_edge_").concat(d.key);g.td_("#".concat(h," path")).attr("stroke","#1e1653"),g.td_("#".concat(h," polygon")).attr("stroke","#1e1653").attr("fill","#1e1653")}}for(var u=0;u<c.length;u++){var p=c[u];if(p){var m=p.color;g.td_("#".concat(p.key," .rectBg")).attr("fill",m),g.td_("#".concat(p.key," .nodeType")).attr("fill",m),g.td_("#".concat(p.key," .nodeContent")).attr("fill","#000")}if(p&&p.children&&p.children.length)for(var v=0;v<p.children.length;v++){var f=p.children[v],x="edgePre_".concat(p.key,"_edge_").concat(f.key);g.td_("#".concat(x," path")).attr("stroke","#1e1653"),g.td_("#".concat(x," polygon")).attr("stroke","#1e1653").attr("fill","#1e1653")}}}},{key:"refresh",value:function(){console.log("refresh");for(var e=this.dataNodes,t=0;t<e.length;t++){var a=e[t];if("COLLECT"!==(null===a||void 0===a?void 0:a.data_fields)){if(a){var n=a.color;g.td_("#".concat(a.key," .rectBg")).attr("fill",n),g.td_("#".concat(a.key," .nodeType")).attr("fill",n),g.td_("#".concat(a.key," .nodeContent")).attr("fill","#000")}if(a&&a.parent&&a.parent.length)for(var r=0;r<a.parent.length;r++){var i=a.parent[r],c="edgePre_".concat(i.key,"_edge_").concat(a.key);g.td_("#".concat(c," path")).attr("stroke","#cdcdcd"),g.td_("#".concat(c," polygon")).attr("stroke","#cdcdcd").attr("fill","#cdcdcd")}}else g.td_("#".concat(a.key," polygon")).attr("stroke","#000000"),g.Ys("#".concat(a.key," text")).attr("fill","#000000")}for(var s=0;s<e.length;s++){var d=e[s];if("COLLECT"!==(null===d||void 0===d?void 0:d.data_fields)){if(d){var o=d.color;g.td_("#".concat(d.key," .rectBg")).attr("fill",o),g.td_("#".concat(d.key," .nodeType")).attr("fill",o),g.td_("#".concat(d.key," .nodeContent")).attr("fill","#000")}if(d&&d.children&&d.children.length)for(var l=0;l<d.children.length;l++){var _=d.children[l],h="edgePre_".concat(d.key,"_edge_").concat(_.key);g.td_("#".concat(h," path")).attr("stroke","#cdcdcd"),g.td_("#".concat(h," polygon")).attr("stroke","#cdcdcd").attr("fill","#cdcdcd")}}else g.td_("#".concat(d.key," polygon")).attr("stroke","#000000"),g.Ys("#".concat(d.key," text")).attr("fill","#000000")}}},{key:"anchorNode",value:function(e){var t;this.resetNode(this.activeNodeId||"");var a=g.Ys("#mainGroup").datum().translation.y,n=null===(t=this.renderNodesMap)||void 0===t?void 0:t.get(e);if(n){var r=-n.x*(96/72)+this.innerWidth/2+100,i=-(a- -n.y)*(96/72)+this.innerHeight/2;this.mainView.call(this.zoom.transform,g.CRH.translate(r,i).scale(1))}this.activeNode(e)}},{key:"centerApp",value:function(){this.resetNode(this.activeNodeId||"");var e=g.Ys("#scaleView").node().getBBox(),t=e.width/2,a=this.innerWidth/2-t,n=e.height/2,r=this.innerHeight/2-n-250;this.mainView.call(this.zoom.transform,g.CRH.translate(a,r).scale(1))}},{key:"activeNode",value:function(e){var t,a,n=null===(t=this.renderNodesMap)||void 0===t?void 0:t.get(e),r=null===(a=this.dataMap)||void 0===a?void 0:a.get(e);this.activeNodeId&&g.td_("#".concat(this.activeNodeId," .nodeContent")).attr("fill","#000"),n&&r&&(this.activeNodeId=e)}},{key:"resetNode",value:function(e){var t,a,n=null===(t=this.renderNodesMap)||void 0===t?void 0:t.get(e),r=null===(a=this.dataMap)||void 0===a?void 0:a.get(e);n&&r&&g.td_("[node_id=value".concat(n.renderId,"]")).attr("fill","#000000")}}]),a}(j);function D(e){var t=(0,n.useState)(!1),h=(0,r.Z)(t,2),u=h[0],p=h[1],m=(0,n.useState)(!1),v=(0,r.Z)(m,2),f=v[0],x=v[1],g=(0,n.useState)(!1),E=(0,r.Z)(g,2),j=E[0],N=E[1],y=(0,n.useState)([]),D=(0,r.Z)(y,2),k=D[0],b=D[1],C=(0,n.useState)(!1),P=(0,r.Z)(C,2),O=P[0],w=P[1],I=(0,n.useState)(),T=(0,r.Z)(I,2),B=T[0],R=T[1],Z=(0,n.useRef)(),A=(0,n.useState)(),L=(0,r.Z)(A,2),U=L[0],W=L[1],K=(0,n.useRef)(U);(0,n.useEffect)((function(){var e,t=new M({containerId:"d3Container",mainViewId:"d3MainView",margin:16});e=t,K.current=e,W(e);var a=document.getElementById("resizeIframe");a.contentWindow&&(a.contentWindow.onresize=function(){setTimeout((function(){var e;console.log(K.current),null===(e=K.current)||void 0===e||e.reSize()}),1e3)})}),[]),(0,n.useEffect)((function(){if(U){var e=(0,l.jS)("backurl")||"";z(e)}}),[U]);var S=function(e){console.log(e);var t=U&&U.dataMap&&U.dataMap.get(e.key);console.log("currentNode",t),b([]),w(!0),x(!0),(0,s.ny)((null===t||void 0===t?void 0:t.detail_url)||"").then((function(e){console.log(e.data.result.detail);var t=e.data.result.detail;b(t),w(!1)})).catch((function(){w(!1)}))},z=function(e){U&&(e?(p(!0),(0,s.dD)(e).then((function(e){var t=e.data.result.dag||[],a=e.data.result.layout||{};Z.current=t,t.length?N(!1):N(!0),U.initData(t),U.handleNodeClick=S,U.loadingStart=function(){p(!0)},U.loadingEnd=function(){p(!1)},R(a)})).catch((function(e){console.log(e),N(!0)})).finally((function(){p(!1)}))):(U.initData([]),N(!0)))};return(0,d.jsxs)("div",{className:"p-r h100",id:"fullContainer",children:[(0,d.jsx)("iframe",{id:"resizeIframe",src:"",frameBorder:"0",className:"p-a z-1",style:{width:"100%",height:"100%"}}),u?(0,d.jsx)("div",{className:"p-a w100 h100 d-f ac jc mark z999 fadein",children:(0,d.jsx)(i.Z,{spinning:u,indicator:(0,d.jsx)(o,{}),children:(0,d.jsx)("div",{})})}):null,(0,d.jsx)(c.Z,{title:"\u8282\u70b9\u8be6\u60c5",width:800,closable:!1,onClose:function(){x(!1)},visible:f,className:"nodedetail-wapper",children:(0,d.jsx)(i.Z,{spinning:O,children:(0,d.jsx)(_.Z,{data:k})})}),j?(0,d.jsx)("div",{className:"p-a w100 h100 d-f ac jc ta-c z1",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{children:(0,d.jsx)("img",{className:"w320",src:a(96726),alt:""})}),(0,d.jsx)("div",{className:"fs22",children:"\u6682\u65e0\u6570\u636e"})]})}):null,(0,d.jsxs)("div",{className:"d-f fd-c h100 ov-h",children:[(0,d.jsxs)("div",{className:"tree-header",children:[(0,d.jsxs)("div",{className:"p16 d-f jc-b ac",children:[(0,d.jsxs)("div",{className:"d-f ac",children:[(0,d.jsx)("span",{className:"icon-custom",dangerouslySetInnerHTML:{__html:(null===B||void 0===B?void 0:B.icon)||""}}),(0,d.jsx)("span",{className:"ml8 fs18",children:null===B||void 0===B?void 0:B.title})]}),(0,d.jsx)("div",{children:null===B||void 0===B?void 0:B.right_button.map((function(e){return(0,d.jsx)("div",{onClick:function(){window.open(e.url,"blank")},className:"c-text-w ml8 btn-ghost d-il",children:e.label})}))})]}),(0,d.jsx)("div",{className:"header-detail p16 d-f",children:((null===B||void 0===B?void 0:B.detail)||[]).map((function(e){return(0,d.jsx)("div",{className:"flex1 mr48 header-detail-item",children:e.map((function(e){return(0,d.jsxs)("div",{className:"pb2",children:[e.label,"\uff1a",e.value]})}))})}))})]}),(0,d.jsx)("div",{id:"d3Container",className:"flex1",children:(0,d.jsx)("svg",{id:"d3MainView"})})]})]})}function k(){return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(D,{})})}function b(){return(0,d.jsx)("div",{className:"fade-in h100 d-f fd-c",children:(0,d.jsx)(k,{})})}},94119:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return NodeDetail}});var _Users_flytengzeng_Desktop_workspace_office_cube_studio_myapp_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(93433),_Users_flytengzeng_Desktop_workspace_office_cube_studio_myapp_frontend_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(4942),_Users_flytengzeng_Desktop_workspace_office_cube_studio_myapp_frontend_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1413),_Users_flytengzeng_Desktop_workspace_office_cube_studio_myapp_frontend_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(29439),antd__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(2704),antd__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(10089),antd__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(35492),antd__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(80211),antd__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(12513),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4519),react_copy_to_clipboard__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(17972),react_copy_to_clipboard__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react_copy_to_clipboard__WEBPACK_IMPORTED_MODULE_1__),_ant_design_icons__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(4316),_components_TableBox_TableBox__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(76877),_components_EchartCore_EchartCore__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(54189),_api_commonPipeline__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(89839),_NodeDetail_less__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(38188),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2556);function NodeDetail(props){var _useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),_useState2=(0,_Users_flytengzeng_Desktop_workspace_office_cube_studio_myapp_frontend_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_7__.Z)(_useState,2),isSqlVisable=_useState2[0],setIsSqlVisable=_useState2[1],_useState3=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(),_useState4=(0,_Users_flytengzeng_Desktop_workspace_office_cube_studio_myapp_frontend_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_7__.Z)(_useState3,2),currentDataItem=_useState4[0],setCurrentDataItem=_useState4[1],_useState5=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({}),_useState6=(0,_Users_flytengzeng_Desktop_workspace_office_cube_studio_myapp_frontend_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_7__.Z)(_useState5,2),nodeInfoApiMap=_useState6[0],_setNodeInfoApiMap=_useState6[1],nodeInfoApiMapRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(nodeInfoApiMap),setNodeInfoApiMap=function(e){nodeInfoApiMapRef.current=e,_setNodeInfoApiMap(e)};(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var e=[],t=[];props.data.forEach((function(a){a.content.forEach((function(n){if("api"===n.groupContent.type){var r=(0,_api_commonPipeline__WEBPACK_IMPORTED_MODULE_4__.B6)(n.groupContent.value);e.push(r),t.push("".concat(a.tabName,"_").concat(n.groupName))}}))})),console.log("apiList",e),Promise.all(e).then((function(e){var a=e.map((function(e){return e.data.result})).reduce((function(e,a,n){return(0,_Users_flytengzeng_Desktop_workspace_office_cube_studio_myapp_frontend_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_8__.Z)((0,_Users_flytengzeng_Desktop_workspace_office_cube_studio_myapp_frontend_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_8__.Z)({},e),{},(0,_Users_flytengzeng_Desktop_workspace_office_cube_studio_myapp_frontend_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_9__.Z)({},t[n],(0,_Users_flytengzeng_Desktop_workspace_office_cube_studio_myapp_frontend_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_8__.Z)({},a)))}),{});setNodeInfoApiMap(a)}))}),[props.data]);var handelNodeDetailTable=function(e){try{JSON.parse("".concat(e.value||[]))}catch(n){console.log(n)}var t=JSON.parse("".concat(e.value||"[]")),a=Object.entries(t[0]||{}).reduce((function(e,t){var a=(0,_Users_flytengzeng_Desktop_workspace_office_cube_studio_myapp_frontend_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_7__.Z)(t,2),n=a[0];a[1];return[].concat((0,_Users_flytengzeng_Desktop_workspace_office_cube_studio_myapp_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_10__.Z)(e),[{title:n,dataIndex:n,key:n}])}),[]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(antd__WEBPACK_IMPORTED_MODULE_11__.Z,{span:16,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_components_TableBox_TableBox__WEBPACK_IMPORTED_MODULE_2__.Z,{rowKey:function(e){return JSON.stringify(e)},size:"small",cancelExportData:!0,columns:a,pagination:!1,dataSource:t})})},handleNodeDetail=function(e){switch(e.type){case"sql":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_11__.Z,{span:16,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"ellip3",style:{wordBreak:"break-word",whiteSpace:"pre-wrap"},children:e.value}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("span",{className:"link cp mr16",onClick:function(){setIsSqlVisable(!0),setCurrentDataItem(e)},children:"\u8be6\u60c5"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(react_copy_to_clipboard__WEBPACK_IMPORTED_MODULE_1__.CopyToClipboard,{text:"".concat(e.value||""),onCopy:function(){antd__WEBPACK_IMPORTED_MODULE_12__.ZP.success("\u5df2\u6210\u529f\u590d\u5236\u5230\u7c98\u8d34\u677f")},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("span",{className:"link cp",children:["\u590d\u5236",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_13__.Z,{})]})})]})]});case"table":return handelNodeDetailTable(e)}var t=e.value;return"us_id"===e.key&&(t=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("span",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("a",{target:"_blank",href:"https://us.woa.com/#/taskManage/instance/".concat(e.value,"?inChargeType=0&search%7Citem.keywords%7CpageIndex%7CpageSize=%5B%7B%22taskId%22%3A%22").concat(e.value,"%22%7D%5D%5B1%5D%5B50%5D&searchNext%7CcycleUnit%7CpageIndex=%5BD%5D%5B1%5D&locale=zh_CN"),rel:"noreferrer",children:e.value})})),"lifecycle"===e.key&&(t=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("span",{children:[e.value,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("a",{className:"pl8",target:"_blank",href:"http://tdwhelper.oa.com/storage_stat/storage_path_info.php",rel:"noreferrer",children:"\u4fee\u6539\u751f\u547d\u5468\u671f"})]})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(antd__WEBPACK_IMPORTED_MODULE_11__.Z,{span:16,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("span",{style:{wordBreak:"break-word",whiteSpace:"pre-wrap"},children:t})})},handleGroupContent=function(e,t,a,n){switch(e){case"map":return renderMapComponent(t);case"echart":return renderEchart(t);case"text":return renderMapText(t);case"iframe":return renderMapIframe(t);case"html":return renderHtml(t);case"api":return renderApi(t,a,n);default:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("span",{style:{wordBreak:"break-word",whiteSpace:"pre-wrap"},children:t})}},renderApi=function(e,t,a){var n="".concat(t,"_").concat(a);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{children:nodeInfoApiMapRef.current[n]?nodeInfoApiMapRef.current[n].value:""})},renderHtml=function(e){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{dangerouslySetInnerHTML:{__html:e}})},renderMapComponent=function(e){var t=Object.entries(e).reduce((function(e,t){var a=(0,_Users_flytengzeng_Desktop_workspace_office_cube_studio_myapp_frontend_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_7__.Z)(t,2),n=a[0],r=a[1];return[].concat((0,_Users_flytengzeng_Desktop_workspace_office_cube_studio_myapp_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_10__.Z)(e),[{label:n,value:r}])}),[]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"bg-title p16",children:t.map((function(e,t){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_14__.Z,{className:"mb8 w100",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(antd__WEBPACK_IMPORTED_MODULE_11__.Z,{span:8,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"ta-l",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("strong",{children:[e.label,"\uff1a"]})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(antd__WEBPACK_IMPORTED_MODULE_11__.Z,{span:16,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("span",{style:{wordBreak:"break-word",whiteSpace:"pre-wrap"},children:e.value})})]},"nodeDetailItem_".concat(t))}))})},renderEchart=function renderEchart(data){var currentOps={};return eval("currentOps=".concat(data)),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"bg-title p16",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_components_EchartCore_EchartCore__WEBPACK_IMPORTED_MODULE_3__.Z,{option:currentOps,loading:!1})})},renderMapText=function(e){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"p16 bg-title",style:{wordBreak:"break-word",whiteSpace:"pre-wrap"},children:e})},renderMapIframe=function(e){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("iframe",{src:e.url,allowFullScreen:!0,allow:"microphone;camera;midi;encrypted-media;",className:"w100 fade-in",style:{border:0,height:500}})};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(antd__WEBPACK_IMPORTED_MODULE_15__.Z,{className:"nodedetail-tab",children:props.data.map((function(e,t){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(antd__WEBPACK_IMPORTED_MODULE_15__.Z.TabPane,{tab:e.tabName,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"d-f fd-c jc-b h100",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"flex1",children:e.content.map((function(t,a){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"mb32",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"fs16 mb16 bor-l b-theme pl4",style:{borderLeftWidth:2},children:t.groupName}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{children:handleGroupContent(t.groupContent.type,t.groupContent.value,e.tabName,t.groupName)})]},"nodeGroup".concat(a))}))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"nodedetail-tool",children:e.bottomButton.map((function(e){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_16__.Z,{className:"mr12 icon-tool-wrapper",onClick:function(){window.open(e.url,"blank")},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("span",{className:"icon-tool",dangerouslySetInnerHTML:{__html:e.icon}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("span",{className:"ml6",children:e.text})]})}))})]})},"nodeDetailTab".concat(t))}))})})}},38188:function(){},46825:function(){},35159:function(){},75701:function(){}}]);
//# sourceMappingURL=46.87cda00f.chunk.js.map