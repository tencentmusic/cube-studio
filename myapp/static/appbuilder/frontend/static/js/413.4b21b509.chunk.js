"use strict";(self.webpackChunkkubeflow_frontend=self.webpackChunkkubeflow_frontend||[]).push([[413],{6857:function(e,n,t){t.d(n,{Z:function(){return o}});var a=t(29439),r=t(7517),i=t(10007),s=t(4519),c=t(2556);function o(e){var n,t=Math.random().toString(36).substring(2),o=(0,s.useState)(e.options||[]),l=(0,a.Z)(o,2),u=l[0],d=l[1],h=(0,s.useState)(e.value||""),f=(0,a.Z)(h,2),m=f[0],p=f[1];(0,s.useEffect)((function(){var n=e.isOpenSearchMatch?(e.options||[]).filter((function(e){return-1!==e.indexOf(m)})):e.options||[];d(n)}),[e.options]),(0,s.useEffect)((function(){p(e.value||"")}),[e.value]);var x=function(n){p(n),e.onChange&&e.onChange(n)},g=function(e){var n=m,t=e.indexOf(m);if(-1===t)return(0,c.jsx)("span",{children:e});var a=e.substring(0,t),r=e.substring(t+m.length);return(0,c.jsxs)("span",{children:[a,(0,c.jsx)("span",{className:"highlight",children:n}),r]})},v=function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return function(){for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];clearTimeout(n),n=setTimeout((function(){e&&e.apply(null,[].concat(r))}),t)}}(e.onScrollButtom);return(0,c.jsxs)("div",{className:"select-down-modern",children:[e.labelName?(0,c.jsx)("label",{htmlFor:t,className:"pb4 mb0 fs12 d-b",children:e.labelName}):null,(0,c.jsxs)("div",{className:"p-r d-f ac",style:{width:e.width||"100%"},children:[(0,c.jsx)(i.Z,{style:{width:"100%"},disabled:e.disabled,id:t,placeholder:e.placeholder||"",maxLength:e.maxLength||200,onChange:function(e){return x(e.target.value)},onKeyPress:function(t){13===t.nativeEvent.keyCode&&(n.blur&&n.blur(),e.onSearch&&e.onSearch(t.currentTarget.value))},value:m,ref:function(e){return n=e}}),(0,c.jsx)(r.Z,{className:"p-a r0 mr8"})]}),u.length?(0,c.jsxs)("ul",{className:"select-option shadow",onScroll:function(n){n.stopPropagation();var t=n.currentTarget,a=t.scrollTop,r=t.clientHeight;t.scrollHeight-r-a<20&&e.onScrollButtom&&v()},style:{maxHeight:"".concat(e.maxHeight,"px")},children:[e.loading?(0,c.jsx)("div",{className:"p-s z9 ta-r",style:{right:"".concat(0,"px"),top:"".concat(0,"px")},children:(0,c.jsx)("div",{className:"d-il p-a",style:{right:"".concat(8,"px"),top:"".concat(0,"px")}})}):null,u.map((function(n,t){return(0,c.jsx)("li",{className:"ellip1",onMouseDown:function(){return function(n){x(n),e.onClick&&e.onClick(n)}(n)},children:g(n)},t)}))]}):null]})}},76877:function(e,n,t){t.d(n,{Z:function(){return E}});var a=t(93433),r=t(29439),i=t(1413),s=t(45987),c=t(4519),o=t(35492),l=t(20011),u=t(79551),d=t(28532),h=t(12513),f=t(80211),m=t(10089),p=t(2704),x=t(25738),g=t(80995),v=t.p+"static/media/emptyBg.15fdf5f39309784ac66e.png",Z=t(24520),j=t.n(Z),b=t(74308),N=t(2556),S=["onResize","width"],w=t(17972),y=function(){return(0,N.jsxs)(o.Z,{justify:"center",align:"middle",style:{height:360,flexDirection:"column"},children:[(0,N.jsx)("img",{src:v,style:{width:266},alt:""}),(0,N.jsx)("div",{children:"\u6682\u65e0\u6570\u636e"})]})},C=function(e){var n=e.onResize,t=e.width,a=(0,s.Z)(e,S);return t?(0,N.jsx)(b.Resizable,{width:t,height:0,handle:(0,N.jsx)("span",{className:"react-resizable-handle",onClick:function(e){e.stopPropagation()}}),onResize:n,draggableOpts:{enableUserSelectHack:!1},children:(0,N.jsx)("th",(0,i.Z)((0,i.Z)({},a),{},{style:(0,i.Z)((0,i.Z)({},null===a||void 0===a?void 0:a.style),{},{userSelect:"none"})}))}):(0,N.jsx)("th",(0,i.Z)({},a))},E=function(e){var n=(0,c.useState)(!1),t=(0,r.Z)(n,2),s=t[0],v=t[1],Z=(0,c.useState)({header:[],data:[]}),b=(0,r.Z)(Z,2),S=b[0],E=b[1],k=(0,c.useState)([]),I=(0,r.Z)(k,2),T=I[0],O=I[1],P=(0,c.useState)(e.columns),R=(0,r.Z)(P,2),M=R[0],D=R[1],A=function(n){return function(t,r){var s=r.size;if(!(s.width<100)){var c=(0,a.Z)(M);c[n]=(0,i.Z)((0,i.Z)({},c[n]),{},{width:s.width});var o=c.reduce((function(e,n){return e+n.width||100}),0)+200;localStorage.setItem(e.tableKey||"",JSON.stringify(c)),_((0,i.Z)((0,i.Z)({},U),{},{x:o})),D(c)}}},L=M.map((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},{width:e.width||200,onHeaderCell:function(e){return{width:e.width,onResize:A(n)}}})})),H=(0,c.useState)(e.scroll),F=(0,r.Z)(H,2),U=F[0],_=F[1];(0,c.useEffect)((function(){D(e.columns)}),[e.columns]),(0,c.useEffect)((function(){_(e.scroll)}),[e.scroll]),(0,c.useEffect)((function(){if(e.dataSource){var n=e.columns.filter((function(e){return~T.indexOf(e.dataIndex)}));z(n,e.dataSource)}}),[e.dataSource,e.columns]);var z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=e.map((function(e){return e.dataIndex})).filter((function(e){return"handle"!==e})),a=e.map((function(e){return e.title})).filter((function(e){return"\u64cd\u4f5c"!==e})),r=[];n.forEach((function(e){var n={};t.map((function(t){var a=e[t];n[t]=a||""})),r.push(n)})),E({header:a,data:r})},B=function(){var e=S.header,n=S.data,t="";return e.length&&n.length?(t="|"+e.join("|")+"|\n",n.forEach((function(e){var n=Object.values(e).map((function(e){return""===e?" ":e}));t=t+"|"+n.join("|")+"|\n"}))):t="",t},V=function(){var e=S.header,n=S.data,t="";return e.length&&n.length?(t=e.join("\t")+"\n",n.forEach((function(e){var n=Object.values(e).map((function(e){return""===e?" ":e}));t=t+n.join("\t")+"\n"}))):t="",t};return(0,N.jsxs)(l.Z,{className:"tablebox",direction:"vertical",size:"middle",children:[(0,N.jsxs)(u.Z,{width:1e3,maskClosable:!1,centered:!0,bodyStyle:{maxHeight:500,overflow:"auto"},visible:s,title:"\u5bfc\u51fa\u6570\u636e",onCancel:function(){v(!1)},footer:null,children:[(0,N.jsxs)("div",{style:{position:"relative"},children:[(0,N.jsxs)("div",{className:"mb16",children:[(0,N.jsx)("span",{className:"pr8",children:"\u9009\u62e9\u9700\u8981\u5bfc\u51fa\u7684\u5217\uff1a"}),(0,N.jsx)(d.Z.Group,{options:e.columns.map((function(e){return{label:e.title,value:e.dataIndex}})).filter((function(e){return"handle"!==e.value})),defaultValue:[],value:T,onChange:function(n){O(n);var t=e.columns.filter((function(e){return~n.indexOf(e.dataIndex)}));z(t,e.dataSource)}})]}),(0,N.jsxs)("div",{style:{position:"absolute",right:0,bottom:0},children:[(0,N.jsx)(h.Z,{size:"small",type:"link",onClick:function(){O(e.columns.map((function(e){return e.dataIndex})).filter((function(e){return"handle"!==e}))),z(e.columns,e.dataSource)},children:"\u5168\u9009"}),(0,N.jsx)(h.Z,{size:"small",type:"link",onClick:function(){O([]),z([],e.dataSource)},children:"\u53cd\u9009"})]})]}),(0,N.jsxs)(f.Z,{children:[(0,N.jsx)(f.Z.TabPane,{tab:"Wiki\u683c\u5f0f",children:(0,N.jsx)(w,{text:B(),onCopy:function(){return m.ZP.success("\u5df2\u590d\u5236\u5230\u7c98\u8d34\u677f")},children:(0,N.jsx)("pre",{style:{cursor:"pointer",minHeight:100},children:(0,N.jsx)("code",{children:B()})})})},"jira"),(0,N.jsx)(f.Z.TabPane,{tab:"Text\u683c\u5f0f",children:(0,N.jsx)(w,{text:V(),onCopy:function(){return m.ZP.success("\u5df2\u590d\u5236\u5230\u7c98\u8d34\u677f")},children:(0,N.jsx)("pre",{style:{cursor:"pointer",minHeight:100},children:(0,N.jsx)("code",{children:V()})})})},"test"),(0,N.jsx)(f.Z.TabPane,{tab:"Excel\u683c\u5f0f",children:(0,N.jsx)(o.Z,{justify:"center",align:"middle",style:{minHeight:100},children:(0,N.jsx)(p.Z,{children:(0,N.jsx)(h.Z,{type:"primary",onClick:function(){var e={fileName:"result"};e.datas=[{sheetData:S.data,sheetName:"sheet",sheetHeader:S.header}],new(j())(e).saveExcel()},children:"\u5bfc\u51faExcel"})})})},"excel")]})]}),e.titleNode||e.buttonNode||!e.cancelExportData?(0,N.jsxs)(o.Z,{justify:"space-between",align:"middle",children:[(0,N.jsx)(p.Z,{children:(0,N.jsx)(l.Z,{align:"center",children:e.titleNode})}),(0,N.jsx)(p.Z,{children:(0,N.jsxs)(l.Z,{align:"center",children:[e.buttonNode,e.cancelExportData?null:(0,N.jsx)(h.Z,{style:{marginLeft:6},onClick:function(){return v(!0)},children:"\u5bfc\u51fa\u6570\u636e"})]})})]}):null,(0,N.jsx)(x.ZP,{renderEmpty:y,children:(0,N.jsx)(g.Z,{size:e.size||"middle",rowKey:e.rowKey?e.rowKey:"id",dataSource:e.dataSource,components:{header:{cell:C}},columns:L,pagination:!1!==e.pagination&&(0,i.Z)({},e.pagination),scroll:U,loading:e.loading,onChange:e.onChange,rowSelection:e.rowSelection})})]})}},4752:function(e,n,t){t.r(n),t.d(n,{default:function(){return te}});var a=t(1413),r=t(93433),i=t(29439),s=t(4942),c=t(33405),o=t(39625),l=t(18346),u=t(10089),d=t(79551),h=t(80211),f=t(86457),m=t(12513),p=t(4519),x=t(31202),g=t(41328),v=t(37090),Z=t(81535),j=t(68279),b=t(2556);function N(e){return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(g.ZP,{theme:v.F,value:e.value,onChange:e.onChange,extensions:[(0,j.i6)(),(0,Z.r)({step:2,lightColor:"#fafafa",darkColor:"#fafafa"})]})})}var S=t(6857),w=t(51216),y=t.n(w),C=t(32064),E=t(81866),k=t(56713),I=t(28501),T=t(89923),O=t(51052),P=t(93849),R=t(47474),M=t(34745),D=t(68553),A=t(36737),L=t(35492),H=t(2704),F=t(76877),U=t(96445);t(24134);function _(e){var n=(0,p.useState)(),t=(0,i.Z)(n,2),r=(t[0],t[1]),s={mode:"edit",showToolbar:!0,showGrid:!0,showContextmenu:!0,view:{height:function(){return e.height||500},width:function(){return e.width||1e3}},row:{len:100,height:25},col:{len:50,width:100,indexWidth:60,minWidth:60},style:{bgcolor:"#ffffff",align:"left",valign:"middle",textwrap:!1,strike:!1,underline:!1,color:"#0a0a0a",font:{name:"Helvetica",size:10,bold:!1,italic:!1}}};(0,p.useEffect)((function(){if(e.dataSource&&e.dataSource.length){U.Z.locale("zh-cn",window.x_spreadsheet.$messages["zh-cn"]);var n=c(e.dataSource),t=(0,a.Z)((0,a.Z)({},s),{},{name:"sheet1",rows:n,row:{len:e.dataSource.length,height:25},col:{len:e.dataSource[0].length,width:100,indexWidth:60,minWidth:60}}),i=new U.Z("#xdataspreadsheet",t).loadData({rows:n}).change((function(n){e.onChange&&e.onChange(n)}));console.log("currentOptions",t),r(i)}}),[e.dataSource]);var c=function(e){var n=e.length<50?50:e.length,t={};return e.forEach((function(e,n){var a={};Object.keys(e).forEach((function(n,t){a[t]={text:e[n]}})),t[n.toString()]={cells:a}})),(0,a.Z)({len:n},t)};return(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{style:{width:e.width||1e3},id:"xdataspreadsheet"}),e.dataSource&&e.dataSource.length?null:(0,b.jsx)("div",{className:"d-f jc ac c-hint-b h320 fs16",children:"\u6682\u65e0\u6570\u636e"})]})}var z={start:0,parse:1,execute:2,end:3},B=function(e){switch(e){case"init":case"running":return(0,b.jsx)(C.Z,{});case"failure":return(0,b.jsx)(E.Z,{style:{color:"#ff4444"}});case"stop":return(0,b.jsx)(k.Z,{});default:return null}};function V(e){var n=(0,p.useState)(!1),t=(0,i.Z)(n,2),c=t[0],o=t[1],l=(0,p.useState)(!1),h=(0,i.Z)(l,2),f=h[0],g=h[1],v=(0,p.useState)([]),Z=(0,i.Z)(v,2),j=Z[0],N=Z[1],S=(0,p.useState)(!0),w=(0,i.Z)(S,2),y=w[0],C=w[1],E=(0,p.useState)("|"),k=(0,i.Z)(E,2),U=k[0],V=k[1],W=(0,p.useRef)(U),G=function(e){W.current=e,V(e)},Y=(0,p.useState)("|"),q=(0,i.Z)(Y,2),X=q[0],K=q[1],J=(0,p.useRef)(X);return(0,b.jsxs)("div",{children:[(0,b.jsx)(d.Z,{title:"\u4e0b\u8f7d\u7ed3\u679c",visible:f,footer:null,width:1248,destroyOnClose:!0,onCancel:function(){g(!1)},children:(0,b.jsx)(P.Z,{spinning:y,children:(0,b.jsx)(_,{height:700,width:1200,dataSource:j})})}),(0,b.jsx)(d.Z,{title:"\u7ed3\u679c",visible:c,footer:null,destroyOnClose:!0,onCancel:function(){G("|"),o(!1)},children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"d-f ac pt8",children:[(0,b.jsx)("div",{className:"w96",children:"\u9009\u62e9\u5206\u9694\u7b26\uff1a"}),(0,b.jsx)(R.Z,{style:{width:256},value:W.current,options:[{label:"|",value:"|"},{label:",",value:","},{label:"TAB",value:"TAB"}],onChange:function(e){G(e)}})]}),(0,b.jsx)("div",{className:"ta-r pt16",children:(0,b.jsx)(m.Z,{type:"primary",onClick:function(){(function(e,n){return x.Z.get("/idex/download_url/".concat(e),{params:{separator:n}})})(J.current,W.current).then((function(e){window.open(e.data.download_url,"bank")})).catch((function(e){console.log(e)}))},children:"\u4e0b\u8f7d"})})]})}),(0,b.jsx)(M.Z,{className:"site-collapse-custom-collapse",defaultActiveKey:["task_0"],onChange:function(e){console.log(e)},children:(Object.entries(e.option).reduce((function(e,n){var t=(0,i.Z)(n,2),a=(t[0],t[1]);return[].concat((0,r.Z)(e),[a])}),[])||[]).reverse().filter((function(e){return!!e.reqId})).map((function(n,t){return(0,b.jsxs)(M.Z.Panel,{className:["site-collapse-custom-panel","status-".concat(n.status)].join(" "),header:"\u5b50\u4efb\u52a1".concat(n.reqId),extra:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(m.Z,{className:"mr16",type:"default",size:"small",onClick:function(t){t.stopPropagation(),e.onDelete(n.reqId)},children:["\u5220\u9664",(0,b.jsx)(I.Z,{})]}),(0,b.jsxs)(m.Z,{type:"primary",size:"small",onClick:function(t){t.stopPropagation(),e.onRetry(n.reqId)},children:["\u91cd\u8bd5",(0,b.jsx)(T.Z,{})]})]}),children:[(0,b.jsxs)(D.Z,{size:"small",current:z[n.step],children:[(0,b.jsx)(D.Z.Step,{title:"\u51c6\u5907\u5f00\u59cb",icon:0===z[n.step]?B(n.status):null}),(0,b.jsx)(D.Z.Step,{title:"\u89e3\u6790",icon:1===z[n.step]?B(n.status):null}),(0,b.jsx)(D.Z.Step,{title:"\u6267\u884c",icon:2===z[n.step]?B(n.status):null}),(0,b.jsx)(D.Z.Step,{title:"\u8f93\u51fa\u7ed3\u679c",icon:3===z[n.step]?B(n.status):null})]}),(0,b.jsx)(F.Z,{size:"small",loading:!1,cancelExportData:!0,rowKey:function(e){return JSON.stringify(e)},columns:[{title:"\u5b50\u4efb\u52a1",dataIndex:"content",key:"content",render:function(e){return(0,b.jsx)(A.Z,{placement:"top",title:e,children:(0,b.jsx)("div",{className:"ellip1 w256",children:e})})}},{title:"\u5f00\u59cb\u65f6\u95f4",dataIndex:"startime",key:"startime"},{title:"\u8fd0\u884c\u65f6\u957f",dataIndex:"duration",key:"duration"},{title:"\u72b6\u6001",dataIndex:"status",key:"status",render:function(e){return(0,b.jsx)("span",{className:["c-".concat(n.status)].join(" "),children:e})}},{title:"\u64cd\u4f5c",dataIndex:"action",key:"action",render:function(){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"link mr16",onClick:function(){d.Z.info({title:"\u4efb\u52a1\u8be6\u60c5",width:600,okText:"\u5173\u95ed",content:(0,b.jsxs)("div",{children:[(0,b.jsxs)(L.Z,{className:"mb16",children:[(0,b.jsx)(H.Z,{span:6,children:(0,b.jsx)("div",{className:"ta-r",children:(0,b.jsx)("strong",{children:"\u5f00\u59cb\u65f6\u95f4\uff1a"})})}),(0,b.jsx)(H.Z,{span:18,children:n.startTime})]}),(0,b.jsxs)(L.Z,{className:"mb16",children:[(0,b.jsx)(H.Z,{span:6,children:(0,b.jsx)("div",{className:"ta-r",children:(0,b.jsx)("strong",{children:"\u8fd0\u884c\u65f6\u957f\uff1a"})})}),(0,b.jsx)(H.Z,{span:18,children:n.duration})]}),(0,b.jsxs)(L.Z,{className:"mb16",children:[(0,b.jsx)(H.Z,{span:6,children:(0,b.jsx)("div",{className:"ta-r",children:(0,b.jsx)("strong",{children:"\u72b6\u6001\uff1a"})})}),(0,b.jsx)(H.Z,{span:18,children:n.status})]}),(0,b.jsxs)(L.Z,{className:"mb16",children:[(0,b.jsx)(H.Z,{span:6,children:(0,b.jsx)("div",{className:"ta-r",children:(0,b.jsx)("strong",{children:"\u5b50\u4efb\u52a1\u5185\u5bb9\uff1a"})})}),(0,b.jsx)(H.Z,{span:18,children:n.content})]}),(0,b.jsxs)(L.Z,{className:"mb16",children:[(0,b.jsx)(H.Z,{span:6,children:(0,b.jsx)("div",{className:"ta-r",children:(0,b.jsx)("strong",{children:"\u4efb\u52a1\u4fe1\u606f\uff1a"})})}),(0,b.jsx)(H.Z,{span:18,children:n.message})]})]}),onOk:function(){}})},children:"\u8be6\u60c5"}),"end"!==n.step||"success"!==n.status?(0,b.jsx)("span",{className:"link mr16",onClick:function(){d.Z.confirm({title:"\u7ec8\u6b62\u4efb\u52a1",icon:(0,b.jsx)(O.Z,{}),content:"",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){return new Promise((function(e,t){var a;(a=n.reqId,x.Z.get("/idex/stop/".concat(a))).then((function(n){e("")})).catch((function(e){t()}))})).then((function(e){u.ZP.success("\u7ec8\u6b62\u6210\u529f")})).catch((function(){u.ZP.error("\u7ec8\u6b62\u5931\u8d25")}))},onCancel:function(){}})},children:"\u7ec8\u6b62"}):null,n.log?(0,b.jsx)("span",{className:"link mr16",onClick:function(){window.open(n.log,"bank")},children:"\u65e5\u5fd7"}):null,"end"===n.step&&"success"===n.status?(0,b.jsx)("span",{className:"link mr16",onClick:function(){var e;C(!0),(e=n.reqId,x.Z.get("/idex/result/".concat(e))).then((function(e){g(!0);var n=function(e){var n=e[0]||[],t=e.slice(1).map((function(e){return e.reduce((function(e,t,r){return(0,a.Z)((0,a.Z)({},e),{},(0,s.Z)({},n[r],t))}),{})}));return t.unshift(n),t}(e.data.result);N(n)})).catch((function(e){})).finally((function(){C(!1)}))},children:"\u7ed3\u679c"}):null,"end"===n.step&&"success"===n.status?(0,b.jsx)("span",{className:"link",onClick:function(){var e;e=n.reqId,J.current=e,K(e),o(!0)},children:"\u4e0b\u8f7d"}):null]})}}],pagination:!1,dataSource:[{content:n.content,database:n.database||"-",table:n.table||"-",startime:n.startTime,duration:n.duration||"-",status:n.status}]})]},"task_".concat(t))}))})]})}var W=t(43077),G=t.n(W),Y=t(16548),q=t(27305),X=t(60685),K=t(8230),J=t(75262),Q=p.forwardRef((function(e,n){var t=K.Z.useForm(),r=(0,i.Z)(t,1)[0],s=(0,p.useState)();(0,i.Z)(s,2)[1];(0,p.useImperativeHandle)(n,(function(){return{onSubmit:function(){return new Promise((function(e,n){r.validateFields().then((function(n){e(n)})).catch((function(e){n(e)}))}))},setData:function(e){r.setFieldsValue(e)}}})),(0,p.useEffect)((function(){e.dataValue&&r.setFieldsValue(e.dataValue)}),[e.option]);var c=function(e,n){return(0,b.jsx)("div",{})},o=function(n,t){var i=n.value||[];return(0,b.jsx)(K.Z.Item,(0,a.Z)((0,a.Z)({label:n.label,name:n.id,rules:[{required:!0,message:"\u8bf7\u9009\u62e9".concat(n.label)}],initialValue:n.defaultValue,style:{marginBottom:0,marginRight:16}},t),{},{children:(0,b.jsx)(J.Z,{style:{width:200},mode:n.multiple?"multiple":void 0,showSearch:!0,disabled:n.disable,optionFilterProp:"label",placeholder:n.placeHolder||"\u8bf7\u9009\u62e9".concat(n.label),options:i,onChange:function(n,t){if(t.relate){for(var a=t.relate.relateId,i=t.relate.value,s=e.option,c=0;c<s.length;c++){var o=s[c];o.id===a&&(o.value=i)}e.onConfigChange&&e.onConfigChange(s)}e.onChange&&e.onChange(r.getFieldsValue())}})}),"configFormData_".concat(n.id))},l=function(n,t){var i=(n.value||[]).map((function(e){return e.value}));return(0,b.jsx)(K.Z.Item,(0,a.Z)((0,a.Z)({label:n.label,name:n.id,rules:[{required:!0,message:"\u8bf7\u9009\u62e9".concat(n.label)}],initialValue:n.defaultValue,style:{marginBottom:0}},t),{},{children:(0,b.jsx)(S.Z,{isOpenSearchMatch:!0,onChange:function(){e.onChange&&e.onChange(r.getFieldsValue())},options:i,width:"500px"})}),"configFormData_".concat(n.id))};return(0,b.jsx)("div",{className:"configformdata-container d-f ac",children:(0,b.jsxs)(K.Z,{form:r,component:!1,children:[console.log("props.option",e.option),e.option.map((function(e){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case"input":return c();case"select":return o(e,n);case"input-select":return l(e,n);default:return null}}(e)}))]})})})),$=Q,ee=(X.Z.get("myapp_username"),function(){return Math.random().toString(36).substring(2)}),ne={test:"CREATE TABLE dbo.EmployeePhoto\n    (\n        EmployeeId INT NOT NULL PRIMARY KEY,\n        Photo VARBINARY(MAX) FILESTREAM NULL,\n        MyRowGuidColumn UNIQUEIDENTIFIER NOT NULL ROWGUIDCOL\n                        UNIQUE DEFAULT NEWID()\n    );\n    \n    GO\n    \n    /*\n    text_of_comment\n    /* nested comment */\n    */\n    \n    -- line comment\n    \n    CREATE NONCLUSTERED INDEX IX_WorkOrder_ProductID\n        ON Production.WorkOrder(ProductID)\n        WITH (FILLFACTOR = 80,\n            PAD_INDEX = ON,\n            DROP_EXISTING = ON);\n    GO\n    \n    WHILE (SELECT AVG(ListPrice) FROM Production.Product) < $300\n    BEGIN\n       UPDATE Production.Product\n          SET ListPrice = ListPrice * 2\n       SELECT MAX(ListPrice) FROM Production.Product\n       IF (SELECT MAX(ListPrice) FROM Production.Product) > $500\n          BREAK\n       ELSE\n          CONTINUE\n    END\n    PRINT 'Too much for the market to bear';\n    \n    MERGE INTO Sales.SalesReason AS [Target]\n    USING (VALUES ('Recommendation','Other'), ('Review', 'Marketing'), ('Internet', 'Promotion'))\n           AS [Source] ([NewName], NewReasonType)\n    ON [Target].[Name] = [Source].[NewName]\n    WHEN MATCHED\n    THEN UPDATE SET ReasonType = [Source].NewReasonType\n    WHEN NOT MATCHED BY TARGET\n    THEN INSERT ([Name], ReasonType) VALUES ([NewName], NewReasonType)\n    OUTPUT $action INTO @SummaryOfChanges;\n    \n    SELECT ProductID, OrderQty, SUM(LineTotal) AS Total\n    FROM Sales.SalesOrderDetail\n    WHERE UnitPrice < $5.00\n    GROUP BY ProductID, OrderQty\n    ORDER BY ProductID, OrderQty\n    OPTION (HASH GROUP, FAST 10);    \n"};function te(){var e={tabId:ee(),title:"\u65b0\u67e5\u8be2 1",status:"init",smartShow:!1,smartContent:"",smartCache:"",smartTimer:void 0,loading:!1,taskMap:{}},n=JSON.parse(localStorage.getItem("dataSearch2")||JSON.stringify((0,s.Z)({},e.tabId,e))),t=Object.entries(n).reduce((function(e,n){var t=(0,i.Z)(n,2),s=(t[0],t[1]);return[].concat((0,r.Z)(e),[(0,a.Z)({},s)])}),[]),g=(0,p.useState)(t[0].tabId),v=(0,i.Z)(g,2),Z=v[0],j=v[1],w=(0,p.useRef)(Z),C=function(e){w.current=e,j(e)},E=(0,p.useState)(n),k=(0,i.Z)(E,2),I=k[0],T=k[1],O=(0,p.useRef)(I),P=function(e){O.current=e,T(e)},R=(0,p.useState)([]),M=(0,i.Z)(R,2),D=M[0],A=M[1],L=(0,p.useRef)(D),H=function(e){L.current=e,A(e)},F=Object.entries(I).reduce((function(e,n){var t=(0,i.Z)(n,2),s=(t[0],t[1]);return[].concat((0,r.Z)(e),[(0,a.Z)({},s)])}),[]),U=(0,p.useState)(F),_=(0,i.Z)(U,2),z=_[0],B=_[1],W=(0,p.useRef)(t.length),X=(0,p.useState)([]),K=(0,i.Z)(X,2),J=(K[0],K[1]),Q=(0,p.useState)([]),te=(0,i.Z)(Q,2),ae=(te[0],te[1]),re=(0,p.useRef)(null),ie=function(e,n){var t=(0,a.Z)({},O.current),r={};e.taskMap&&(r={taskMap:(0,a.Z)((0,a.Z)({},O.current[Z].taskMap),e.taskMap)}),t[n||Z]=(0,a.Z)((0,a.Z)((0,a.Z)({},t[n||Z]),e),r),localStorage.setItem("dataSearch2",JSON.stringify(t)),O.current=t,P(t)};(0,p.useEffect)((function(){x.Z.get("/idex/config").then((function(e){var n=e.data.result;H(n)}))}),[]),(0,p.useEffect)((function(){var e,n=document.getElementById("buttonDrag");n&&((e=n).onmousedown=function(n){var t="",a=n.clientX,r=n.clientY,i=e.offsetWidth,s=e.offsetHeight,c=e.offsetLeft,o=e.offsetTop;return a>c+i-30?t="right":a<c+30&&(t="left"),r>o+s-30?t="down":r<o+30&&(t="top"),document.onmousemove=function(n){switch(t){case"right":e.style.width=i+(n.clientX-a)+"px";break;case"left":e.style.width=i-(n.clientX-a)+"px",e.style.left=c+(n.clientX-a)+"px";break;case"top":e.style.height=s-(n.clientY-r)+"px",e.style.top=o+(n.clientY-r)+"px";break;case"down":e.style.height=s+(n.clientY-r)+"px"}},e.onmouseup=function(){document.onmousemove=null},!1})}),[]);var se=function(e){Object.entries(O.current[e]).reduce((function(e,n){var t=(0,i.Z)(n,2),s=(t[0],t[1]);return[].concat((0,r.Z)(e),[(0,a.Z)({},s)])}),[]).forEach((function(e){clearInterval(e.smartTimer)})),Object.entries(O.current[e].taskMap).reduce((function(e,n){var t=(0,i.Z)(n,2),s=(t[0],t[1]);return[].concat((0,r.Z)(e),[(0,a.Z)({},s)])}),[]).forEach((function(e){clearInterval(e.timer)}))},ce=function(e,n){var t=O.current[e].taskMap[n];t&&clearInterval(t.timer)};(0,p.useEffect)((function(){return ie({loading:!1}),function(){Object.entries(I).forEach((function(e){var n=(0,i.Z)(e,1)[0];se(n)}))}}),[]),(0,p.useEffect)((function(){var e=I[Z];Object.entries(e.taskMap).reduce((function(e,n){var t=(0,i.Z)(n,2),s=(t[0],t[1]);return[].concat((0,r.Z)(e),[(0,a.Z)({},s)])}),[]).forEach((function(e){"running"===e.status&&le(e.reqId)}))}),[Z]);var oe=function(e){(function(e){return x.Z.get("/idex/look/".concat(e))})(e).then((function(n){var t=n.data,r=t.state,i=t.result,c=t.err_msg,o=t.result_url,l=t.spark_log_url,u=t.stage,d=(0,a.Z)((0,a.Z)({},O.current[Z].taskMap[e]),{},{status:r,step:u,log:l,downloadUrl:o,result:i,message:c});if("success"===r||"failure"===r){var h=new Date(d.startTime||"").valueOf(),f=(new Date).valueOf(),m=(0,Y.Xj)((f-h)/1e3);d.duration=m,ie({status:"success",taskMap:(0,s.Z)({},e,d)}),ce(Z,e)}else ie({status:"success",taskMap:(0,s.Z)({},e,d)})})).catch((function(){ce(Z,e),u.ZP.error("\u67e5\u8be2\u7ed3\u679c\u5931\u8d25\uff0c\u5c1d\u8bd5\u91cd\u65b0\u8fd0\u884c"),ie({status:"failure",taskMap:(0,s.Z)({},e,(0,a.Z)((0,a.Z)({},O.current[Z].taskMap[e]),{},{status:"failure",step:"end"}))})}))},le=function(e){ce(Z,e);var n=setInterval((function(){oe(e)}),5e3);ie({taskMap:(0,s.Z)({},e,{reqId:e,status:"init",content:I[Z].content,name:"\u4efb\u52a1".concat(e),step:"start",startTime:G()().format("YYYY-MM-DD HH:mm:ss"),database:I[Z].database,table:I[Z].table,timer:n,message:""})}),oe(e)},ue=function(){var e;ie({status:"running"});var n,t=D.map((function(e){return e.id})).reduce((function(e,n){return(0,a.Z)((0,a.Z)({},e),{},(0,s.Z)({},n,I[Z][n]))}),{});(n=(0,a.Z)({sql:(null===(e=I[Z])||void 0===e?void 0:e.content)||""},t),x.Z.post("/idex/submit_task",n)).then((function(e){var n=e.data,t=n.err_msg,a=n.task_id;t?(ie({status:"failure"}),d.Z.error({title:"\u8fd0\u884c\u5931\u8d25",icon:(0,b.jsx)(c.Z,{}),width:1e3,content:t,okText:"\u5173\u95ed"})):a&&le(a)})).catch((function(e){ie({status:"failure"})}))};return(0,b.jsx)("div",{className:"datasearch-container fade-in d-f",children:(0,b.jsx)("div",{className:"flex1 ptb16 pl16",children:(0,b.jsx)(h.Z,{type:"editable-card",onChange:function(e){Object.entries(I).forEach((function(n){var t=(0,i.Z)(n,1)[0];t!==e&&se(t)})),J([]),ae([]),C(e)},activeKey:Z,onEdit:function(e,n){"add"===n?function(){se(Z);var e=++W.current;if(e>10)u.ZP.warn("\u6807\u7b7e\u6570\u76ee\u8fbe\u5230\u9650\u5236");else{var n=ee(),t="\u65b0\u67e5\u8be2 ".concat(e),i=(0,r.Z)(z),c={title:t,tabId:n,status:"init",smartShow:!1,smartContent:"",smartTimer:void 0,smartCache:"",loading:!1,taskMap:{}};i.push(c),B(i),C(n);var o=(0,a.Z)((0,a.Z)({},I),{},(0,s.Z)({},n,c));P(o),localStorage.setItem("dataSearch2",JSON.stringify(o))}}():function(e){var n=Z,t=-1;z.forEach((function(n,a){n.tabId===e&&(t=a-1)}));var r=z.filter((function(n){return n.tabId!==e}));r.length&&n===e&&(n=t>=0?r[t].tabId:r[0].tabId),B(r),C(n);var i=(0,a.Z)({},I);delete i[e],P(i),localStorage.setItem("dataSearch2",JSON.stringify(i))}(e)},children:z.map((function(e,n){var t,a;return(0,b.jsx)(h.Z.TabPane,{tab:"\u65b0\u67e5\u8be2 ".concat(n+1),closable:0!==n,children:(0,b.jsxs)("div",{className:"d-f fd-c h100",children:[(0,b.jsxs)("div",{className:"flex2 s0 ov-a",children:[null!==(t=I[Z])&&void 0!==t&&t.loading?(0,b.jsx)("div",{className:"codeedit-mark",children:(0,b.jsxs)("div",{className:"d-f jc ac fd-c",children:[(0,b.jsx)(q.Z,{}),(0,b.jsx)("div",{children:"\u7ed3\u679c\u751f\u6210\u4e2d"})]})}):null,(0,b.jsx)(N,{value:null===(a=I[Z])||void 0===a?void 0:a.content,onChange:function(n){ie({content:""===n?void 0:n,title:e.title})}})]}),(0,b.jsxs)("div",{className:"ov-h",id:"showBox",style:{height:500},children:[(0,b.jsx)(y(),{axis:"y",onStart:function(){},onDrag:function(e){var n=document.getElementById("showBox");if(n){var t=document.body.clientHeight-e.y;n.style.height="".concat(t,"px")}},onStop:function(){},children:(0,b.jsx)("div",{className:"ta-c",style:{cursor:"ns-resize"},children:(0,b.jsx)(o.Z,{})})}),(0,b.jsxs)("div",{className:"ptb8 plr16 bor-l bor-r b-side d-f ac jc-b bg-w",children:[(0,b.jsxs)("div",{className:"d-f ac",children:[(0,b.jsx)(f.Z,{className:"mr8",checked:I[Z].smartShow,unCheckedChildren:"\u6b63\u5e38\u6a21\u5f0f",checkedChildren:"\u667a\u80fd\u6a21\u5f0f",onChange:function(e){ie({smartShow:e})}}),I[Z].smartShow?(0,b.jsx)(S.Z,{value:I[Z].smartContent,isOpenSearchMatch:!0,onChange:function(e){ie({smartContent:e})},onSearch:function(e){ie({smartCache:ne[e],loading:!0});var n=setInterval((function(){var e=O.current[Z].content||"";if(O.current[Z].smartCache){var n=O.current[Z].smartCache||"",t=n.substr(0,20);n=n.replace(t,""),ie({smartCache:n,content:e+t})}else clearInterval(O.current[Z].smartTimer),ie({smartCache:"",smartTimer:void 0,loading:!1})}),800);ie({smartTimer:n})},options:["test"],placeholder:"\u667a\u80fd\u67e5\u8be2",width:"240px"}):null]}),(0,b.jsxs)("div",{className:"d-f ac",children:[(0,b.jsx)($,{ref:re,dataValue:I[Z],onChange:function(e){ie(e)},onConfigChange:function(e){H(e),ie({database:"db"})},option:L.current}),(0,b.jsxs)(m.Z,{className:"ml16",type:"primary",loading:"running"===I[Z].status,onClick:function(){re.current.onSubmit().then((function(e){ue()}))},children:["\u8fd0\u884c",(0,b.jsx)(l.Z,{})]})]})]}),(0,b.jsxs)("div",{className:"flex1 bor b-side s0 bg-w p-r ov-a",style:{height:"calc(100% - 80px)"},children:[(0,b.jsx)("div",{className:"pt8",children:(0,b.jsx)("div",{className:"tag-result bg-theme c-text-w mr16",children:"\u7ed3\u679c"})}),(0,b.jsx)("div",{className:"plr16 pt8",children:(0,b.jsx)(V,{option:I[Z].taskMap,onDelete:function(e){d.Z.confirm({title:"\u5220\u9664",icon:(0,b.jsx)(c.Z,{}),content:"\u786e\u5b9a\u5220\u9664?",okText:"\u786e\u8ba4\u5220\u9664",cancelText:"\u53d6\u6d88",okButtonProps:{danger:!0},onOk:function(){var n=I[Z].taskMap;ce(Z,e),delete n[e],ie({taskMap:n})},onCancel:function(){}})},onRetry:function(e){le(e)}})})]})]})]})},e.tabId)}))})})})}}}]);
//# sourceMappingURL=413.4b21b509.chunk.js.map