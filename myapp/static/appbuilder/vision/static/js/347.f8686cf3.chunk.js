"use strict";(self.webpackChunkvite_ml_platform=self.webpackChunkvite_ml_platform||[]).push([[347],{44347:function(e,t,n){n.r(t),n.d(t,{default:function(){return Y}});var r=n(36222),s=n(18489),i=n(50678),a=n(72791),l=n(31776),o=n(78029),c=n(618),d=n(80184);function u(e){var t=e.columns,n=e.data;return(0,d.jsx)("div",{children:(0,d.jsx)(c.Z,{columns:t,dataSource:n})})}var m=n(58105),f=n(58646),h=n(20135),x=n(48757),p=n(87309),Z=n(71939),j=n.n(Z),g=n(8527),v=n(23695),y=n(23414),_=n(59962),k=n.n(_);function C(e){var t=e.columns,n=e.data;return(0,d.jsx)("div",{children:(0,d.jsx)(c.Z,{columns:t,dataSource:n})})}var w=m.Z.Option,b=function(e){var t=e.visible,n=e.onCancel,r=f.Z.useForm(),c=(0,i.Z)(r,1)[0],u=a.createRef();var Z=[{title:"\u7ec4\u4ef6",dataIndex:"component",ellipsis:!0},{title:"\u7ec4\u4ef6mark",dataIndex:"component_mark",width:200,ellipsis:!0,render:function(e,t){return(0,d.jsxs)("div",{style:{whiteSpace:"normal"},children:[(0,d.jsx)("a",{href:t.url,target:"_blank",children:t.component_mark}),(0,d.jsx)(o.CopyToClipboard,{text:t.component_mark,onCopy:function(){return v.ZP.success("\u590d\u5236\u6210\u529f~")},children:(0,d.jsx)(y.Z,{style:{paddingLeft:2}})})]})}},{title:"\u914d\u7f6e",dataIndex:"config",ellipsis:!0,render:function(e,t){return(0,d.jsxs)("div",{style:{whiteSpace:"normal"},children:[t.config,(0,d.jsx)(o.CopyToClipboard,{text:t.config,onCopy:function(){return v.ZP.success("\u590d\u5236\u6210\u529f~")},children:(0,d.jsx)(y.Z,{style:{paddingLeft:2}})})]})}},{title:"\u8d1f\u8d23\u4eba",dataIndex:"admin",ellipsis:!0},{title:"\u73af\u5883",dataIndex:"env",ellipsis:!0},{title:"\u8bf4\u660e",dataIndex:"des"},{title:"\u4f7f\u7528\u4e2d\u7684strategyID",dataIndex:"using_strategy",ellipsis:!0}],j=(0,a.useState)(Z),g=(0,i.Z)(j,1)[0],_=(0,a.useState)([]),b=(0,i.Z)(_,2),I=b[0],S=b[1],F=(0,a.useState)(!0),O=(0,i.Z)(F,2),P=O[0],T=O[1],A=(0,a.useState)({left:0,top:0,bottom:0,right:0}),L=(0,i.Z)(A,2),N=L[0],D=L[1];function V(e){l.Z.get_components_info(e).then((function(e){0===e.retcode?(S(e.result.data||[]),v.ZP.success("\u67e5\u770b\u7ec4\u4ef6\u4fe1\u606f\u6210\u529f")):e.retmsg&&v.ZP.error("\u5931\u8d25\u539f\u56e0: ".concat(e.retmsg))}))}(0,a.useEffect)((function(){V({component:"filter"})}),[]);return(0,d.jsxs)(x.Z,{width:1e3,title:(0,d.jsx)("div",{style:{width:"100%",cursor:"move"},onMouseOver:function(){P&&T(!1)},onMouseOut:function(){T(!0)},onFocus:function(){},onBlur:function(){},children:"\u67e5\u770b\u7ec4\u4ef6\u4fe1\u606f"}),footer:null,visible:t,onCancel:n,modalRender:function(e){return(0,d.jsx)(k(),{disabled:P,bounds:N,onStart:function(e,t){return function(e,t){var n,r=window.document.documentElement,s=r.clientWidth,i=r.clientHeight,a=null===(n=u.current)||void 0===n?void 0:n.getBoundingClientRect();a&&D({left:-a.left+t.x,right:s-(a.right-t.x),top:-a.top+t.y,bottom:i-(a.bottom-t.y)})}(0,t)},children:(0,d.jsx)("div",{ref:u,children:e})})},children:[(0,d.jsxs)(f.Z,{style:{marginBottom:"20px"},form:c,layout:"inline",name:"form_in_modal",onFinish:function(e){var t=(0,s.Z)((0,s.Z)({},e),{},{marks:[],strategy_ids:[]});e&&(e&&e.marks&&e.marks.includes(";")?t.marks=e.marks.split(";").splice(""):e.marks&&t.marks.push(e.marks),e&&e.strategy_ids&&e.strategy_ids.includes(";")?t.strategy_ids=e.strategy_ids.split(";").map(Number):e.strategy_ids&&t.strategy_ids.push(parseInt(e.strategy_ids)),V(t))},initialValues:{component:"filter"},children:[(0,d.jsx)(f.Z.Item,{name:"component",label:"\u7ec4\u4ef6\u79cd\u7c7b",children:(0,d.jsx)(m.Z,{style:{width:200},onChange:function(e){console.log("selected ".concat(e))},children:["filter","middleware","sort","recall"].map((function(e){return(0,d.jsx)(w,{value:e,children:e},e)}))})}),(0,d.jsx)(f.Z.Item,{name:"marks",label:"\u7ec4\u4ef6mark",children:(0,d.jsx)(h.Z,{style:{width:200}})}),(0,d.jsx)(f.Z.Item,{name:"strategy_ids",label:"\u7b56\u7565ID",children:(0,d.jsx)(h.Z,{style:{width:200}})}),(0,d.jsx)(f.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,d.jsx)(p.Z,{type:"primary",htmlType:"submit",children:"\u67e5\u8be2"})})]}),(0,d.jsx)(C,{columns:g,data:I,scroll:{x:1e3}})]})},I=m.Z.Option,S=function(e){var t=e.visible,n=e.onCreate,r=e.onCancel,s=e.valueListTable,o=e.valueData,c=e.valueData2,u=e.valueData3,Z=e.valueData4,v=f.Z.useForm(),y=(0,i.Z)(v,1)[0],_=h.Z.TextArea,k=(0,a.useState)(!1),C=(0,i.Z)(k,2),w=C[0],S=C[1],F=(0,a.useState)(void 0),O=(0,i.Z)(F,2),P=O[0],T=O[1],A=(0,a.useState)(s.record.recall_config),L=(0,i.Z)(A,2),N=L[0],D=L[1],V=(0,a.useState)(void 0),q=(0,i.Z)(V,2),z=q[0],J=q[1],R=(0,a.useState)(void 0),B=(0,i.Z)(R,2),E=B[0],H=B[1],Q=(0,a.useState)(void 0),M=(0,i.Z)(Q,2),W=M[0],$=M[1],G=(0,a.useState)({address:"",host:"",db:"",collection:"",auth:""}),K=(0,i.Z)(G,2),U=K[0],X=K[1],Y=a.createRef(),ee=o.map((function(e){return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(I,{value:e?e.mark:"",children:e?e.mark:""},e?e.mark:"")})})),te=c.map((function(e){return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(I,{value:e?e.mark:"",children:e?e.mark:""},e?e.mark:"")})})),ne=u.map((function(e){return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(I,{value:e?e.mark:"",children:e?e.mark:""},e?e.mark:"")})})),re=Z.map((function(e){return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(I,{value:e?e.mark:"",children:e?e.mark:""},e?e.mark:"")})}));return(0,d.jsxs)(x.Z,{visible:t,title:s.title,style:{right:"30%"},onCancel:r,onOk:function(){y.validateFields().then((function(e){n(e)})).catch((function(e){console.log("Validate Failed:",e)}))},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",children:[(0,d.jsxs)(f.Z,{ref:Y,form:y,layout:"vertical",initialValues:s.record,name:"form_in_modal",children:[(0,d.jsx)(p.Z,{type:"text",style:{float:"right"},onClick:function(){S(!0)},children:(0,d.jsx)(g.Z,{})}),(0,d.jsx)(f.Z.Item,{name:"app",label:"\u5e94\u7528",rules:[{required:!0,message:"Please input the apps of collection!"}],children:(0,d.jsx)(m.Z,{style:{width:200},children:[{key:1,value:"k\u6b4c"},{key:2,value:"k\u6b4c\u56fd\u9645\u7248"},{key:4,value:"QQ\u97f3\u4e50"},{key:8,value:"\u97f3\u5154"},{key:16,value:"\u9177\u72d7\u97f3\u4e50"},{key:32,value:"\u9177\u6211\u97f3\u4e50"},{key:64,value:"\u7231\u542c\u5353\u4e50"},{key:128,value:"\u61d2\u4eba\u7545\u542c"},{key:256,value:"\u5176\u5b83"}].map((function(e){return(0,d.jsx)(I,{value:e.key,children:e.value},e.key)}))})}),(0,d.jsx)(f.Z.Item,{name:"recall_mark",label:"\u53ec\u56de\u7ec4\u4ef6\u9009\u62e9",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u53ec\u56de\u7ec4\u4ef6"}],children:(0,d.jsx)(m.Z,{style:{width:200},showSearch:!0,value:P,defaultActiveFirstOption:!1,showArrow:!1,onSearch:function(e){console.log(e,"111")},onChange:function(e){var t=Y.current;l.Z.get_component_config(e).then((function(e){e&&e.result&&("\u4fee\u6539\u7b56\u7565\u4fe1\u606f"!==s.title?(X(JSON.parse(e.result.config)),null===t||void 0===t||t.setFieldsValue({recall_config:e.result.config})):(D(e.result.config),null===t||void 0===t||t.setFieldsValue({recall_config:e.result.config})))})),T(e)},notFoundContent:null,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:ee})}),(0,d.jsx)(f.Z.Item,{name:"middleware_marks",label:"\u4e2d\u95f4\u4ef6\u9009\u62e9",children:(0,d.jsx)(m.Z,{mode:"multiple",showSearch:!0,value:E,defaultActiveFirstOption:!1,showArrow:!1,onChange:function(e){H(e)},notFoundContent:null,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:ne})}),(0,d.jsx)(f.Z.Item,{name:"filter_marks",label:"\u8fc7\u6ee4\u7ec4\u4ef6\u9009\u62e9",children:(0,d.jsx)(m.Z,{mode:"multiple",showSearch:!0,value:z,defaultActiveFirstOption:!1,showArrow:!1,onChange:function(e){J(e)},notFoundContent:null,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:te})}),(0,d.jsx)(f.Z.Item,{name:"sort_marks",label:"\u6392\u5e8f\u7ec4\u4ef6\u9009\u62e9",children:(0,d.jsx)(m.Z,{mode:"multiple",showSearch:!0,value:W,defaultActiveFirstOption:!1,showArrow:!1,onChange:function(e){$(e)},notFoundContent:null,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:re})}),(0,d.jsx)(f.Z.Item,{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d1f\u8d23\u4eba"}],name:"admin",label:"\u8d1f\u8d23\u4eba",children:(0,d.jsx)(h.Z,{})}),(0,d.jsx)(f.Z.Item,{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u6982\u62ec\u63cf\u8ff0"}],name:"brief_des",label:"\u6982\u62ec\u63cf\u8ff0",children:(0,d.jsx)(h.Z.TextArea,{autoSize:!0,showCount:!0,maxLength:25})}),(0,d.jsx)(f.Z.Item,{rules:[{required:"\u4fee\u6539\u7b56\u7565\u4fe1\u606f"===s.title,message:"\u8bf7\u8f93\u5165\u914d\u7f6e"}],name:"recall_config",label:"\u53ec\u56de\u914d\u7f6e",children:(0,d.jsx)("div",{children:(0,d.jsx)(j(),{src:"\u4fee\u6539\u7b56\u7565\u4fe1\u606f"===s.title?JSON.parse(N):U,onDelete:function(e){return function(e){setTimeout((function(){if("error"==e.new_value)return!1;if("\u4fee\u6539\u7b56\u7565\u4fe1\u606f"===s.title){var t=Y.current;null===t||void 0===t||t.setFieldsValue({recall_config:e.updated_src})}else{var n=Y.current;null===n||void 0===n||n.setFieldsValue({recall_config:e.updated_src})}}),500)}(e)},displayDataTypes:!1,theme:"railscasts",onEdit:function(e){return function(e){setTimeout((function(){if(console.log(e.updated_src,"onAdd",s.record),"error"==e.new_value)return!1;if("\u4fee\u6539\u7b56\u7565\u4fe1\u606f"===s.title){var t=Y.current;null===t||void 0===t||t.setFieldsValue({recall_config:e.updated_src})}else{var n=Y.current;null===n||void 0===n||n.setFieldsValue({recall_config:e.updated_src})}}),500)}(e)},onAdd:function(e){return function(e){if(console.log(e.updated_src,"onAdd"),"error"==e.new_value)return!1}(e)}})})}),(0,d.jsx)(f.Z.Item,{name:"des",label:"\u63cf\u8ff0\u4fe1\u606f",children:(0,d.jsx)(_,{rows:4})})]}),(0,d.jsx)(b,{visible:w,onCancel:function(){S(!1)}})]})},F=n(66106),O=n(30914),P=n(64469),T=n(28624),A=function(e){var t=e.visible,n=e.onCreate,r=e.onCancel,s=f.Z.useForm(),a=(0,i.Z)(s,1)[0],l=h.Z.TextArea,o=(0,d.jsx)("span",{children:"\u53ec\u56de\u7ec4\u4ef6\u540d\uff0c\u9700\u8981\u6ee1\u8db3\u6b63\u5219\u2018^recall(_([a-z]+))+$"});return(0,d.jsx)(x.Z,{visible:t,title:"\u6ce8\u518c\u53ec\u56de\u7ec4\u4ef6",onCancel:r,onOk:function(){a.validateFields().then((function(e){a.resetFields(),n(e)})).catch((function(e){console.log("Validate Failed:",e)}))},okText:"\u6ce8\u518c",cancelText:"\u53d6\u6d88",children:(0,d.jsxs)(f.Z,{form:a,layout:"vertical",name:"form_in_modal",children:[(0,d.jsx)(f.Z.Item,{label:"\u7ec4\u4ef6\u540d",children:(0,d.jsxs)(F.Z,{gutter:8,children:[(0,d.jsx)(O.Z,{span:22,children:(0,d.jsx)(f.Z.Item,{name:"component_mark",rules:[{required:!0,message:"Please input the component_mark of collection!"}],children:(0,d.jsx)(h.Z,{style:{width:"100%"}})})}),(0,d.jsx)(O.Z,{span:2,children:(0,d.jsx)(P.Z,{placement:"top",title:o,children:(0,d.jsx)(T.Z,{style:{color:"red",fontSize:"18px",marginLeft:"10px",lineHeight:"32px"}})})})]})}),(0,d.jsx)(f.Z.Item,{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d1f\u8d23\u4eba"}],name:"admin",label:"\u8d1f\u8d23\u4eba",children:(0,d.jsx)(h.Z,{})}),(0,d.jsx)(f.Z.Item,{name:"des",label:"\u63cf\u8ff0",children:(0,d.jsx)(l,{rows:4})})]})})},L=h.Z.TextArea,N=m.Z.Option,D=function(e){var t=e.visible,n=e.onCreate,r=e.onCancel,s=e.getAddEdit2,o=f.Z.useForm(),c=(0,i.Z)(o,1)[0],u=(0,a.useState)([]),p=(0,i.Z)(u,2),Z=p[0],g=p[1],v=(0,a.useState)(""),y=(0,i.Z)(v,2),_=y[0],k=y[1],C=(0,a.useState)({}),w=(0,i.Z)(C,2),b=w[0],I=w[1],S=a.createRef(),A=(0,d.jsx)("span",{children:"\u7ec4\u4ef6\u540d\uff0c\u9700\u8981\u6ee1\u8db3\u2018\u7ec4\u4ef6\u7c7b\u522b_\u63cf\u8ff0\u4fe1\u606f(\u4e0d\u53ef\u5305\u542b\u2018_\u2019)\u2019"});return(0,d.jsx)(x.Z,{visible:t,title:"\u6ce8\u518c\u8f85\u52a9\u7ec4\u4ef6",onCancel:r,onOk:function(){c.validateFields().then((function(e){c.resetFields(),n(e)})).catch((function(e){console.log("Validate Failed:",e)}))},afterClose:function(){c.resetFields()},okText:"\u6ce8\u518c",cancelText:"\u53d6\u6d88",children:(0,d.jsxs)(f.Z,{ref:S,form:c,layout:"vertical",name:"form_in_modal",children:[(0,d.jsx)(f.Z.Item,{name:"component",label:"\u7ec4\u4ef6",children:(0,d.jsx)(m.Z,{style:{width:200},onChange:function(e){k(e),l.Z.get_components_type(e).then((function(t){t&&t.result&&t.result.data&&g(t.result.data[e])}))},children:["filter","middleware","sort"].map((function(e){return(0,d.jsx)(N,{value:e,children:e},e)}))})}),(0,d.jsx)(f.Z.Item,{name:"component_type",label:"\u7ec4\u4ef6\u7c7b\u522b",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7ec4\u4ef6\u7c7b\u522b"}],children:(0,d.jsx)(m.Z,{onChange:function(e){var t=S.current;l.Z.get_component_config2(e,_).then((function(e){I(JSON.parse(e.result.config)),null===t||void 0===t||t.setFieldsValue({config:e.result.config}),s(JSON.parse(e.result.config))}))},children:Z?Z.map((function(e){return(0,d.jsx)(N,{value:e,children:e},e)})):[]})}),(0,d.jsx)(f.Z.Item,{name:"admin",label:"\u8d1f\u8d23\u4eba",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d1f\u8d23\u4eba"}],children:(0,d.jsx)(h.Z,{})}),(0,d.jsx)(f.Z.Item,{label:"\u7ec4\u4ef6\u540d",children:(0,d.jsxs)(F.Z,{gutter:8,children:[(0,d.jsx)(O.Z,{span:22,children:(0,d.jsx)(f.Z.Item,{name:"component_mark",noStyle:!0,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7ec4\u4ef6\u540d"}],children:(0,d.jsx)(h.Z,{style:{width:"100%"}})})}),(0,d.jsx)(O.Z,{span:2,children:(0,d.jsx)(P.Z,{placement:"top",title:A,children:(0,d.jsx)(T.Z,{style:{color:"red",fontSize:"18px",marginLeft:"10px",lineHeight:"32px"}})})})]})}),(0,d.jsx)(f.Z.Item,{name:"config",label:"\u914d\u7f6e\u9879",children:(0,d.jsx)("div",{children:(0,d.jsx)(j(),{src:b,onDelete:function(e){return function(e){setTimeout((function(){if("error"==e.new_value)return!1;var t=S.current;null===t||void 0===t||t.setFieldsValue({recall_config:e.updated_src}),s(e.updated_src)}),500)}(e)},displayDataTypes:!1,theme:"railscasts",onEdit:function(e){return function(e){setTimeout((function(){if("error"==e.new_value)return!1;var t=S.current;null===t||void 0===t||t.setFieldsValue({recall_config:e.updated_src}),s(e.updated_src)}),500)}(e)},onAdd:function(e){return function(e){if("error"==e.new_value)return!1}(e)}})})}),(0,d.jsx)(f.Z.Item,{name:"des",label:"\u63cf\u8ff0",children:(0,d.jsx)(L,{rows:4})})]})})},V=h.Z.TextArea,q=m.Z.Option,z=function(e){var t=e.visible,n=e.onCreate,r=e.onCancel,s=a.createRef(),o=f.Z.useForm(),c=(0,i.Z)(o,1)[0],u=(0,a.useState)([]),h=(0,i.Z)(u,2),p=h[0],Z=h[1];return(0,d.jsx)(x.Z,{visible:t,title:"\u4fee\u6539\u7ec4\u4ef6\u4fe1\u606f",onCancel:r,onOk:function(){c.validateFields().then((function(e){c.resetFields(),n(e)})).catch((function(e){console.log("Validate Failed:",e)}))},afterClose:function(){c.resetFields()},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:(0,d.jsxs)(f.Z,{ref:s,form:c,layout:"vertical",name:"form_in_modal",children:[(0,d.jsx)(f.Z.Item,{name:"component",label:"\u7ec4\u4ef6",children:(0,d.jsx)(m.Z,{style:{width:200},onChange:function(e){l.Z.get_components_mark([e]).then((function(t){var n;0===t.retcode?(v.ZP.success("\u83b7\u53d6\u7ec4\u4ef6mark\u6210\u529f"),t&&t.result&&t.result.data&&t.result.data[e]?Z(t.result.data[e]):(null===(n=s.current)||void 0===n||n.setFieldsValue({component_mark:""}),Z([]))):t.retmsg&&v.ZP.error("\u5931\u8d25\u539f\u56e0: ".concat(t.retmsg))}))},children:["filter","middleware","sort","recall"].map((function(e){return(0,d.jsx)(q,{value:e,children:e},e)}))})}),(0,d.jsx)(f.Z.Item,{name:"component_mark",label:"\u7ec4\u4ef6Mark",rules:[{required:!0,message:"Please input the component_mark of collection!"}],children:(0,d.jsx)(m.Z,{showSearch:!0,placeholder:"Select a person",optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:p?p.map((function(e){return(0,d.jsx)(q,{value:e.mark,children:e.mark},e.mark)})):[]})}),(0,d.jsx)(f.Z.Item,{name:"des",label:"\u63cf\u8ff0",children:(0,d.jsx)(V,{name:"textarea",rows:4})})]})})},J=h.Z.TextArea,R=m.Z.Option,B=function(e){var t=e.visible,n=e.onCreate,r=e.onCancel,s=f.Z.useForm(),a=(0,i.Z)(s,1)[0],l=(0,d.jsx)("span",{children:"\u7ec4\u4ef6\u7c7b\u578b\uff0c\u9700\u8981\u6ee1\u8db3\u2018^\u7ec4\u4ef6\u7c7b\u522b(_([a-z]+))+$"});return(0,d.jsx)(x.Z,{visible:t,title:"\u6ce8\u518c\u8f85\u52a9\u7ec4\u4ef6\u7c7b\u578b",onCancel:r,onOk:function(){a.validateFields().then((function(e){a.resetFields(),n(e)})).catch((function(e){console.log("Validate Failed:",e)}))},okText:"\u6ce8\u518c",cancelText:"\u53d6\u6d88",children:(0,d.jsxs)(f.Z,{form:a,layout:"vertical",name:"form_in_modal",children:[(0,d.jsx)(f.Z.Item,{name:"component",label:"\u7ec4\u4ef6",children:(0,d.jsx)(m.Z,{style:{width:200},onChange:function(e){console.log("selected ".concat(e))},children:["filter","middleware","sort"].map((function(e){return(0,d.jsx)(R,{value:e,children:e},e)}))})}),(0,d.jsx)(f.Z.Item,{label:"\u7ec4\u4ef6\u7c7b\u578b",children:(0,d.jsxs)(F.Z,{gutter:8,children:[(0,d.jsx)(O.Z,{span:22,children:(0,d.jsx)(f.Z.Item,{name:"component_type",rules:[{required:!0,message:"Please input the opr of collection!"}],children:(0,d.jsx)(h.Z,{style:{width:"92%"}})})}),(0,d.jsx)(O.Z,{span:2,children:(0,d.jsx)(P.Z,{placement:"top",title:l,children:(0,d.jsx)(T.Z,{style:{color:"red",fontSize:"18px",marginLeft:"10px",lineHeight:"32px"}})})})]})}),(0,d.jsx)(f.Z.Item,{name:"admin",label:"\u8d1f\u8d23\u4eba",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d1f\u8d23\u4eba"}],children:(0,d.jsx)(h.Z,{})}),(0,d.jsx)(f.Z.Item,{name:"des",label:"\u63cf\u8ff0",children:(0,d.jsx)(J,{rows:4})})]})})};function E(e){var t=e.columns,n=e.data;return(0,d.jsx)("div",{children:(0,d.jsx)(c.Z,{columns:t,dataSource:n})})}var H=m.Z.Option,Q=function(e){var t=e.visible,n=e.onCancel,r=f.Z.useForm(),c=(0,i.Z)(r,1)[0];var u=[{title:"\u7ec4\u4ef6",dataIndex:"component",ellipsis:!0},{title:"\u7ec4\u4ef6mark",dataIndex:"component_mark",width:200,ellipsis:!0,render:function(e,t){return(0,d.jsxs)("div",{style:{whiteSpace:"normal"},children:[(0,d.jsx)("a",{href:t.url,target:"_blank",children:t.component_mark}),(0,d.jsx)(o.CopyToClipboard,{text:t.component_mark,onCopy:function(){return v.ZP.success("\u590d\u5236\u6210\u529f~")},children:(0,d.jsx)(y.Z,{style:{paddingLeft:2}})})]})}},{title:"\u914d\u7f6e",dataIndex:"config",ellipsis:!0,render:function(e,t){return(0,d.jsxs)("div",{style:{whiteSpace:"normal"},children:[t.config,(0,d.jsx)(o.CopyToClipboard,{text:t.config,onCopy:function(){return v.ZP.success("\u590d\u5236\u6210\u529f~")},children:(0,d.jsx)(y.Z,{style:{paddingLeft:2}})})]})}},{title:"\u8d1f\u8d23\u4eba",dataIndex:"admin",ellipsis:!0},{title:"\u73af\u5883",dataIndex:"env",ellipsis:!0},{title:"\u8bf4\u660e",dataIndex:"des"},{title:"\u4f7f\u7528\u4e2d\u7684strategyID",dataIndex:"using_strategy",ellipsis:!0}],Z=(0,a.useState)(u),j=(0,i.Z)(Z,1)[0],g=(0,a.useState)([]),_=(0,i.Z)(g,2),k=_[0],C=_[1];function w(e){l.Z.get_components_info(e).then((function(e){0===e.retcode?(C(e.result.data||[]),v.ZP.success("\u67e5\u770b\u7ec4\u4ef6\u4fe1\u606f\u6210\u529f")):e.retmsg&&v.ZP.error("\u5931\u8d25\u539f\u56e0: ".concat(e.retmsg))}))}(0,a.useEffect)((function(){w({component:"filter"})}),[]);return(0,d.jsxs)(x.Z,{width:1e3,footer:null,visible:t,title:"\u67e5\u770b\u7ec4\u4ef6\u4fe1\u606f",onCancel:n,children:[(0,d.jsxs)(f.Z,{style:{marginBottom:"20px"},form:c,layout:"inline",name:"form_in_modal",onFinish:function(e){var t=(0,s.Z)((0,s.Z)({},e),{},{marks:[],strategy_ids:[]});e&&(e&&e.marks&&e.marks.includes(";")?t.marks=e.marks.split(";").splice(""):e.marks&&t.marks.push(e.marks),e&&e.strategy_ids&&e.strategy_ids.includes(";")?t.strategy_ids=e.strategy_ids.split(";").map(Number):e.strategy_ids&&t.strategy_ids.push(parseInt(e.strategy_ids)),w(t))},initialValues:{component:"filter"},children:[(0,d.jsx)(f.Z.Item,{name:"component",label:"\u7ec4\u4ef6\u79cd\u7c7b",children:(0,d.jsx)(m.Z,{style:{width:200},onChange:function(e){console.log("selected ".concat(e))},children:["filter","middleware","sort","recall"].map((function(e){return(0,d.jsx)(H,{value:e,children:e},e)}))})}),(0,d.jsx)(f.Z.Item,{name:"marks",label:"\u7ec4\u4ef6mark",children:(0,d.jsx)(h.Z,{style:{width:200}})}),(0,d.jsx)(f.Z.Item,{name:"strategy_ids",label:"\u7b56\u7565ID",children:(0,d.jsx)(h.Z,{style:{width:200}})}),(0,d.jsx)(f.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,d.jsx)(p.Z,{type:"primary",htmlType:"submit",children:"\u67e5\u8be2"})})]}),(0,d.jsx)(E,{columns:j,data:k,scroll:{x:1e3}})]})};function M(e){var t=e.columns,n=e.data;return(0,d.jsx)("div",{children:(0,d.jsx)(c.Z,{columns:t,dataSource:n})})}var W=function(e){var t=e.visible,n=e.onCancel,r=f.Z.useForm(),s=(0,i.Z)(r,1)[0],o=[{title:"\u7ec4\u4ef6",dataIndex:"mark"},{title:"\u914d\u7f6e\u4e2d\u5fc3",dataIndex:"config_center",render:function(e,t){return(0,d.jsx)("div",{style:{color:"NO"===t.config_center?"red":""},children:t.config_center})}},{title:"\u53ec\u56de\u670d\u52a1",dataIndex:"server",render:function(e,t){return(0,d.jsx)("div",{style:{color:"NO"===t.server?"red":""},children:t.server})}}],c=(0,a.useState)(o),u=(0,i.Z)(c,2),m=u[0],Z=(u[1],(0,a.useState)([])),j=(0,i.Z)(Z,2),g=j[0],v=j[1];return(0,d.jsxs)(x.Z,{width:1e3,footer:null,visible:t,title:"\u914d\u7f6e\u6548\u9a8c",onCancel:n,children:[(0,d.jsxs)(f.Z,{style:{marginBottom:"20px"},form:s,layout:"inline",name:"form_in_modal",onFinish:function(e){l.Z.config_check(e).then((function(e){v(e.result.data||[])}))},children:[(0,d.jsx)(f.Z.Item,{name:"ips",label:"address",rules:[{required:!0,message:"Please input the opr of collection!"}],children:(0,d.jsx)(h.Z,{style:{width:200}})}),(0,d.jsx)(f.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,d.jsx)(p.Z,{type:"primary",htmlType:"submit",children:"\u6548\u9a8c"})})]}),(0,d.jsx)(M,{columns:m,data:g})]})},$=n(6137),G=n(47528),K={padding:"8px 0",display:"flex",alignItems:"center"};function U(e){switch(e){case 0:return"\u6ce8\u518c\u6210\u529f";case 1:return"\u6d4b\u8bd5\u53d1\u5e03";case 2:return"\u6b63\u5f0f\u53d1\u5e03";case-1:return"\u5931\u6548";case-2:return"\u5220\u9664";default:return"\u672a\u77e5"}}function X(e){switch(e){case 1:return"k\u6b4c";case 2:return"k\u6b4c\u56fd\u9645\u7248";case 4:return"QQ\u97f3\u4e50";case 8:return"\u97f3\u5154";case 16:return"\u9177\u72d7\u97f3\u4e50";case 32:return"\u9177\u6211\u97f3\u4e50";case 64:return"\u7231\u542c\u5353\u4e50";case 128:return"\u61d2\u4eba\u7545\u542c";case 256:return"\u5176\u5b83";default:return"\u672a\u77e5"}}var Y=function(){var e=[{title:"\u7b56\u7565ID",dataIndex:"strategy_id",align:"center",width:80,render:function(e,t){return(0,d.jsx)("div",{children:(0,d.jsxs)("div",{style:{whiteSpace:"normal"},children:[t.strategy_id,(0,d.jsx)(o.CopyToClipboard,{text:t.strategy_id,onCopy:function(){return v.ZP.success("\u590d\u5236\u6210\u529f~")},children:(0,d.jsx)(y.Z,{style:{paddingLeft:2}})})]})})}},{title:"\u5e94\u7528",dataIndex:"app",align:"center",width:104,render:function(e,t){return(0,d.jsx)("div",{children:X(t.app)})}},{title:"\u53ec\u56de\u7ec4\u4ef6",dataIndex:"recall_mark",align:"center",ellipsis:!0,render:function(e,t){return(0,d.jsx)("div",{children:(0,d.jsxs)("div",{style:{whiteSpace:"normal"},children:[t.recall_mark,(0,d.jsx)(o.CopyToClipboard,{text:t.recall_mark,onCopy:function(){return v.ZP.success("\u590d\u5236\u6210\u529f~")},children:(0,d.jsx)(y.Z,{style:{paddingLeft:2}})})]})})}},{title:"\u4e2d\u95f4\u4ef6",dataIndex:"middleware_marks",align:"center",ellipsis:!0,render:function(e,t){return(0,d.jsx)("div",{children:(0,d.jsxs)("div",{style:{whiteSpace:"normal"},children:[t.middleware_marks,(0,d.jsx)(o.CopyToClipboard,{text:t.middleware_marks,onCopy:function(){return v.ZP.success("\u590d\u5236\u6210\u529f~")},children:(0,d.jsx)(y.Z,{style:{paddingLeft:2}})})]})})}},{title:"\u8fc7\u6ee4\u7ec4\u4ef6",dataIndex:"filter_marks",align:"center",ellipsis:!0,render:function(e,t){return(0,d.jsx)("div",{children:(0,d.jsxs)("div",{style:{whiteSpace:"normal"},children:[t.filter_marks,(0,d.jsx)(o.CopyToClipboard,{text:t.filter_marks,onCopy:function(){return v.ZP.success("\u590d\u5236\u6210\u529f~")},children:(0,d.jsx)(y.Z,{style:{paddingLeft:2}})})]})})}},{title:"\u6392\u5e8f\u7ec4\u4ef6",dataIndex:"sort_marks",align:"center",ellipsis:!0,render:function(e,t){return(0,d.jsx)("div",{children:(0,d.jsxs)("div",{style:{whiteSpace:"normal"},children:[t.sort_marks,(0,d.jsx)(o.CopyToClipboard,{text:t.sort_marks,onCopy:function(){return v.ZP.success("\u590d\u5236\u6210\u529f~")},children:(0,d.jsx)(y.Z,{style:{paddingLeft:2}})})]})})}},{title:"\u8d1f\u8d23\u4eba",dataIndex:"admin",align:"center",width:100},{title:"\u53ec\u56de\u914d\u7f6e",dataIndex:"recall_config",align:"center",ellipsis:!0,render:function(e,t){return(0,d.jsxs)("div",{children:[(0,d.jsx)(P.Z,{placement:"topLeft",title:t.recall_config,children:t.recall_config}),(0,d.jsx)("br",{}),(0,d.jsx)(o.CopyToClipboard,{text:t.recall_config,onCopy:function(){return v.ZP.success("\u590d\u5236\u6210\u529f~")},children:(0,d.jsx)(y.Z,{style:{paddingLeft:2}})})]})}},{title:"\u72b6\u6001",dataIndex:"status",align:"center",width:82,ellipsis:!0,render:function(e,t){var n="";return 0===t.status?n="#f50":1===t.status?n="#87d068":2===t.status?n="#108ee9":-1===t.status?n="orange":-2===t.status&&(n="#cd201f"),(0,d.jsx)(G.Z,{color:n,children:U(t.status)})}},{title:"\u6982\u62ec\u63cf\u8ff0",dataIndex:"brief_des",align:"center"},{title:"\u63cf\u8ff0",dataIndex:"des",align:"center"},{title:"\u64cd\u4f5c",dataIndex:"action",align:"center",render:function(e,t){return(0,d.jsxs)("div",{className:"ButtonClass",children:[(0,d.jsx)(p.Z,{type:"dashed",onClick:function(){return Qe({title:"\u4fee\u6539\u7b56\u7565\u4fe1\u606f",record:t})},children:"\u4fee\u6539"}),(0,d.jsx)(p.Z,{danger:!0,disabled:2!==t.status&&1!==t.status,onClick:function(){return Me(t)},children:"\u56de\u6eda"}),(0,d.jsx)(p.Z,{disabled:0!==t.status,onClick:function(){return We(t)},children:"\u6d4b\u8bd5\u53d1\u5e03"}),(0,d.jsx)(p.Z,{disabled:1!==t.status,type:"primary",onClick:function(){return $e(t)},children:"\u6b63\u5f0f\u53d1\u5e03"})]})}}],t=(0,a.useState)(e),n=(0,i.Z)(t,2),c=n[0],f=(n[1],(0,a.useState)([])),x=(0,i.Z)(f,2),Z=x[0],j=x[1],g=(0,a.useState)(!1),_=(0,i.Z)(g,2),k=_[0],C=_[1],w=(0,a.useState)(!1),b=(0,i.Z)(w,2),I=b[0],T=b[1],L=(0,a.useState)(!1),N=(0,i.Z)(L,2),V=N[0],q=N[1],J=(0,a.useState)(!1),R=(0,i.Z)(J,2),E=R[0],H=R[1],M=(0,a.useState)(!1),Y=(0,i.Z)(M,2),ee=Y[0],te=Y[1],ne=(0,a.useState)(!1),re=(0,i.Z)(ne,2),se=re[0],ie=re[1],ae=(0,a.useState)(!1),le=(0,i.Z)(ae,2),oe=le[0],ce=le[1],de=(0,a.useState)({title:"\u7f16\u8f91\u7b56\u7565\u4fe1\u606f",record:{strategy_id:void 0,version:void 0,status:void 0}}),ue=(0,i.Z)(de,2),me=ue[0],fe=ue[1],he=(0,a.useState)({strategy_ids:[],component_marks:[],admins:[]}),xe=(0,i.Z)(he,2),pe=xe[0],Ze=xe[1],je=(0,a.useState)({status:[],apps:[]}),ge=(0,i.Z)(je,2),ve=ge[0],ye=ge[1],_e=(0,a.useState)([]),ke=(0,i.Z)(_e,2),Ce=ke[0],we=ke[1],be=(0,a.useState)([]),Ie=(0,i.Z)(be,2),Se=Ie[0],Fe=Ie[1],Oe=(0,a.useState)([]),Pe=(0,i.Z)(Oe,2),Te=Pe[0],Ae=Pe[1],Le=(0,a.useState)([]),Ne=(0,i.Z)(Le,2),De=Ne[0],Ve=Ne[1],qe=(0,a.useState)({}),ze=(0,i.Z)(qe,2),Je=ze[0],Re=ze[1];(0,a.useEffect)((function(){He(Object.assign(pe,ve))}),[]);var Be=function(e){return function(t){Ze((0,s.Z)((0,s.Z)({},pe),{},(0,r.Z)({},e,t.target.value.split(";").splice(""))))}},Ee=function(e){return function(t){console.log(t,"66"),ye((0,s.Z)((0,s.Z)({},ve),{},(0,r.Z)({},e,t)))}};function He(e){l.Z.get_strategys(e).then((function(e){0===e.retcode?v.ZP.success("\u67e5\u8be2\u6210\u529f"):e.retmsg&&v.ZP.error("\u5931\u8d25\u539f\u56e0: ".concat(e.retmsg)),j(e.result.data)}))}var Qe=function(e){e&&void 0!==e.record&&"\u4fee\u6539\u7b56\u7565\u4fe1\u606f"===e.title&&(e.record.middleware_marks.includes(";")?e.record.middleware_marks=e.record.middleware_marks.split(";"):e.record.middleware_marks||(e.record.middleware_marks=[]),e.record.filter_marks.includes(";")?e.record.filter_marks=e.record.filter_marks.split(";"):e.record.filter_marks||(e.record.filter_marks=[]),e.record.sort_marks.includes(";")?e.record.sort_marks=e.record.sort_marks.split(";"):e.record.sort_marks||(e.record.sort_marks=[])),fe(e),C(!0),l.Z.get_components_mark(["filter","sort","recall","middleware"]).then((function(e){var t=e.result,n=[],r=[],s=[],i=[];if(t){var a=t.data,l=a.recall,o=a.middleware,c=a.filter,d=a.sort;n=[].concat(l),r=[].concat(c),s=[].concat(o),i=[].concat(d),we(n),Fe(r),Ae(s),Ve(i)}}))},Me=function(e){l.Z.rollback(e.strategy_id).then((function(e){0===e.retcode?(v.ZP.success("\u56de\u6eda\u6210\u529f"),He(Object.assign(pe,ve))):e.retmsg&&v.ZP.error("\u5931\u8d25\u539f\u56e0: ".concat(e.retmsg))}))},We=function(e){l.Z.test_release(e.strategy_id).then((function(e){0===e.retcode?(v.ZP.success("\u6d4b\u8bd5\u53d1\u5e03\u7b56\u7565\u6210\u529f"),He(Object.assign(pe,ve))):e.retmsg&&v.ZP.error("\u5931\u8d25\u539f\u56e0: ".concat(e.retmsg))}))},$e=function(e){l.Z.real_release(e.strategy_id).then((function(e){0===e.retcode?(v.ZP.success("\u6b63\u5f0f\u53d1\u5e03\u7b56\u7565\u6210\u529f"),He(Object.assign(pe,ve))):e.retmsg&&v.ZP.error("\u5931\u8d25\u539f\u56e0: ".concat(e.retmsg))}))};return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"RecallFrameworkFirst",children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,d.jsx)("h1",{children:"\u7edf\u4e00\u7269\u6599\u53ec\u56de"}),(0,d.jsxs)("div",{className:"zhanhuiName",style:{fontSize:"20px",marginRight:"5%"},onClick:function(){window.open("https://docs.qq.com/sheet/DZGZuTlJxTHRycWFz?tab=BB08J2")},children:[(0,d.jsx)($.Z,{}),(0,d.jsx)("span",{children:"\u5410\u69fd"})]})]}),(0,d.jsx)("hr",{}),(0,d.jsxs)(F.Z,{gutter:16,children:[(0,d.jsx)(O.Z,{className:"gutter-row",span:4,children:(0,d.jsxs)("div",{style:K,children:[(0,d.jsx)("span",{children:"\u7b56\u7565ID\uff1a"}),(0,d.jsx)(h.Z,{placeholder:"\u8bf7\u8f93\u5165\u7b56\u7565ID",value:pe.strategy_ids,onChange:Be("strategy_ids")})]})}),(0,d.jsx)(O.Z,{className:"gutter-row",span:4,children:(0,d.jsxs)("div",{style:K,children:[(0,d.jsx)("span",{style:{width:"33%"},children:"\u7ec4\u4ef6mark\uff1a"}),(0,d.jsx)(h.Z,{placeholder:"\u8bf7\u8f93\u5165\u7ec4\u4ef6mark",value:pe.component_marks,onChange:Be("component_marks")})]})}),(0,d.jsx)(O.Z,{className:"gutter-row",span:4,children:(0,d.jsxs)("div",{style:K,children:[(0,d.jsx)("span",{children:"\u5e94\u7528\uff1a"}),(0,d.jsx)(m.Z,{mode:"multiple",placeholder:"Inserted are removed",value:ve.apps,onChange:Ee("apps"),style:{width:"200px"},children:[{key:1,value:"k\u6b4c"},{key:2,value:"k\u6b4c\u56fd\u9645\u7248"},{key:4,value:"QQ\u97f3\u4e50"},{key:8,value:"\u97f3\u5154"},{key:16,value:"\u9177\u72d7\u97f3\u4e50"},{key:32,value:"\u9177\u6211\u97f3\u4e50"},{key:64,value:"\u7231\u542c\u5353\u4e50"},{key:128,value:"\u61d2\u4eba\u7545\u542c"},{key:256,value:"\u5176\u5b83"}].map((function(e){return(0,d.jsx)(m.Z.Option,{value:e.key,children:e.value},e.key)}))})]})}),(0,d.jsx)(O.Z,{className:"gutter-row",span:4,children:(0,d.jsxs)("div",{style:K,children:[(0,d.jsx)("span",{children:"\u72b6\u6001\uff1a"}),(0,d.jsx)(m.Z,{mode:"multiple",placeholder:"Inserted are removed",value:ve.status,onChange:Ee("status"),style:{width:"200px"},children:[{key:0,value:"\u6ce8\u518c\u6210\u529f"},{key:1,value:"\u6d4b\u8bd5\u53d1\u5e03"},{key:2,value:"\u6b63\u5f0f\u53d1\u5e03"},{key:-1,value:"\u5931\u6548"},{key:-2,value:"\u5220\u9664"}].map((function(e){return(0,d.jsx)(m.Z.Option,{value:e.key,children:e.value},e.key)}))})]})}),(0,d.jsx)(O.Z,{className:"gutter-row",span:4,children:(0,d.jsxs)("div",{style:K,children:[(0,d.jsx)("span",{children:"\u8d1f\u8d23\u4eba\uff1a"}),(0,d.jsx)(h.Z,{placeholder:"\u8bf7\u8f93\u5165\u8d1f\u8d23\u4eba",value:pe.admins,onChange:Be("admins")})]})}),(0,d.jsx)(O.Z,{className:"gutter-row2",span:4,children:(0,d.jsx)(p.Z,{type:"primary",style:{marginTop:"8px"},onClick:function(){function e(e,t){return""===e[0]?[]:"component_marks"===t||"admins"===t?e:"strategy_ids"===t?e.map(Number):void 0}He(Object.assign((0,s.Z)((0,s.Z)({},pe),{},{component_marks:e(pe.component_marks,"component_marks"),strategy_ids:e(pe.strategy_ids,"strategy_ids"),admins:e(pe.admins,"admins")}),ve))},children:"\u67e5\u8be2"})})]}),(0,d.jsxs)("div",{className:"Header_end",children:[(0,d.jsx)(p.Z,{type:"primary",onClick:function(){C(!0),l.Z.get_components_mark(["filter","sort","recall","middleware"]).then((function(e){var t=e.result,n=[],r=[],s=[],i=[];if(t){var a=t.data,l=a.recall,o=a.middleware,c=a.filter,d=a.sort;n=[].concat(l),r=[].concat(c),s=[].concat(o),i=[].concat(d),we(n),Fe(r),Ae(s),Ve(i)}})),Qe({title:"\u7f16\u8f91\u7b56\u7565\u4fe1\u606f",record:{}}),console.log("\u6dfb\u52a0\u53ec\u56de\u7b56\u7565")},children:"\u6dfb\u52a0\u53ec\u56de\u7b56\u7565"}),(0,d.jsx)(p.Z,{type:"primary",onClick:function(){T(!0)},children:"\u6ce8\u518c\u53ec\u56de\u7ec4\u4ef6"}),(0,d.jsx)(p.Z,{type:"primary",onClick:function(){q(!0)},children:"\u6ce8\u518c\u8f85\u52a9\u7ec4\u4ef6"}),(0,d.jsx)(p.Z,{type:"primary",onClick:function(){H(!0)},children:"\u6ce8\u518c\u8f85\u52a9\u7ec4\u4ef6\u7c7b\u578b"}),(0,d.jsx)(p.Z,{type:"primary",onClick:function(){ce(!0)},children:"\u914d\u7f6e\u6548\u9a8c"}),(0,d.jsx)(p.Z,{type:"primary",onClick:function(){ie(!0)},children:"\u67e5\u770b\u7ec4\u4ef6\u4fe1\u606f"}),(0,d.jsx)(p.Z,{type:"primary",onClick:function(){te(!0)},children:"\u4fee\u6539\u7ec4\u4ef6\u4fe1\u606f"})]}),(0,d.jsx)("hr",{style:{margin:"20px 0"}}),(0,d.jsx)(u,{columns:c,data:Z}),(0,d.jsx)("hr",{}),k?(0,d.jsx)(S,{visible:k,onCreate:function(e){if(me&&"\u7f16\u8f91\u7b56\u7565\u4fe1\u606f"===me.title){var t=(0,s.Z)((0,s.Z)({},e),{},{filter_marks:Array.isArray(e.filter_marks)?e.filter_marks.join(";"):e.filter_marks,middleware_marks:Array.isArray(e.middleware_marks)?e.middleware_marks.join(";"):e.middleware_marks,sort_marks:Array.isArray(e.sort_marks)?e.sort_marks.join(";"):e.sort_marks,recall_config:"string"===typeof e.recall_config?e.recall_config:JSON.stringify(e.recall_config)});l.Z.add_strategy(t).then((function(e){0===e.retcode?(v.ZP.success("\u6dfb\u52a0\u53ec\u56de\u7b56\u7565\u6210\u529f"),C(!1),He(Object.assign(pe,ve))):e.retmsg&&v.ZP.error("\u5931\u8d25\u539f\u56e0: ".concat(e.retmsg))}))}else{var n=(0,s.Z)((0,s.Z)({},e),{},{filter_marks:Array.isArray(e.filter_marks)?e.filter_marks.join(";"):e.filter_marks,middleware_marks:Array.isArray(e.middleware_marks)?e.middleware_marks.join(";"):e.middleware_marks,sort_marks:Array.isArray(e.sort_marks)?e.sort_marks.join(";"):e.sort_marks,strategy_id:me.record.strategy_id,version:me.record.version,status:me.record.status,recall_config:"string"===typeof e.recall_config?e.recall_config:JSON.stringify(e.recall_config)});l.Z.modify_strategy(n).then((function(e){0===e.retcode?(v.ZP.success("\u4fee\u6539\u53ec\u56de\u7b56\u7565\u6210\u529f"),C(!1),He(Object.assign(pe,ve))):e.retmsg&&v.ZP.error("\u5931\u8d25\u539f\u56e0: ".concat(e.retmsg))}))}},valueListTable:me,valueData:Ce,valueData2:Se,valueData3:Te,valueData4:De,onCancel:function(){C(!1)}}):null,(0,d.jsx)(A,{visible:I,onCreate:function(e){l.Z.register_recall_component(e).then((function(e){0===e.retcode?(v.ZP.success("\u6ce8\u518c\u53ec\u56de\u7ec4\u4ef6\u6210\u529f"),T(!1)):e.retmsg&&v.ZP.error("\u5931\u8d25\u539f\u56e0: ".concat(e.retmsg))}))},onCancel:function(){T(!1)}}),(0,d.jsx)(D,{getAddEdit2:function(e){Re(e)},visible:V,onCreate:function(e){var t=(0,s.Z)((0,s.Z)({},e),{},{config:JSON.stringify(Je)});l.Z.register_assistant_component(t).then((function(e){0===e.retcode?(v.ZP.success("\u6ce8\u518c\u8f85\u52a9\u7ec4\u4ef6\u6210\u529f"),q(!1)):e.retmsg&&v.ZP.error("\u5931\u8d25\u539f\u56e0: ".concat(e.retmsg))})),Re({})},onCancel:function(){q(!1)}}),(0,d.jsx)(B,{visible:E,onCreate:function(e){l.Z.register_assistant_component_type(e).then((function(e){0===e.retcode?(v.ZP.success("\u6ce8\u518c\u8f85\u52a9\u7ec4\u4ef6\u7c7b\u578b\u6210\u529f"),H(!1)):e.retmsg&&v.ZP.error("\u5931\u8d25\u539f\u56e0: ".concat(e.retmsg))}))},onCancel:function(){H(!1)}}),(0,d.jsx)(W,{visible:oe,onCancel:function(){ce(!1)}}),(0,d.jsx)(Q,{visible:se,onCancel:function(){ie(!1)}}),(0,d.jsx)(z,{visible:ee,onCreate:function(e){l.Z.mod_component_info(e).then((function(e){0===e.retcode?(v.ZP.success("\u4fee\u6539\u7ec4\u4ef6\u4fe1\u606f\u6210\u529f"),te(!1)):e.retmsg&&v.ZP.error("\u5931\u8d25\u539f\u56e0: ".concat(e.retmsg))}))},onCancel:function(){te(!1)}})]})})}}}]);