"use strict";(self.webpackChunkvite_ml_platform=self.webpackChunkvite_ml_platform||[]).push([[598],{60238:function(e,t,n){var a=n(67487),s="http://11.187.53.46:8080/api";t.Z={query_abtests:function(e){return a.Z.post({url:"".concat(s,"/query_abtests"),data:e})},query_edge_factorys:function(e){return a.Z.post({url:"".concat(s,"/query_edge_factorys"),data:e})},delete_edge_factory:function(e){return a.Z.post({url:"".concat(s,"/delete_edge_factory"),data:e})},query_structs:function(e){return a.Z.post({url:"".concat(s,"/query_structs"),data:e})},delete_struct:function(e){return a.Z.post({url:"".concat(s,"/delete_struct"),data:e})},query_associated_nodes:function(e){return a.Z.post({url:"".concat(s,"/query_associated_nodes"),data:e})},mod_struct:function(e){return a.Z.post({url:"".concat(s,"/mod_struct"),data:e})},add_struct:function(e){return a.Z.post({url:"".concat(s,"/add_struct"),data:e})},query_scenes:function(e){return a.Z.post({url:"".concat(s,"/query_scenes"),data:e})},query_associated_graphs:function(e){return a.Z.post({url:"".concat(s,"/query_associated_graphs"),data:e})},add_scene:function(e){return a.Z.post({url:"".concat(s,"/add_scene"),data:e})},mod_scene:function(e){return a.Z.post({url:"".concat(s,"/mod_scene"),data:e})},query_graph_templates:function(e){return a.Z.post({url:"".concat(s,"/query_graph_templates"),data:e})},query_components:function(e){return a.Z.post({url:"".concat(s,"/query_components"),data:e})},delete_component:function(e){return a.Z.post({url:"".concat(s,"/delete_component"),data:e})},query_component_historys:function(e){return a.Z.post({url:"".concat(s,"/query_component_historys"),data:e})},get_scene_names:function(e){return a.Z.post({url:"".concat(s,"/get_scene_names"),data:e})},get_scene_available_graphs:function(e){return a.Z.post({url:"".concat(s,"/get_scene_available_graphs"),data:e})},mod_abtest:function(e){return a.Z.post({url:"".concat(s,"/mod_abtest"),data:e})},add_abtest:function(e){return a.Z.post({url:"".concat(s,"/add_abtest"),data:e})},query_graphs:function(e){return a.Z.post({url:"".concat(s,"/query_graphs"),data:e})},get_graph_template_names:function(e){return a.Z.post({url:"".concat(s,"/get_graph_template_names"),data:e})},batch_query_components:function(e){return a.Z.post({url:"".concat(s,"/batch_query_components"),data:e})},query_graph_historys:function(e){return a.Z.post({url:"".concat(s,"/query_graph_historys"),data:e})},query_template_available_node_factorys:function(e){return a.Z.post({url:"".concat(s,"/query_template_available_node_factorys"),data:e})},get_edge_factory_names:function(e){return a.Z.post({url:"".concat(s,"/get_edge_factory_names"),data:e})},get_node_factory_names:function(e){return a.Z.post({url:"".concat(s,"/get_node_factory_names"),data:e})},query_node_factorys:function(e){return a.Z.post({url:"".concat(s,"/query_node_factorys"),data:e})},mod_graph:function(e){return a.Z.post({url:"".concat(s,"/mod_graph"),data:e})},add_graph:function(e){return a.Z.post({url:"".concat(s,"/add_graph"),data:e})},get_config_prototype:function(e){return a.Z.post({url:"".concat(s,"/get_config_prototype"),data:e})},rollback_graph:function(e){return a.Z.post({url:"".concat(s,"/rollback_graph"),data:e})}}},44598:function(e,t,n){n.r(t),n.d(t,{default:function(){return J}});var a=n(18489),s=n(50678),o=n(72791),r=n(83099),i=n(23695),l=n(47528),c=n(64564),d=n(87309),u=n(618),m=n(48757),f=n(31303),p=n(40743),g=n(16742),h=n(20063),_=n(66106),y=n(30914),Z=n(64469),x=n(6843),v=n(80184);function j(e){return(0,o.useEffect)((function(){!function(){var t=e.chartsData.nodes?e.chartsData:e.chartData,n=new x.ZP.Menu({getContent:function(e){return console.log(e),'\n                  <span style="color: red;width: 120px"> \u5220\u9664 </span>\n                 '},handleMenuClick:function(t,n){n._cfg.model.isEdit&&e.pushDelItem((0,a.Z)({},n._cfg.model)),i.removeItem(n)},offsetX:26,offsetY:0,itemTypes:["node"]});x.ZP.registerNode("sql",{drawShape:function(e,t){var n=t.addShape("rect",{attrs:{x:-75,y:-25,width:150,height:50,radius:10,stroke:"#5B8FF9",fill:"#C6E5FF",lineWidth:3},name:"rect-shape"});return e.name&&t.addShape("text",{attrs:{text:e.name,x:0,y:0,fill:"#00287E",fontSize:14,textAlign:"center",textBaseline:"middle",fontWeight:"bold"},name:"text-shape"}),n}},"single-node");var s=document.getElementById("container"),o=null===s||void 0===s?void 0:s.scrollWidth;console.log(" window.screen.availHeight",window.screen.availHeight);var r=window.screen.availHeight-60||800,i=new x.ZP.Graph({container:"container",width:o,height:r,plugins:[n],layout:{type:"dagre",nodesepFunc:function(e){return"3"===e.id?500:50},ranksep:70,controlPoints:!0},defaultNode:{type:"sql"},defaultEdge:{type:"cubic-vertical",curveOffset:0,style:{lineAppendWidth:20,endArrow:{path:x.ZP.Arrow.vee(20,20,25),d:35},lineWidth:4,stroke:"#C2C8D5"}},nodeStateStyles:{selected:{stroke:"#d9d9d9",fill:"#5394ef"}},modes:{default:["drag-canvas","drag-node","zoom-canvas","click-select",{type:"tooltip",formatText:function(e){return e.dataType+""}},{type:"create-edge",key:"shift",shouldEnd:function(e){return!0}}]},fitView:!0});i.data(t),i.render(),e.getGraph(i),e.getGraphData(t),i.setMinZoom(.2),"undefined"!==typeof window&&(window.onresize=function(){})}()}),[e.chartData]),(0,v.jsx)("div",{children:(0,v.jsx)("div",{style:{background:"#eee"},id:"container"})})}var b=n(44541),F=n(20135),w=n(58646),C=n(73231),I=n(58105),k=n(23414),S=n(28624),q=n(31752),N=n(60238);function V(e){if(console.log(e),!e)return!1;var t=window.document.createElement("input");window.document.body.appendChild(t),t.value=e,t.select(),window.document.execCommand("Copy"),t.remove(),i.ZP.success("\u590d\u5236\u6210\u529f")}var E=F.Z.TextArea;function T(e){var t=w.Z.useForm(),n=(0,s.Z)(t,1)[0],a=w.Z.useForm(),r=(0,s.Z)(a,1)[0],i=(0,o.useState)([]),l=(0,s.Z)(i,2),c=l[0],u=l[1],f=(0,o.useState)(!1),p=(0,s.Z)(f,2),g=p[0],h=p[1],_=(0,o.useState)({}),y=(0,s.Z)(_,2),Z=(y[0],y[1]),x=(0,o.useState)(!1),j=(0,s.Z)(x,2),b=j[0],T=j[1],P=(0,o.useState)(!1),A=(0,s.Z)(P,2),D=(A[0],A[1]);(0,o.useEffect)((function(){if(n.resetFields(),e.form.name)if(e.form.des)n.setFieldsValue(e.form);else{var t=e.nodeInfoArr.filter((function(e){return"edge"!==e.type})).find((function(t){return e.form.name===t.name}));t?(D(!1),n.setFieldsValue(t)):(n.setFieldsValue({factory_name:e.form.name,type:e.form.typeName?e.form.typeName:""}),D(!0))}}),[e.nodeId]);var O=function(){console.log("\u5931\u8d25")},L=function(t){e.nodeSubmit&&e.nodeSubmit({form:e.form,value:t})},G=function(e){var t=n.getFieldsValue(!0);V(void 0!==t[e]?t[e]:"")},R=function(t){if("config"===t){var a={opr:"get_config_prototype",data:{type:"edge",factory_name:n.getFieldsValue(["factory_name"]).factory_name?n.getFieldsValue(["factory_name"]).factory_name:"",template_name:e.baseForm.template_name}};N.Z.get_config_prototype(a).then((function(e){0===e.status&&r.setFieldsValue({config:e.data.config})}))}h(!0),console.log(n.getFieldsValue([t])),r.setFieldsValue({factory_name:n.getFieldsValue(["factory_name"]).factory_name?n.getFieldsValue(["factory_name"]).factory_name:"",des:n.getFieldsValue(["des"]).des?n.getFieldsValue(["des"]).des:"",config:n.getFieldsValue(["config"]).config?n.getFieldsValue(["config"]).config:""}),T("des"===t)};return(0,v.jsxs)("div",{children:[(0,v.jsxs)(w.Z,{name:"basic",labelCol:{span:8},style:{width:"80%"},wrapperCol:{span:16},onFinish:L,onFinishFailed:O,autoComplete:"off",form:n,children:[(0,v.jsx)(w.Z.Item,{label:"\u914d\u7f6e\u7c7b\u578b",name:"a",children:(0,v.jsxs)(C.ZP.Group,{defaultValue:2,disabled:!0,children:[(0,v.jsx)(C.ZP,{value:1,children:"\u5171\u6709"}),(0,v.jsx)(C.ZP,{value:2,children:"\u79c1\u6709"})]})}),(0,v.jsx)(w.Z.Item,{label:"\u6267\u884c\u7b49\u7ea7",name:"level",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6267\u884c\u7b49\u7ea7"}],children:(0,v.jsxs)(C.ZP.Group,{disabled:"view"===e.operation,children:[(0,v.jsx)(C.ZP,{value:1,children:"\u4e00\u822c"}),(0,v.jsx)(C.ZP,{value:0,children:"\u91cd\u8981"})]})}),(0,v.jsx)(w.Z.Item,{label:"\u8282\u70b9\u7c7b\u578b",name:"type",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8282\u70b9\u7c7b\u578b"}],children:(0,v.jsxs)(I.Z,{disabled:"view"===e.operation,onChange:function(e){!function(e){n.setFieldsValue({factory_name:""}),N.Z.get_node_factory_names({opr:"get_node_factory_names",data:{type:e}}).then((function(e){0===e.status&&e.data.node_factory_names&&u(e.data.node_factory_names)}))}(e)},children:[(0,v.jsx)(I.Z.Option,{value:"recall",children:"recall"}),(0,v.jsx)(I.Z.Option,{value:"sort",children:"sort"}),(0,v.jsx)(I.Z.Option,{value:"filter",children:"filter"})]})}),(0,v.jsx)(w.Z.Item,{label:"\u8282\u70b9\u5de5\u5382",name:"factory_name",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8282\u70b9\u5de5\u5382"}],children:(0,v.jsx)(I.Z,{disabled:"view"===e.operation,children:c.map((function(e){return(0,v.jsx)(I.Z.Option,{value:e,children:e},e)}))})}),(0,v.jsx)(w.Z.Item,{label:"\u8282\u70b9\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8282\u70b9\u540d\u79f0"}],children:(0,v.jsx)(F.Z,{disabled:"view"===e.operation})}),(0,v.jsx)(w.Z.Item,{label:"\u8d1f\u8d23\u4eba",name:"admin",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d1f\u8d23\u4eba"}],children:(0,v.jsx)(F.Z,{disabled:"view"===e.operation})}),(0,v.jsx)(w.Z.Item,{label:"\u8282\u70b9\u914d\u7f6e",name:"config",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8282\u70b9\u914d\u7f6e"}],children:(0,v.jsx)(E,{rows:4,disabled:!0})}),(0,v.jsx)(w.Z.Item,{label:"\u8282\u70b9\u63cf\u8ff0",name:"des",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8282\u70b9\u63cf\u8ff0"}],children:(0,v.jsx)(E,{rows:4,disabled:!0})}),(0,v.jsx)(w.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,v.jsx)(d.Z,{disabled:"view"===e.operation,htmlType:"submit",type:"primary",children:"\u4fdd\u5b58"})})]}),(0,v.jsxs)("div",{className:"sc-box",children:[(0,v.jsx)(k.Z,{className:"input-icon-copy",onClick:function(){return G("type")},style:{top:"188px"}}),(0,v.jsx)(k.Z,{className:"input-icon-copy",onClick:function(){return G("factory_name")},style:{top:"245px"}}),(0,v.jsx)(k.Z,{className:"input-icon-copy",onClick:function(){return G("name")},style:{top:"308px"}}),(0,v.jsx)(S.Z,{className:"input-icon-copy",style:{top:"290px"}}),(0,v.jsx)(k.Z,{className:"input-icon-copy",onClick:function(){return G("config")},style:{top:"425px"}}),(0,v.jsx)(q.Z,{className:"input-icon-edit",onClick:function(){R("config")},style:{top:"460px"}}),(0,v.jsx)(k.Z,{className:"input-icon-copy",onClick:function(){return G("des")},style:{top:"552px"}}),(0,v.jsx)(q.Z,{className:"input-icon-edit",onClick:function(){R("des")},style:{top:"578px"}})]}),(0,v.jsx)(m.Z,{title:"Basic Modal",width:"60%",visible:g,onOk:function(){return b?n.setFieldsValue({des:r.getFieldsValue(["des"]).des?r.getFieldsValue(["des"]).des:""}):n.setFieldsValue({config:r.getFieldsValue(["config"]).config?r.getFieldsValue(["config"]).config:""}),void h(!1)},onCancel:function(){h(!1),Z({})},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",children:(0,v.jsxs)(w.Z,{name:"basic",labelCol:{span:8},style:{width:"80%"},wrapperCol:{span:16},onFinish:L,onFinishFailed:O,autoComplete:"off",form:r,children:[(0,v.jsx)(w.Z.Item,{label:"\u540d\u79f0",name:"factory_name",children:(0,v.jsx)(F.Z,{})}),b?(0,v.jsx)(w.Z.Item,{label:"\u63cf\u8ff0\u4fe1\u606f",name:"des",children:(0,v.jsx)(E,{rows:4})}):(0,v.jsx)(w.Z.Item,{label:"\u914d\u7f6e\u4fe1\u606f",name:"config",children:(0,v.jsx)(E,{rows:4})})]})})]})}var P=F.Z.TextArea;function A(e){var t=w.Z.useForm(),n=(0,s.Z)(t,1)[0],r=w.Z.useForm(),i=(0,s.Z)(r,1)[0],l=(0,o.useState)(!1),c=(0,s.Z)(l,2),u=c[0],f=c[1],p=(0,o.useState)({}),g=(0,s.Z)(p,2),h=(g[0],g[1]),_=(0,o.useState)(!1),y=(0,s.Z)(_,2),Z=y[0],x=y[1],j=(0,o.useState)(!1),b=(0,s.Z)(j,2),E=(b[0],b[1]);(0,o.useEffect)((function(){if(console.log("edgeName",e.edgeName),n.resetFields(),e.edgeName.edgeName)if(e.edgeName.factory_name)n.setFieldsValue(e.edgeName);else{var t=e.nodeInfoArr.filter((function(e){return"edge"===e.type})).find((function(t){return e.edgeName.edgeName===t.name}));t?(E(!1),n.setFieldsValue(t)):(n.setFieldsValue((0,a.Z)((0,a.Z)({},e.edgeName),{},{name:e.edgeName.edgeName})),E(!0))}}),[e.edgeName.edgeName]);var T=function(){console.log("\u5931\u8d25")},A=function(t){e.edgeSubmit&&e.edgeSubmit(t,e.edgeName)},D=function(e){var t=n.getFieldsValue(!0);V(void 0!==t[e]?t[e]:"")},O=function(t){if(console.log(123123,t),"config"===t){var a={opr:"get_config_prototype",data:{type:"edge",factory_name:n.getFieldsValue(["factory_name"]).factory_name?n.getFieldsValue(["factory_name"]).factory_name:"",template_name:e.baseForm.template_name}};N.Z.get_config_prototype(a).then((function(e){0===e.status&&i.setFieldsValue({config:e.data.config})}))}f(!0),console.log(n.getFieldsValue([t])),i.setFieldsValue({factory_name:n.getFieldsValue(["factory_name"]).factory_name?n.getFieldsValue(["factory_name"]).factory_name:"",des:n.getFieldsValue(["des"]).des?n.getFieldsValue(["des"]).des:"",config:n.getFieldsValue(["config"]).config?n.getFieldsValue(["config"]).config:""}),x("des"===t)};return(0,v.jsxs)("div",{style:{position:"relative"},children:[(0,v.jsxs)(w.Z,{name:"basic",labelCol:{span:8},style:{width:"80%"},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:A,onFinishFailed:T,autoComplete:"off",form:n,className:"abtset-form ",children:[(0,v.jsx)(w.Z.Item,{label:"\u914d\u7f6e\u7c7b\u578b",name:"a",children:(0,v.jsxs)(C.ZP.Group,{defaultValue:2,disabled:!0,children:[(0,v.jsx)(C.ZP,{value:1,children:"\u5171\u6709"}),(0,v.jsx)(C.ZP,{value:2,children:"\u79c1\u6709"})]})}),(0,v.jsx)(w.Z.Item,{label:"\u8fb9\u5de5\u5382",name:"factory_name",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8fb9\u5de5\u5382"}],children:(0,v.jsx)(I.Z,{disabled:"view"===e.operation,children:e.edgeInfoArr.map((function(e){return(0,v.jsx)(I.Z.Option,{value:e,children:e},e)}))})}),(0,v.jsx)(w.Z.Item,{label:"\u8fb9\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8fb9\u540d\u79f0"}],children:(0,v.jsx)(F.Z,{disabled:"view"===e.operation})}),(0,v.jsx)(w.Z.Item,{label:"\u8d1f\u8d23\u4eba",name:"admin",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d1f\u8d23\u4eba"}],children:(0,v.jsx)(F.Z,{disabled:"view"===e.operation})}),(0,v.jsx)(w.Z.Item,{label:"\u914d\u7f6e",name:"config",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u914d\u7f6e"}],children:(0,v.jsx)(P,{rows:4,disabled:!0})}),(0,v.jsx)(w.Z.Item,{label:"\u8fb9\u8bf4\u660e",name:"des",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8fb9\u8bf4\u660e"}],children:(0,v.jsx)(P,{rows:4,disabled:!0})}),(0,v.jsx)(w.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,v.jsx)(d.Z,{htmlType:"submit",disabled:"view"===e.operation,type:"primary",children:"\u4fdd\u5b58"})})]}),(0,v.jsxs)("div",{className:"sc-box1",children:[(0,v.jsx)(k.Z,{className:"input-icon-copy1",onClick:function(){return D("factory_name")},style:{top:"64px"}}),(0,v.jsx)(S.Z,{className:"input-icon-copy1",style:{top:"110px"}}),(0,v.jsx)(k.Z,{className:"input-icon-copy1",onClick:function(){return D("name")},style:{top:"130px"}}),(0,v.jsx)(k.Z,{className:"input-icon-copy1",onClick:function(){return D("config")},style:{top:"248px"}}),(0,v.jsx)(q.Z,{className:"input-icon-edit1",onClick:function(){O("config")},style:{top:"278px"}}),(0,v.jsx)(k.Z,{className:"input-icon-copy1",onClick:function(){return D("des")},style:{top:"380px"}}),(0,v.jsx)(q.Z,{className:"input-icon-edit1",onClick:function(){O("des")},style:{top:"410px"}})]}),(0,v.jsx)(m.Z,{title:"\u7f16\u8f91",width:"60%",visible:u,onOk:function(){return Z?n.setFieldsValue({des:i.getFieldsValue(["des"]).des?i.getFieldsValue(["des"]).des:""}):n.setFieldsValue({config:i.getFieldsValue(["config"]).config?i.getFieldsValue(["config"]).config:""}),void f(!1)},onCancel:function(){f(!1),h({})},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",children:(0,v.jsxs)(w.Z,{name:"basic",labelCol:{span:8},style:{width:"80%"},wrapperCol:{span:16},onFinish:A,onFinishFailed:T,autoComplete:"off",form:i,children:[(0,v.jsx)(w.Z.Item,{label:"\u540d\u79f0",name:"factory_name",children:(0,v.jsx)(F.Z,{})}),Z?(0,v.jsx)(w.Z.Item,{label:"\u63cf\u8ff0\u4fe1\u606f",name:"des",children:(0,v.jsx)(P,{rows:4})}):(0,v.jsx)(w.Z.Item,{label:"\u914d\u7f6e\u4fe1\u606f",name:"config",children:(0,v.jsx)(P,{rows:4})})]})})]})}var D=n(71939),O=n.n(D),L=p.Z.SubMenu,G=g.Z.Step,R=h.Z.Panel,B=[];function M(e){var t=(0,o.useState)({nodes:[],edges:[]}),n=(0,s.Z)(t,2),r=n[0],l=n[1],c=(0,o.useState)(0),u=(0,s.Z)(c,2),m=u[0],F=u[1],w=(0,o.useState)({}),C=(0,s.Z)(w,2),I=C[0],k=C[1],S=(0,o.useState)(null),q=(0,s.Z)(S,2),V=q[0],E=q[1],P=(0,o.useState)({}),D=(0,s.Z)(P,2),M=(D[0],D[1]),W=(0,o.useState)({}),Y=(0,s.Z)(W,2),z=Y[0],H=Y[1],J=(0,o.useState)([]),X=(0,s.Z)(J,2),K=X[0],Q=X[1],U=(0,o.useState)(""),$=(0,s.Z)(U,2),ee=$[0],te=$[1],ne=(0,o.useState)([]),ae=(0,s.Z)(ne,2),se=ae[0],oe=ae[1],re=(0,o.useState)({}),ie=(0,s.Z)(re,2),le=ie[0],ce=ie[1],de=(0,o.useRef)(null),ue=(0,o.useState)([]),me=(0,s.Z)(ue,2),fe=me[0],pe=me[1],ge=(0,o.useState)([]),he=(0,s.Z)(ge,2),_e=he[0],ye=he[1],Ze=(0,o.useState)({}),xe=(0,s.Z)(Ze,2),ve=xe[0],je=xe[1],be=(0,o.useState)({}),Fe=(0,s.Z)(be,2),we=Fe[0],Ce=Fe[1],Ie=(0,o.useState)({}),ke=(0,s.Z)(Ie,2),Se=ke[0],qe=ke[1],Ne=(0,o.useState)({}),Ve=(0,s.Z)(Ne,2),Ee=Ve[0],Te=Ve[1],Pe=(0,o.useState)({}),Ae=(0,s.Z)(Pe,2),De=Ae[0],Oe=Ae[1];(0,o.useEffect)((function(){H(e.form)}),[e.form]),(0,o.useEffect)((function(){B=[]}),[m]);var Le=function(e,t,n){var a=x.ZP.Util.getTextSize("...",n)[0],s=0,o=e,r=new RegExp("[\u4e00-\u9fa5]+");return e.split("").forEach((function(i,l){s>t-a||(r.test(i)?s+=n:s+=x.ZP.Util.getLetterWidth(i,n),s>t-a&&(o="".concat(e.substr(0,l)).concat("...")))})),o};console.log("prop.scene_names",e.scene_names);var Ge=[{type:"input",name:"graph_name",label:"\u56fe\u540d\u79f0"},{type:"input",name:"admin",label:"\u8d1f\u8d23\u4eba"},{type:"select",name:"scene_name",label:"\u4f7f\u7528\u573a\u666f",options:e.scene_names?e.scene_names.map((function(e){return{label:e,value:e}})):[]},{type:"select",name:"template_name",label:"\u56fe\u6a21\u677f",options:e.template_names?e.template_names.map((function(e){return{label:e,value:e}})):[]},{type:"radio",name:"status",label:"\u73af\u5883",options:[{label:"\u6d4b\u8bd5",value:2},{label:"\u6b63\u5f0f",value:3},{label:"\u53ea\u521b\u5efa",value:1}]},{type:"textArea",name:"des",label:"\u63cf\u8ff0"}],Re={recall:"\u53ec\u56de\u8282\u70b9\u5de5\u5382",filter:"\u8fc7\u6ee4\u8282\u70b9\u5de5\u5382",sort:"\u6392\u5e8f\u8282\u70b9\u5de5\u5382",merge:"\u805a\u5408\u8282\u70b9\u5de5\u5382",topn:"topN\u8282\u70b9\u5de5\u5382",custome:"\u81ea\u5b9a\u4e49\u8282\u70b9\u5de5\u5382",preprocess:"\u9884\u5904\u7406\u8282\u70b9\u5de5\u5382",edge:"\u8fb9\u8282\u70b9\u5de5\u5382",async:"\u5f02\u6b65\u5de5\u5382"};return(0,v.jsxs)("div",{children:[(0,v.jsxs)(g.Z,{current:m,style:{paddingBottom:"20px"},children:[(0,v.jsx)(G,{title:"\u57fa\u672c\u4fe1\u606f"}),(0,v.jsx)(G,{title:"\u56fe\u914d\u7f6e"}),(0,v.jsx)(G,{title:"\u5b8c\u6210"})]}),0===m&&(0,v.jsx)("div",{children:(0,v.jsx)(b.Z,{setBaseForm:H,opName:"form",isadd:e.isadd,submitForm:function(t,n){"form"===n&&(H((0,a.Z)((0,a.Z)({},t),{},{version:e.form.version})),Oe((0,a.Z)((0,a.Z)({},t),{},{version:e.form.version})),N.Z.batch_query_components({opr:"batch_query_components",data:{graph_name:t.graph_name,version:e.form.version}}).then((function(e){console.log("res, version",e),0===e.status&&e.data.results&&pe(e.data.results)})),console.log("map_config12312",we),e.form.map_config?function(){var t=JSON.parse(e.form.map_config);Ce(t),console.log("map_config",t);var n=[],s=[],o=function(e){n.push({id:t[e].id+"",label:Le(e,120,12),dataType:e,factory:t[e].level.factory,level:t[e].level,atype:t[e].type,isEdit:!0}),t[e].edges&&t[e].edges.forEach((function(n){var o=fe.find((function(e){return e.name===n.name}));o||(o={}),s.push((0,a.Z)({source:t[n.from].id+"",target:t[e].id+"",edgeName:n.name,factory_name:o?o.name:""},o))}))};for(var r in t)o(r);l({nodes:n,edges:s})}():l({nodes:[{id:"-2",label:"end",dataType:"end"},{id:"-1",label:"start",dataType:"start"}],edges:[]}),N.Z.query_template_available_node_factorys({opr:"query_template_available_node_factorys",data:{template_name:t.template_name}}).then((function(e){0===e.status&&e.data.results&&oe(e.data.results)})),N.Z.get_edge_factory_names({opr:"get_edge_factory_names"}).then((function(e){console.log("res, version",e),0===e.status&&e.data.edge_factory_names&&ye(e.data.edge_factory_names)})),F(m+1))},formRolue:Ge,saveFrom:De,form:e.form,setEditStatus:e.setEditStatus,stepCurrent:m,setCurrent:F,nodeId:ee})}),1===m&&(0,v.jsx)("div",{children:(0,v.jsx)("div",{children:(0,v.jsxs)(_.Z,{gutter:10,style:{minHeight:"60Vh"},children:[(0,v.jsx)(y.Z,{span:4,children:(0,v.jsx)(p.Z,{defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],mode:"inline",children:se.map((function(t,n){return(0,v.jsx)(L,{title:Re[t.type],children:t.available_node_factorys?t.available_node_factorys.map((function(a,s){return(0,v.jsx)(Z.Z,{placement:"right",title:a.des,children:(0,v.jsx)(p.Z.Item,{draggable:"true",onDragEnd:function(n){"view"!==e.operation&&function(e,t){console.log(t);var n=de&&de.current?de.current:{};if(n.offsetLeft&&e.screenX>n.offsetLeft&&e.screenX<n.offsetLeft+n.offsetWidth&&e.screenY>n.offsetTop&&e.screenY<n.offsetTop+n.offsetHeight&&V){var a=V.save().nodes.map((function(e){return Number.parseInt(e.id)}));console.log(e.target.childNodes[0].innerText),V.addItem("node",{id:Math.max.apply(Math,(0,f.Z)(a))+1+"",label:e.target.childNodes[0].innerText,typeName:t,dataType:e.target.childNodes[0].innerText,x:e.screenX-n.offsetLeft/V.getZoom().toFixed(2),y:e.screenY-n.offsetTop/V.getZoom().toFixed(2),isAdd:!0},!1)}}(n,t.type)},children:a.factory_name},s+1+(n+1+""))},n+"-"+s)})):null},"sub"+(n+1))}))})}),(0,v.jsx)(y.Z,{span:14,ref:de,children:(0,v.jsx)(j,{chartData:r,style:{height:"100%",background:"#eee"},chartsData:Ee,pushDelItem:function(e){B=[].concat((0,f.Z)(B),[e])},getGraph:function(e){E(e),e.on("node:click",(function(e){if(console.log(e.item._cfg.model),"start"===e.item._cfg.model.label||"end"===e.item._cfg.model.label)return Q([]),!1;Q(["1"]),ce((0,a.Z)((0,a.Z)({},e.item._cfg.model),{},{name:e.item._cfg.model.dataType,typeName:e.item._cfg.model.typeName})),je({}),te(e.item._cfg.model.id)})),e.on("edge:mouseenter",(function(t){var n=t.item;e.setItemState(n,"active",!0)})),e.on("edge:mouseleave",(function(t){var n=t.item;e.setItemState(n,"active",!1)})),e.on("edge:click",(function(t){console.log("evt",t),ce({}),te("0"),Q(["2"]),je((0,a.Z)((0,a.Z)({},t.item._cfg.model),{},{edgeName:t.item._cfg.model.edgeName?t.item._cfg.model.edgeName:""}));var n=t.item;e.getEdges().forEach((function(t){e.setItemState(t,"selected",!1)})),e.setItemState(n,"selected",!0)})),e.on("canvas:click",(function(t){e.getEdges().forEach((function(t){e.clearItemStates(t)}))}))},nodeInfoArr:fe,getGraphData:function(e){M(e)}})}),(0,v.jsxs)(y.Z,{span:6,children:[(0,v.jsxs)(h.Z,{activeKey:K,onChange:function(e){Q(e)},accordion:!0,collapsible:"disabled",children:[(0,v.jsx)(R,{header:"\u8282\u70b9\u914d\u7f6e",children:(0,v.jsx)(T,{operation:e.operation,baseForm:z,isadd:e.isadd,nodeSubmit:function(e){var t=e.value,n=t.config,a=t.des,s=t.factory_name,o=t.name,r=t.type,l=t.admin,c=t.level,d=V.find("node",(function(t){return t._cfg.id===e.form.id}));V.updateItem(d,{config:n,des:a,factory_name:s,name:o,atype:r,label:o,dataType:o,admin:l,level:c,modify:!0,isAdd:!1}),i.ZP.success("\u66f4\u65b0\u6210\u529f")},nodeInfoArr:fe,opName:"node",form:le,nodeId:ee})},"1"),(0,v.jsx)(R,{header:"\u8fb9\u914d\u7f6e",children:(0,v.jsx)(A,{operation:e.operation,baseForm:z,isadd:e.isadd,edgeSubmit:function(e,t){console.log(e,t);var n=e.config,a=e.des,s=e.factory_name,o=e.name,r=e.admin,i=V.find("edge",(function(e){return e._cfg.id===t.id}));V.updateItem(i,{config:n,des:a,factory_name:s,name:o,admin:r,isEdit:!0,modify:!0})},edgeInfoArr:_e,nodeInfoArr:fe,opName:"egat",form:le,edgeName:ve})},"2")]}),(0,v.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginTop:"20px"},children:[(0,v.jsx)(d.Z,{onClick:function(){F(m-1)},children:"\u4e0a\u4e00\u6b65"}),(0,v.jsx)(d.Z,{style:{marginLeft:"20px"},onClick:function(){!function(){var e=V.save();Te(e),console.log("dat",e);var t=!0;if(console.log(e),e.nodes.forEach((function(n){void 0===e.edges.find((function(e){return n.id===e.source||n.id===e.target}))&&(t=!1)})),!t)return i.ZP.error("\u8bf7\u586b\u5199\u5b8c\u6574\u4fe1\u606f"),!1;var n=[],s={},o=!0;if(e.nodes.forEach((function(e){console.log(e);var t=V.find("node",(function(t){return t.get("model").id===e.id})),r=fe.find((function(t){return t.name===e.dataType}));s[e.dataType]={factory:e.dataType,id:e.id,level:e.level?e.level:0,type:e.atype?e.atype:r?r.type:"",edges:t?t.getInEdges().map((function(e,t){return{factory:e._cfg.model.factory_name?e._cfg.model.factory_name:"",from:e.getSource()._cfg.model.dataType,name:e._cfg.model.edgeName||"EmptyEdge"+t}})):[]},console.log(r),e.isAdd&&(o=!1),e.modify&&n.push((0,a.Z)((0,a.Z)({},r),{},{type:e.atype?e.atype:"",factory_name:e.factory_name?e.factory_name:r.factory_name,name:e.name?e.name:"",des:e.des?e.des:"",graph_name:z.graph_name,admin:e.admin?e.admin:"",config:e.config?e.config:"",status:e.status?e.status:5,output_struct:e.output_struct?e.output_struct:"",version:r?r.version+1:1}))})),console.log("delItem",B),B.forEach((function(e){console.log("Y",e);var t=fe.find((function(t){return t.name===e.dataType}));t&&n.push({type:t.atype?t.atype:"",factory_name:t.factory_name?t.factory_name:"",name:t.name?t.name:"",des:t.des?t.des:"",graph_name:z.graph_name,admin:t.admin?t.admin:"",config:t.config?t.config:"",status:-1,output_struct:t.output_struct?t.output_struct:"",version:t.version?t.version+1:1})})),e.edges.forEach((function(e){e.modify&&n.push({admin:e.admin?e.admin:"",config:e.config?e.config:"",des:e.des?e.des:"",factory_name:e.factory_name?e.factory_name:"",graph_name:z.graph_name,name:e.name?e.name:"",output_struct:"",status:e.status?e.status:0,type:"edge",version:e.version?e.version+1:1})})),!1===o)return i.ZP.error("\u5fc5\u9009\u5b57\u6bb5\u672a\u586b\u5199"),!1;k(s),qe(n),F(m+1)}()},children:"\u4e0b\u4e00\u6b65"})]})]})]})})}),2===m&&(0,v.jsx)("div",{children:(0,v.jsxs)(_.Z,{children:[(0,v.jsxs)(y.Z,{span:10,offset:1,children:[(0,v.jsx)(O(),{style:{height:"400px",overflowY:"auto"},src:I,displayDataTypes:!1,theme:"railscasts"}),(0,v.jsx)("div",{className:"chart-name",children:"\u56fe\u7ed3\u6784\u914d\u7f6e"})]}),(0,v.jsxs)(y.Z,{span:10,offset:2,children:[(0,v.jsx)(O(),{style:{height:"400px",overflowY:"auto"},src:Se,displayDataTypes:!1,theme:"railscasts"}),(0,v.jsx)("div",{className:"chart-name",children:"\u8282\u70b9\u6216\u8fb9\u7684\u79c1\u6709\u914d\u7f6e"})]})]})}),(0,v.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginTop:"30px"},children:[2===m?(0,v.jsx)(d.Z,{style:{marginLeft:"20px"},onClick:function(){F(m-1)},children:" \u4e0a\u4e00\u6b65 "}):null,2===m?(0,v.jsx)(d.Z,{onClick:function(){!function(){var t={components_config:Se,graph_config:(0,a.Z)((0,a.Z)({},z),{},{version:z.version?z.version+1:1,map_config:JSON.stringify(I)})};"new"===e.operation?(console.log(e.operation),N.Z.add_graph({opr:"add_graph",data:t}).then((function(t){console.log(t),0===t.status?(i.ZP.success("\u6dfb\u52a0\u6210\u529f"),F(0),e.setEditStatus(!1),e.queryList({})):i.ZP.error(t.message)}))):"edit"===e.operation?N.Z.mod_graph({opr:"mod_graph",data:t}).then((function(t){0===t.status?(i.ZP.success("\u4fee\u6539\u6210\u529f"),e.setEditStatus(!1),e.queryList({}),F(0)):i.ZP.error(t.message)})):(e.setEditStatus(!1),F(0))}(),Te({}),H({})},children:" \u5b8c\u6210 "}):null]})]})}var W=n(99154),Y=[{type:"input",name:"graph_name",label:"\u56fe\u540d\u79f0"},{type:"select",name:"status",label:"\u72b6\u6001",options:[{value:-1,label:"\u5931\u6548"},{value:0,label:"\u6709\u6548"},{value:1,label:"\u521b\u5efa\u6210\u529f"},{value:2,label:"\u6d4b\u8bd5\u53d1\u5e03"},{value:3,label:"\u6b63\u5f0f\u53d1\u5e03"},{value:4,label:"\u516c\u6709"},{value:5,label:"\u79c1\u6709"}]},{type:"input",name:"scene_name",label:"\u4f7f\u7528\u573a\u666f"},{type:"input",name:"admin",label:"\u8d1f\u8d23\u4eba"},{type:"rangePicker",name:"time",label:"\u66f4\u65b0\u65f6\u95f4"}],z=n(17097),H=n(79271);function J(){var e=(0,o.useState)(!1),t=(0,s.Z)(e,2),n=t[0],f=t[1],p=(0,o.useState)([]),g=(0,s.Z)(p,2),h=g[0],_=g[1],y=(0,o.useState)({}),Z=(0,s.Z)(y,2),x=Z[0],j=Z[1],b=(0,o.useState)([]),F=(0,s.Z)(b,2),w=F[0],C=F[1],I=(0,o.useState)(!1),k=(0,s.Z)(I,2),S=k[0],q=k[1],V=(0,o.useState)([]),E=(0,s.Z)(V,2),T=E[0],P=E[1],A=(0,o.useState)(!1),D=(0,s.Z)(A,2),O=D[0],L=D[1],G=(0,o.useState)([]),R=(0,s.Z)(G,2),B=R[0],J=R[1],X=(0,o.useState)(""),K=(0,s.Z)(X,2),Q=K[0],U=K[1],$=(0,H.k6)(),ee=function(e){j(e),f(!0)},te=[{title:"#",render:function(e,t,n){return(0,v.jsx)("a",{children:n+1+""})}},{title:"\u56fe\u540d\u79f0",dataIndex:"graph_name",key:"graph_name"},{title:"\u7248\u672c",dataIndex:"version",key:"version"},{title:"\u56fe\u6a21\u677f",dataIndex:"template_name",key:"template_name"},{title:"\u8d1f\u8d23\u4eba",dataIndex:"admin",key:"admin"},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updated_time",key:"updated_time"},{title:"\u4f7f\u7528\u573a\u666f",dataIndex:"scene_name",key:'"scene_name'},{title:"\u64cd\u4f5c",key:"action",render:function(e,t){return(0,v.jsx)(r.Z,{size:"middle",children:(0,v.jsx)("a",{onClick:function(){q(!1),ee(t),U("view"),L(!1)},children:" \u67e5\u770b "},"view")})}}],ne=[{title:"#",render:function(e,t,n){return(0,v.jsx)("a",{children:n+1+""})}},{title:"\u56fe\u540d\u79f0",dataIndex:"graph_name",key:"graph_name"},{title:"\u7248\u672c",dataIndex:"version",key:"version"},{title:"\u72b6\u6001",dataIndex:"status",key:"status",render:function(e){return(0,v.jsx)(l.Z,{color:z.a[e]?z.a[e]:"",children:z.Q[e]?z.Q[e]:""})}},{title:"\u56fe\u6a21\u677f",dataIndex:"template_name",key:"template_name"},{title:"\u8d1f\u8d23\u4eba",dataIndex:"admin",key:"admin"},{title:"\u63cf\u8ff0",dataIndex:"des",key:"des"},{title:"\u4f7f\u7528\u573a\u666f",dataIndex:"scene_name",key:"scene_name"},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updated_time",key:"updated_time"},{title:"\u64cd\u4f5c",key:"action",render:function(e,t){return(0,v.jsxs)(r.Z,{size:"middle",children:[(0,v.jsx)("a",{onClick:function(){q(!1),ee(t),U("view")},children:"\u67e5\u770b"},"view"),(0,v.jsx)("span",{style:{color:"#999",marginTop:"-1px"},children:" | "}),(0,v.jsx)("a",{onClick:function(){console.log("record",t),U("edit"),q(!0),ee(t)},children:"\u7f16\u8f91"},"edit"),(0,v.jsx)("span",{style:{color:"#999",marginTop:"-1px"},children:" | "}),(0,v.jsx)("a",{onClick:function(){U("copy"),q(!0),ee((0,a.Z)((0,a.Z)({},t),{},{graph_name:t.graph_name+"_copy"}))},children:"\u590d\u5236"},"copy"),(0,v.jsx)("span",{style:{color:"#999",marginTop:"-1px"},children:" | "}),(0,v.jsx)("a",{onClick:function(){!function(e){var t={opr:"query_graph_historys",data:{graph_name:e.graph_name}};N.Z.query_graph_historys(t).then((function(e){console.log(e),0===e.status?(J(e.data.results),L(!0),i.ZP.success(e.message)):i.ZP.error(e.message)}))}(t)},children:"\u5386\u53f2\u7248\u672c"},"v"),(0,v.jsx)("span",{style:{color:"#999",marginTop:"-1px"},children:" | "}),(0,v.jsx)("a",{onClick:function(){!function(e){var t={opr:"rollback_graph",data:{graph_name:e.graph_name,version:e.version}};N.Z.rollback_graph(t).then((function(e){console.log(e),0===e.status?i.ZP.success(e.message):i.ZP.error(e.message)}))}(t),ae({})},children:"\u56de\u6eda"},"gun")]})}}],ae=function(e){var t=e.admin,n=e.scene_name,a=e.status,s=e.time,o={graph_name:e.graph_name||"",status:a||0,scene_name:n||"",admin:t||"",min_updated_time:s&&s[0]?s[0]:0,max_updated_time:s&&s[1]?s[1]:0};N.Z.query_graphs({opr:"query_graphs",data:o}).then((function(e){console.log(e),0===e.status&&e.data.results&&_(e.data.results)}))};return(0,o.useEffect)((function(){console.log($),$.location.state&&(q(!1),ee($.location.state),U("view")),ae({}),N.Z.get_graph_template_names({opr:"get_graph_template_names"}).then((function(e){console.log("res.data.template_names",e.data.template_names),0===e.status&&e.data.template_names&&C(e.data.template_names)})),N.Z.get_scene_names({opr:"get_scene_names"}).then((function(e){0===e.status&&e.data.scene_names&&P(e.data.scene_names)}))}),[]),(0,v.jsxs)("div",{style:{padding:"30px 40px"},children:[n?(0,v.jsx)("div",{children:(0,v.jsx)(M,{queryList:ae,operation:Q,formRolue:Y,isadd:S,form:x,scene_names:T,template_names:w,showEdit:n,setEditStatus:f})}):(0,v.jsxs)("div",{children:[(0,v.jsx)(c.Z,{title:"\u67e5\u8be2\u6761\u4ef6",children:(0,v.jsx)(W.Z,{formRolue:Y,form:x,queryList:ae})}),(0,v.jsx)(c.Z,{title:"\u67e5\u8be2\u7ed3\u679c",extra:(0,v.jsx)(d.Z,{type:"primary",onClick:function(){return U("new"),q(!0),ee({}),void f(!0)},children:"\u65b0\u589e"}),style:{marginTop:"20px"},children:(0,v.jsx)(u.Z,{columns:ne,dataSource:h},"bussiness_id")})]}),(0,v.jsx)(m.Z,{width:"80%",title:"\u5386\u53f2\u7248\u672c",visible:O,onCancel:function(){L(!1)},footer:[(0,v.jsx)(d.Z,{onClick:function(){L(!1)},children:"\u5173\u95ed"},"back")],children:(0,v.jsx)(u.Z,{columns:te,dataSource:B},"struct_name")})]})}},17097:function(e,t,n){n.d(t,{Q:function(){return a},a:function(){return s}});var a={0:"\u6709\u6548","-1":"\u5931\u6548",1:"\u521b\u5efa\u6210\u529f",2:"\u6d4b\u8bd5\u53d1\u5e03",3:"\u6b63\u5f0f\u53d1\u5e03",4:"\u516c\u6709",5:"\u79c1\u6709"},s={0:"green","-1":"#F56C6C",1:"#67C23A",2:"green",3:"#E6A23C",4:"#409EFF",5:"#909399"}},44541:function(e,t,n){n.d(t,{Z:function(){return g}});var a=n(50678),s=n(72791),o=n(20135),r=n(58646),i=n(58105),l=n(13295),c=n(73231),d=n(87309),u=n(71939),m=n.n(u),f=n(80184),p=o.Z.TextArea;function g(e){var t=r.Z.useForm(),n=(0,a.Z)(t,1)[0],u=(0,s.useState)({}),g=(0,a.Z)(u,2),h=g[0],_=g[1],y=(0,s.useRef)(null);(0,s.useEffect)((function(){n.resetFields(),n.setFieldsValue(e.form),e.form.map_config&&_(JSON.parse(JSON.stringify(e.form.map_config))),e.saveFrom&&e.saveFrom.graph_name&&n.setFieldsValue(e.saveFrom)}),[]);return(0,f.jsx)("div",{children:(0,f.jsxs)(r.Z,{name:"basic",labelCol:{span:8},style:{width:"80%"},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:function(t){e.submitForm(t,e.opName)},onFinishFailed:function(){console.log("\u5931\u8d25")},autoComplete:"off",ref:y,form:n,children:[e.formRolue.map((function(t){switch(t.type){case"input":return(0,f.jsx)(r.Z.Item,{label:t.label,name:t.name,initialValue:e.form[t.name],rules:[{required:!0,message:"\u8bf7\u8f93\u5165"+t.label}],children:(0,f.jsx)(o.Z,{disabled:!(!e.disableds&&!1!==e.isadd)})},t.name);case"select":return(0,f.jsx)(r.Z.Item,{label:t.label,name:t.name,rules:[{required:!0,message:"\u8bf7\u9009\u62e9"+t.label}],children:(0,f.jsx)(i.Z,{disabled:!(!e.disableds&&!1!==e.isadd),children:t.options?t.options.map((function(e){return(0,f.jsx)(i.Z.Option,{value:e.value,children:e.label},e.value)})):null})},t.name);case"picker":return(0,f.jsx)(r.Z.Item,{label:t.label,name:t.name,rules:[{required:!0,message:"\u8bf7\u9009\u62e9"+t.label}],children:(0,f.jsx)(l.Z,{style:{width:"100%"}})},t.name);case"radio":return(0,f.jsx)(r.Z.Item,{label:t.label,name:t.name,rules:[{required:!0,message:"\u8bf7\u9009\u62e9"+t.label}],children:(0,f.jsx)(c.ZP.Group,{disabled:!(!e.disableds&&!1!==e.isadd),children:t.options?t.options.map((function(e){return(0,f.jsx)(c.ZP,{value:e.value,children:e.label},e.value)})):null})},t.name);case"json":return(0,f.jsx)(r.Z.Item,{label:t.label,name:t.name,children:(0,f.jsx)(m(),{src:h,displayDataTypes:!1,theme:"railscasts",onEdit:function(e){return function(e){return console.log(e),!0}(e)},onAdd:function(e){return function(e){return console.log(e),!0}(e)}})},t.name);case"textArea":return(0,f.jsx)(r.Z.Item,{label:t.label,name:t.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165"+t.label}],children:(0,f.jsx)(p,{rows:4,disabled:!(!e.disableds&&!1!==e.isadd)})},t.name)}})),(0,f.jsxs)(r.Z.Item,{wrapperCol:{offset:8,span:16},children:[(0,f.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[0===e.stepCurrent?(0,f.jsx)(d.Z,{onClick:function(){e.setEditStatus(!1),e.setBaseForm&&e.setBaseForm({})},children:"\u8fd4\u56de"}):null,0===e.stepCurrent?(0,f.jsx)(d.Z,{htmlType:"submit",style:{marginLeft:"20px"},children:"\u4e0b\u4e00\u6b65"}):null]}),e.stepCurrent&&0!==e.stepCurrent?(0,f.jsx)(d.Z,{type:"primary",children:"\u63d0\u4ea4"}):null,e.isadd&&void 0===e.stepCurrent?(0,f.jsx)(d.Z,{htmlType:"submit",type:"primary",disabled:!(!e.disableds&&!1!==e.isadd),children:"\u63d0\u4ea4"}):null]})]})})}},99154:function(e,t,n){n.d(t,{Z:function(){return p}});var a=n(72791),s=n(13295),o=n(58646),r=n(66106),i=n(30914),l=n(20135),c=n(58105),d=n(73231),u=n(87309),m=n(80184),f=s.Z.RangePicker;function p(e){var t=(0,a.useRef)(null);(0,a.useEffect)((function(){console.log("\u89e6\u53d1\u4e86",t.current.setFieldsValue(e.form))}),[]);return(0,m.jsx)("div",{children:(0,m.jsx)(o.Z,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:function(t){e.queryList(t)},onFinishFailed:function(){console.log("\u5931\u8d25")},autoComplete:"off",ref:t,children:(0,m.jsxs)(r.Z,{children:[e.formRolue.map((function(e){switch(e.type){case"input":return(0,m.jsx)(i.Z,{span:6,children:(0,m.jsx)(o.Z.Item,{label:e.label,name:e.name,children:(0,m.jsx)(l.Z,{})},e.name)});case"select":return(0,m.jsx)(i.Z,{span:6,children:(0,m.jsx)(o.Z.Item,{label:e.label,name:e.name,children:(0,m.jsx)(c.Z,{children:e.options?e.options.map((function(e){return(0,m.jsx)(c.Z.Option,{value:e.value,children:e.label},e.value)})):null})},e.name)});case"picker":return(0,m.jsx)(i.Z,{span:6,children:(0,m.jsx)(o.Z.Item,{label:e.label,name:e.name,children:(0,m.jsx)(s.Z,{style:{width:"100%"}})},e.name)});case"radio":return(0,m.jsx)(i.Z,{span:6,children:(0,m.jsx)(o.Z.Item,{label:e.label,name:e.name,children:(0,m.jsxs)(d.ZP.Group,{children:[(0,m.jsx)(d.ZP,{value:1,children:"A"}),e.options?e.options.map((function(e){return(0,m.jsx)(d.ZP,{value:e.value,children:e.label},e.value)})):null]})},e.name)});case"rangePicker":return(0,m.jsx)(i.Z,{span:6,children:(0,m.jsx)(o.Z.Item,{label:e.label,name:e.name,children:(0,m.jsx)(f,{})},e.name)})}})),(0,m.jsx)(i.Z,{span:6,children:(0,m.jsx)(o.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,m.jsx)(u.Z,{type:"primary",htmlType:"submit",children:"\u67e5\u8be2"})})})]})})})}}}]);